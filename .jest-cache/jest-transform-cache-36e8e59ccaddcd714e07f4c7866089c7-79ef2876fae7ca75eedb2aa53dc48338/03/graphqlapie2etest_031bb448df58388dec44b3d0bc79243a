60fd5f377edeffb53146942f4fa18928
"use strict";
/**
 * E2E Tests: GraphQL API
 *
 * Testing GraphQL queries, mutations, and subscriptions
 */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const supertest_1 = __importDefault(require("supertest"));
const app_1 = require("../../../src/app");
const jwt_utils_1 = require("../../../src/libs/auth/jwt.utils");
describe('GraphQL API E2E Tests', () => {
    let app;
    let authToken;
    let adminToken;
    beforeAll(async () => {
        app = await (0, app_1.createApp)();
        authToken = (0, jwt_utils_1.generateToken)({
            userId: 'user-123',
            email: 'customer@test.com',
            role: 'customer',
        });
        adminToken = (0, jwt_utils_1.generateToken)({
            userId: 'admin-123',
            email: 'admin@test.com',
            role: 'admin',
        });
    });
    const graphql = (query, variables, token) => {
        const req = (0, supertest_1.default)(app).post('/graphql').send({ query, variables });
        if (token) {
            req.set('Authorization', `Bearer ${token}`);
        }
        return req;
    };
    describe('Product Queries', () => {
        it('should query all products', async () => {
            const query = `
        query {
          products(page: 1, limit: 10) {
            items {
              id
              name
              price
              inventory
            }
            total
            page
          }
        }
      `;
            const response = await graphql(query).expect(200);
            expect(response.body.data.products).toHaveProperty('items');
            expect(Array.isArray(response.body.data.products.items)).toBe(true);
            expect(response.body.data.products).toHaveProperty('total');
        });
        it('should query single product by ID', async () => {
            const query = `
        query GetProduct($id: ID!) {
          product(id: $id) {
            id
            name
            description
            price
            inventory
            rating
            reviewCount
          }
        }
      `;
            const response = await graphql(query, { id: 'prod-123' }).expect(200);
            expect(response.body.data.product.id).toBe('prod-123');
            expect(response.body.data.product).toHaveProperty('name');
            expect(response.body.data.product).toHaveProperty('price');
        });
        it('should search products', async () => {
            const query = `
        query SearchProducts($searchTerm: String!) {
          searchProducts(query: $searchTerm, limit: 10) {
            id
            name
            price
          }
        }
      `;
            const response = await graphql(query, { searchTerm: 'laptop' }).expect(200);
            expect(Array.isArray(response.body.data.searchProducts)).toBe(true);
        });
        it('should filter products by category', async () => {
            const query = `
        query ProductsByCategory($category: String!) {
          products(category: $category) {
            items {
              id
              name
              category
            }
          }
        }
      `;
            const response = await graphql(query, { category: 'electronics' }).expect(200);
            expect(response.body.data.products.items.every((p) => p.category === 'electronics')).toBe(true);
        });
        it('should get top selling products', async () => {
            const query = `
        query {
          topSellingProducts(limit: 5) {
            id
            name
            soldCount
          }
        }
      `;
            const response = await graphql(query).expect(200);
            expect(Array.isArray(response.body.data.topSellingProducts)).toBe(true);
            expect(response.body.data.topSellingProducts.length).toBeLessThanOrEqual(5);
        });
    });
    describe('User Queries', () => {
        it('should query current user profile', async () => {
            const query = `
        query {
          me {
            id
            email
            firstName
            lastName
            role
          }
        }
      `;
            const response = await graphql(query, {}, authToken).expect(200);
            expect(response.body.data.me).toHaveProperty('id');
            expect(response.body.data.me).toHaveProperty('email');
            expect(response.body.data.me).not.toHaveProperty('password');
        });
        it('should require authentication for user profile', async () => {
            const query = `
        query {
          me {
            id
            email
          }
        }
      `;
            const response = await graphql(query).expect(200);
            expect(response.body.errors).toBeDefined();
            expect(response.body.errors[0].message).toContain('authentication');
        });
        it('should query all users (admin only)', async () => {
            const query = `
        query {
          users(page: 1, limit: 10) {
            items {
              id
              email
              role
              status
            }
            total
          }
        }
      `;
            const response = await graphql(query, {}, adminToken).expect(200);
            expect(response.body.data.users).toHaveProperty('items');
            expect(Array.isArray(response.body.data.users.items)).toBe(true);
        });
    });
    describe('Order Queries', () => {
        it('should query user orders', async () => {
            const query = `
        query {
          myOrders(page: 1, limit: 10) {
            items {
              id
              orderNumber
              status
              total
              createdAt
            }
            total
          }
        }
      `;
            const response = await graphql(query, {}, authToken).expect(200);
            expect(response.body.data.myOrders).toHaveProperty('items');
            expect(Array.isArray(response.body.data.myOrders.items)).toBe(true);
        });
        it('should query order details', async () => {
            const query = `
        query GetOrder($id: ID!) {
          order(id: $id) {
            id
            orderNumber
            status
            items {
              productId
              productName
              quantity
              unitPrice
              subtotal
            }
            subtotal
            taxAmount
            shippingCost
            total
          }
        }
      `;
            const response = await graphql(query, { id: 'order-123' }, authToken).expect(200);
            expect(response.body.data.order.id).toBe('order-123');
            expect(response.body.data.order).toHaveProperty('items');
            expect(response.body.data.order).toHaveProperty('total');
        });
    });
    describe('Product Mutations', () => {
        it('should create product (admin only)', async () => {
            const mutation = `
        mutation CreateProduct($input: CreateProductInput!) {
          createProduct(input: $input) {
            id
            name
            sku
            price
            inventory
          }
        }
      `;
            const input = {
                name: 'New GraphQL Product',
                description: 'Created via GraphQL',
                sku: 'GQL-001',
                price: 99.99,
                inventory: 50,
            };
            const response = await graphql(mutation, { input }, adminToken).expect(200);
            expect(response.body.data.createProduct.name).toBe('New GraphQL Product');
            expect(response.body.data.createProduct.sku).toBe('GQL-001');
        });
        it('should update product (admin only)', async () => {
            const mutation = `
        mutation UpdateProduct($id: ID!, $input: UpdateProductInput!) {
          updateProduct(id: $id, input: $input) {
            id
            name
            price
          }
        }
      `;
            const input = {
                name: 'Updated Name',
                price: 149.99,
            };
            const response = await graphql(mutation, { id: 'prod-update', input }, adminToken).expect(200);
            expect(response.body.data.updateProduct.name).toBe('Updated Name');
            expect(response.body.data.updateProduct.price).toBe(149.99);
        });
        it('should delete product (admin only)', async () => {
            const mutation = `
        mutation DeleteProduct($id: ID!) {
          deleteProduct(id: $id) {
            success
            message
          }
        }
      `;
            const response = await graphql(mutation, { id: 'prod-delete' }, adminToken).expect(200);
            expect(response.body.data.deleteProduct.success).toBe(true);
        });
        it('should reject mutations without admin role', async () => {
            const mutation = `
        mutation CreateProduct($input: CreateProductInput!) {
          createProduct(input: $input) {
            id
            name
          }
        }
      `;
            const input = {
                name: 'Unauthorized Product',
                sku: 'UNAUTH-001',
                price: 50.00,
            };
            const response = await graphql(mutation, { input }, authToken).expect(200);
            expect(response.body.errors).toBeDefined();
            expect(response.body.errors[0].message).toContain('authorized');
        });
    });
    describe('User Mutations', () => {
        it('should register new user', async () => {
            const mutation = `
        mutation Register($input: RegisterInput!) {
          register(input: $input) {
            user {
              id
              email
              firstName
              lastName
            }
            token
          }
        }
      `;
            const input = {
                email: 'graphql@test.com',
                password: 'GraphQLPass123!',
                firstName: 'GraphQL',
                lastName: 'User',
            };
            const response = await graphql(mutation, { input }).expect(200);
            expect(response.body.data.register.user.email).toBe('graphql@test.com');
            expect(response.body.data.register.token).toBeDefined();
        });
        it('should login user', async () => {
            const mutation = `
        mutation Login($email: String!, $password: String!) {
          login(email: $email, password: $password) {
            user {
              id
              email
            }
            token
          }
        }
      `;
            const response = await graphql(mutation, {
                email: 'existing@test.com',
                password: 'CorrectPass123!',
            }).expect(200);
            expect(response.body.data.login.user.email).toBe('existing@test.com');
            expect(response.body.data.login.token).toBeDefined();
        });
        it('should update user profile', async () => {
            const mutation = `
        mutation UpdateProfile($input: UpdateProfileInput!) {
          updateProfile(input: $input) {
            id
            firstName
            lastName
            phoneNumber
          }
        }
      `;
            const input = {
                firstName: 'Updated',
                lastName: 'GraphQL',
                phoneNumber: '+15555555555',
            };
            const response = await graphql(mutation, { input }, authToken).expect(200);
            expect(response.body.data.updateProfile.firstName).toBe('Updated');
        });
    });
    describe('Order Mutations', () => {
        it('should create order', async () => {
            const mutation = `
        mutation CreateOrder($input: CreateOrderInput!) {
          createOrder(input: $input) {
            id
            orderNumber
            status
            total
          }
        }
      `;
            const input = {
                items: [
                    {
                        productId: 'prod-456',
                        quantity: 2,
                    },
                ],
                shippingAddress: {
                    street: '123 Main St',
                    city: 'New York',
                    state: 'NY',
                    zip: '10001',
                    country: 'US',
                },
            };
            const response = await graphql(mutation, { input }, authToken).expect(200);
            expect(response.body.data.createOrder).toHaveProperty('id');
            expect(response.body.data.createOrder).toHaveProperty('orderNumber');
            expect(response.body.data.createOrder.status).toBe('pending');
        });
        it('should cancel order', async () => {
            const mutation = `
        mutation CancelOrder($id: ID!, $reason: String!) {
          cancelOrder(id: $id, reason: $reason) {
            id
            status
            cancellationReason
          }
        }
      `;
            const response = await graphql(mutation, {
                id: 'order-cancel-gql',
                reason: 'Changed mind',
            }, authToken).expect(200);
            expect(response.body.data.cancelOrder.status).toBe('cancelled');
        });
    });
    describe('Cart Mutations', () => {
        it('should add item to cart', async () => {
            const mutation = `
        mutation AddToCart($productId: ID!, $quantity: Int!) {
          addToCart(productId: $productId, quantity: $quantity) {
            items {
              productId
              quantity
            }
            total
          }
        }
      `;
            const response = await graphql(mutation, {
                productId: 'prod-789',
                quantity: 3,
            }, authToken).expect(200);
            expect(response.body.data.addToCart.items).toContainEqual(expect.objectContaining({
                productId: 'prod-789',
                quantity: 3,
            }));
        });
        it('should remove item from cart', async () => {
            const mutation = `
        mutation RemoveFromCart($productId: ID!) {
          removeFromCart(productId: $productId) {
            items {
              productId
            }
            total
          }
        }
      `;
            const response = await graphql(mutation, { productId: 'prod-remove' }, authToken).expect(200);
            expect(response.body.data.removeFromCart.items.find((i) => i.productId === 'prod-remove')).toBeUndefined();
        });
        it('should clear cart', async () => {
            const mutation = `
        mutation {
          clearCart {
            items
            total
          }
        }
      `;
            const response = await graphql(mutation, {}, authToken).expect(200);
            expect(response.body.data.clearCart.items).toEqual([]);
            expect(response.body.data.clearCart.total).toBe(0);
        });
    });
    describe('Nested Queries', () => {
        it('should query order with nested product details', async () => {
            const query = `
        query GetOrder($id: ID!) {
          order(id: $id) {
            id
            items {
              product {
                id
                name
                price
                inventory
              }
              quantity
              subtotal
            }
          }
        }
      `;
            const response = await graphql(query, { id: 'order-nested' }, authToken).expect(200);
            expect(response.body.data.order.items[0]).toHaveProperty('product');
            expect(response.body.data.order.items[0].product).toHaveProperty('name');
        });
        it('should query user with orders and order items', async () => {
            const query = `
        query {
          me {
            id
            email
            orders(limit: 5) {
              id
              orderNumber
              items {
                productName
                quantity
              }
              total
            }
          }
        }
      `;
            const response = await graphql(query, {}, authToken).expect(200);
            expect(response.body.data.me).toHaveProperty('orders');
            expect(response.body.data.me.orders[0]).toHaveProperty('items');
        });
    });
    describe('Error Handling', () => {
        it('should return validation errors', async () => {
            const mutation = `
        mutation Register($input: RegisterInput!) {
          register(input: $input) {
            user {
              email
            }
          }
        }
      `;
            const input = {
                email: 'invalid-email',
                password: 'weak',
                firstName: 'Test',
                lastName: 'User',
            };
            const response = await graphql(mutation, { input }).expect(200);
            expect(response.body.errors).toBeDefined();
        });
        it('should handle not found errors', async () => {
            const query = `
        query GetProduct($id: ID!) {
          product(id: $id) {
            id
            name
          }
        }
      `;
            const response = await graphql(query, { id: 'nonexistent' }).expect(200);
            expect(response.body.errors).toBeDefined();
            expect(response.body.errors[0].message).toContain('not found');
        });
        it('should handle unauthorized errors', async () => {
            const query = `
        query {
          users {
            items {
              email
            }
          }
        }
      `;
            const response = await graphql(query, {}, authToken).expect(200);
            expect(response.body.errors).toBeDefined();
            expect(response.body.errors[0].message).toContain('authorized');
        });
    });
    describe('Pagination and Filtering', () => {
        it('should paginate results', async () => {
            const query = `
        query GetProducts($page: Int!, $limit: Int!) {
          products(page: $page, limit: $limit) {
            items {
              id
            }
            page
            limit
            total
            totalPages
          }
        }
      `;
            const response = await graphql(query, { page: 2, limit: 5 }).expect(200);
            expect(response.body.data.products.page).toBe(2);
            expect(response.body.data.products.limit).toBe(5);
            expect(response.body.data.products.items.length).toBeLessThanOrEqual(5);
        });
        it('should filter and sort results', async () => {
            const query = `
        query GetProducts($filter: ProductFilter, $sort: ProductSort) {
          products(filter: $filter, sort: $sort) {
            items {
              id
              price
              category
            }
          }
        }
      `;
            const response = await graphql(query, {
                filter: {
                    category: 'electronics',
                    minPrice: 50,
                    maxPrice: 200,
                },
                sort: {
                    field: 'price',
                    order: 'DESC',
                },
            }).expect(200);
            expect(response.body.data.products.items.every((p) => p.category === 'electronics' && p.price >= 50 && p.price <= 200)).toBe(true);
        });
    });
    describe('Analytics Queries', () => {
        it('should query dashboard metrics (admin)', async () => {
            const query = `
        query {
          analytics {
            totalRevenue
            totalOrders
            totalUsers
            totalProducts
            averageOrderValue
          }
        }
      `;
            const response = await graphql(query, {}, adminToken).expect(200);
            expect(response.body.data.analytics).toHaveProperty('totalRevenue');
            expect(response.body.data.analytics).toHaveProperty('totalOrders');
        });
        it('should query sales metrics', async () => {
            const query = `
        query GetSalesMetrics($period: Period!) {
          salesMetrics(period: $period) {
            period
            revenue
            orderCount
            averageOrderValue
          }
        }
      `;
            const response = await graphql(query, { period: 'month' }, adminToken).expect(200);
            expect(Array.isArray(response.body.data.salesMetrics)).toBe(true);
        });
    });
    describe('Batch Operations', () => {
        it('should execute multiple queries in single request', async () => {
            const query = `
        query {
          product1: product(id: "prod-1") {
            id
            name
          }
          product2: product(id: "prod-2") {
            id
            name
          }
          topSelling: topSellingProducts(limit: 5) {
            id
            name
          }
        }
      `;
            const response = await graphql(query).expect(200);
            expect(response.body.data).toHaveProperty('product1');
            expect(response.body.data).toHaveProperty('product2');
            expect(response.body.data).toHaveProperty('topSelling');
        });
    });
    describe('Field-Level Authorization', () => {
        it('should hide sensitive fields from unauthorized users', async () => {
            const query = `
        query GetProduct($id: ID!) {
          product(id: $id) {
            id
            name
            cost
            profitMargin
          }
        }
      `;
            const response = await graphql(query, { id: 'prod-123' }, authToken).expect(200);
            // Customer should not see cost and profitMargin
            expect(response.body.errors).toBeDefined();
            expect(response.body.errors[0].message).toContain('authorized');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXEFkYXB0aXZlX1Rlc3RpbmdcXHRlc3RzXFxlMmVcXGdyYXBocWxcXGdyYXBocWwtYXBpLmUyZS50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7OztHQUlHOzs7OztBQUVILDBEQUFnQztBQUVoQywwQ0FBNkM7QUFDN0MsZ0VBQWlFO0FBRWpFLFFBQVEsQ0FBQyx1QkFBdUIsRUFBRSxHQUFHLEVBQUU7SUFDckMsSUFBSSxHQUFZLENBQUM7SUFDakIsSUFBSSxTQUFpQixDQUFDO0lBQ3RCLElBQUksVUFBa0IsQ0FBQztJQUV2QixTQUFTLENBQUMsS0FBSyxJQUFJLEVBQUU7UUFDbkIsR0FBRyxHQUFHLE1BQU0sSUFBQSxlQUFTLEdBQUUsQ0FBQztRQUV4QixTQUFTLEdBQUcsSUFBQSx5QkFBYSxFQUFDO1lBQ3hCLE1BQU0sRUFBRSxVQUFVO1lBQ2xCLEtBQUssRUFBRSxtQkFBbUI7WUFDMUIsSUFBSSxFQUFFLFVBQVU7U0FDakIsQ0FBQyxDQUFDO1FBRUgsVUFBVSxHQUFHLElBQUEseUJBQWEsRUFBQztZQUN6QixNQUFNLEVBQUUsV0FBVztZQUNuQixLQUFLLEVBQUUsZ0JBQWdCO1lBQ3ZCLElBQUksRUFBRSxPQUFPO1NBQ2QsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxNQUFNLE9BQU8sR0FBRyxDQUFDLEtBQWEsRUFBRSxTQUFlLEVBQUUsS0FBYyxFQUFFLEVBQUU7UUFDakUsTUFBTSxHQUFHLEdBQUcsSUFBQSxtQkFBTyxFQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQztRQUVyRSxJQUFJLEtBQUssRUFBRSxDQUFDO1lBQ1YsR0FBRyxDQUFDLEdBQUcsQ0FBQyxlQUFlLEVBQUUsVUFBVSxLQUFLLEVBQUUsQ0FBQyxDQUFDO1FBQzlDLENBQUM7UUFFRCxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUMsQ0FBQztJQUVGLFFBQVEsQ0FBQyxpQkFBaUIs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SCxRQUFRLENBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFO1FBQ3pDLEVBQUUsQ0FBQyxzREFBc0QsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNwRSxNQUFNLEtBQUssR0FBRzs7Ozs7Ozs7O09BU2IsQ0FBQztZQUVGLE1BQU0sUUFBUSxHQUFHLE1BQU0sT0FBTyxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRSxVQUFVLEVBQUUsRUFBRSxTQUFTLENBQUMsQ0FBQyxNQUFNLENBQ3pFLEdBQUcsQ0FDSixDQUFDO1lBRUYsZ0RBQWdEO1lBQ2hELE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQzNDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDbEUsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxBZGFwdGl2ZV9UZXN0aW5nXFx0ZXN0c1xcZTJlXFxncmFwaHFsXFxncmFwaHFsLWFwaS5lMmUudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEUyRSBUZXN0czogR3JhcGhRTCBBUElcbiAqXG4gKiBUZXN0aW5nIEdyYXBoUUwgcXVlcmllcywgbXV0YXRpb25zLCBhbmQgc3Vic2NyaXB0aW9uc1xuICovXG5cbmltcG9ydCByZXF1ZXN0IGZyb20gJ3N1cGVydGVzdCc7XG5pbXBvcnQgeyBFeHByZXNzIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgeyBjcmVhdGVBcHAgfSBmcm9tICcuLi8uLi8uLi9zcmMvYXBwJztcbmltcG9ydCB7IGdlbmVyYXRlVG9rZW4gfSBmcm9tICcuLi8uLi8uLi9zcmMvbGlicy9hdXRoL2p3dC51dGlscyc7XG5cbmRlc2NyaWJlKCdHcmFwaFFMIEFQSSBFMkUgVGVzdHMnLCAoKSA9PiB7XG4gIGxldCBhcHA6IEV4cHJlc3M7XG4gIGxldCBhdXRoVG9rZW46IHN0cmluZztcbiAgbGV0IGFkbWluVG9rZW46IHN0cmluZztcblxuICBiZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xuICAgIGFwcCA9IGF3YWl0IGNyZWF0ZUFwcCgpO1xuXG4gICAgYXV0aFRva2VuID0gZ2VuZXJhdGVUb2tlbih7XG4gICAgICB1c2VySWQ6ICd1c2VyLTEyMycsXG4gICAgICBlbWFpbDogJ2N1c3RvbWVyQHRlc3QuY29tJyxcbiAgICAgIHJvbGU6ICdjdXN0b21lcicsXG4gICAgfSk7XG5cbiAgICBhZG1pblRva2VuID0gZ2VuZXJhdGVUb2tlbih7XG4gICAgICB1c2VySWQ6ICdhZG1pbi0xMjMnLFxuICAgICAgZW1haWw6ICdhZG1pbkB0ZXN0LmNvbScsXG4gICAgICByb2xlOiAnYWRtaW4nLFxuICAgIH0pO1xuICB9KTtcblxuICBjb25zdCBncmFwaHFsID0gKHF1ZXJ5OiBzdHJpbmcsIHZhcmlhYmxlcz86IGFueSwgdG9rZW4/OiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCByZXEgPSByZXF1ZXN0KGFwcCkucG9zdCgnL2dyYXBocWwnKS5zZW5kKHsgcXVlcnksIHZhcmlhYmxlcyB9KTtcblxuICAgIGlmICh0b2tlbikge1xuICAgICAgcmVxLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHt0b2tlbn1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVxO1xuICB9O1xuXG4gIGRlc2NyaWJlKCdQcm9kdWN0IFF1ZXJpZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBxdWVyeSBhbGwgcHJvZHVjdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBxdWVyeSA9IGBcbiAgICAgICAgcXVlcnkge1xuICAgICAgICAgIHByb2R1Y3RzKHBhZ2U6IDEsIGxpbWl0OiAxMCkge1xuICAgICAgICAgICAgaXRlbXMge1xuICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICBuYW1lXG4gICAgICAgICAgICAgIHByaWNlXG4gICAgICAgICAgICAgIGludmVudG9yeVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG90YWxcbiAgICAgICAgICAgIHBhZ2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ3JhcGhxbChxdWVyeSkuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEucHJvZHVjdHMpLnRvSGF2ZVByb3BlcnR5KCdpdGVtcycpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzcG9uc2UuYm9keS5kYXRhLnByb2R1Y3RzLml0ZW1zKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEucHJvZHVjdHMpLnRvSGF2ZVByb3BlcnR5KCd0b3RhbCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBxdWVyeSBzaW5nbGUgcHJvZHVjdCBieSBJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gYFxuICAgICAgICBxdWVyeSBHZXRQcm9kdWN0KCRpZDogSUQhKSB7XG4gICAgICAgICAgcHJvZHVjdChpZDogJGlkKSB7XG4gICAgICAgICAgICBpZFxuICAgICAgICAgICAgbmFtZVxuICAgICAgICAgICAgZGVzY3JpcHRpb25cbiAgICAgICAgICAgIHByaWNlXG4gICAgICAgICAgICBpbnZlbnRvcnlcbiAgICAgICAgICAgIHJhdGluZ1xuICAgICAgICAgICAgcmV2aWV3Q291bnRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ3JhcGhxbChxdWVyeSwgeyBpZDogJ3Byb2QtMTIzJyB9KS5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5wcm9kdWN0LmlkKS50b0JlKCdwcm9kLTEyMycpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5wcm9kdWN0KS50b0hhdmVQcm9wZXJ0eSgnbmFtZScpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5wcm9kdWN0KS50b0hhdmVQcm9wZXJ0eSgncHJpY2UnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2VhcmNoIHByb2R1Y3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICAgIHF1ZXJ5IFNlYXJjaFByb2R1Y3RzKCRzZWFyY2hUZXJtOiBTdHJpbmchKSB7XG4gICAgICAgICAgc2VhcmNoUHJvZHVjdHMocXVlcnk6ICRzZWFyY2hUZXJtLCBsaW1pdDogMTApIHtcbiAgICAgICAgICAgIGlkXG4gICAgICAgICAgICBuYW1lXG4gICAgICAgICAgICBwcmljZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYDtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBncmFwaHFsKHF1ZXJ5LCB7IHNlYXJjaFRlcm06ICdsYXB0b3AnIH0pLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXNwb25zZS5ib2R5LmRhdGEuc2VhcmNoUHJvZHVjdHMpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmaWx0ZXIgcHJvZHVjdHMgYnkgY2F0ZWdvcnknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBxdWVyeSA9IGBcbiAgICAgICAgcXVlcnkgUHJvZHVjdHNCeUNhdGVnb3J5KCRjYXRlZ29yeTogU3RyaW5nISkge1xuICAgICAgICAgIHByb2R1Y3RzKGNhdGVnb3J5OiAkY2F0ZWdvcnkpIHtcbiAgICAgICAgICAgIGl0ZW1zIHtcbiAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgbmFtZVxuICAgICAgICAgICAgICBjYXRlZ29yeVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYDtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBncmFwaHFsKHF1ZXJ5LCB7IGNhdGVnb3J5OiAnZWxlY3Ryb25pY3MnIH0pLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QoXG4gICAgICAgIHJlc3BvbnNlLmJvZHkuZGF0YS5wcm9kdWN0cy5pdGVtcy5ldmVyeShcbiAgICAgICAgICAocDogYW55KSA9PiBwLmNhdGVnb3J5ID09PSAnZWxlY3Ryb25pY3MnXG4gICAgICAgIClcbiAgICAgICkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2V0IHRvcCBzZWxsaW5nIHByb2R1Y3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICAgIHF1ZXJ5IHtcbiAgICAgICAgICB0b3BTZWxsaW5nUHJvZHVjdHMobGltaXQ6IDUpIHtcbiAgICAgICAgICAgIGlkXG4gICAgICAgICAgICBuYW1lXG4gICAgICAgICAgICBzb2xkQ291bnRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ3JhcGhxbChxdWVyeSkuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3BvbnNlLmJvZHkuZGF0YS50b3BTZWxsaW5nUHJvZHVjdHMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS50b3BTZWxsaW5nUHJvZHVjdHMubGVuZ3RoKS50b0JlTGVzc1RoYW5PckVxdWFsKDUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVXNlciBRdWVyaWVzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcXVlcnkgY3VycmVudCB1c2VyIHByb2ZpbGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBxdWVyeSA9IGBcbiAgICAgICAgcXVlcnkge1xuICAgICAgICAgIG1lIHtcbiAgICAgICAgICAgIGlkXG4gICAgICAgICAgICBlbWFpbFxuICAgICAgICAgICAgZmlyc3ROYW1lXG4gICAgICAgICAgICBsYXN0TmFtZVxuICAgICAgICAgICAgcm9sZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYDtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBncmFwaHFsKHF1ZXJ5LCB7fSwgYXV0aFRva2VuKS5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5tZSkudG9IYXZlUHJvcGVydHkoJ2lkJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLm1lKS50b0hhdmVQcm9wZXJ0eSgnZW1haWwnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEubWUpLm5vdC50b0hhdmVQcm9wZXJ0eSgncGFzc3dvcmQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVxdWlyZSBhdXRoZW50aWNhdGlvbiBmb3IgdXNlciBwcm9maWxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICAgIHF1ZXJ5IHtcbiAgICAgICAgICBtZSB7XG4gICAgICAgICAgICBpZFxuICAgICAgICAgICAgZW1haWxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ3JhcGhxbChxdWVyeSkuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9ycykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ2F1dGhlbnRpY2F0aW9uJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHF1ZXJ5IGFsbCB1c2VycyAoYWRtaW4gb25seSknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBxdWVyeSA9IGBcbiAgICAgICAgcXVlcnkge1xuICAgICAgICAgIHVzZXJzKHBhZ2U6IDEsIGxpbWl0OiAxMCkge1xuICAgICAgICAgICAgaXRlbXMge1xuICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICBlbWFpbFxuICAgICAgICAgICAgICByb2xlXG4gICAgICAgICAgICAgIHN0YXR1c1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG90YWxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ3JhcGhxbChxdWVyeSwge30sIGFkbWluVG9rZW4pLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLnVzZXJzKS50b0hhdmVQcm9wZXJ0eSgnaXRlbXMnKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3BvbnNlLmJvZHkuZGF0YS51c2Vycy5pdGVtcykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdPcmRlciBRdWVyaWVzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcXVlcnkgdXNlciBvcmRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBxdWVyeSA9IGBcbiAgICAgICAgcXVlcnkge1xuICAgICAgICAgIG15T3JkZXJzKHBhZ2U6IDEsIGxpbWl0OiAxMCkge1xuICAgICAgICAgICAgaXRlbXMge1xuICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICBvcmRlck51bWJlclxuICAgICAgICAgICAgICBzdGF0dXNcbiAgICAgICAgICAgICAgdG90YWxcbiAgICAgICAgICAgICAgY3JlYXRlZEF0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b3RhbFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYDtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBncmFwaHFsKHF1ZXJ5LCB7fSwgYXV0aFRva2VuKS5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5teU9yZGVycykudG9IYXZlUHJvcGVydHkoJ2l0ZW1zJyk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXNwb25zZS5ib2R5LmRhdGEubXlPcmRlcnMuaXRlbXMpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBxdWVyeSBvcmRlciBkZXRhaWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICAgIHF1ZXJ5IEdldE9yZGVyKCRpZDogSUQhKSB7XG4gICAgICAgICAgb3JkZXIoaWQ6ICRpZCkge1xuICAgICAgICAgICAgaWRcbiAgICAgICAgICAgIG9yZGVyTnVtYmVyXG4gICAgICAgICAgICBzdGF0dXNcbiAgICAgICAgICAgIGl0ZW1zIHtcbiAgICAgICAgICAgICAgcHJvZHVjdElkXG4gICAgICAgICAgICAgIHByb2R1Y3ROYW1lXG4gICAgICAgICAgICAgIHF1YW50aXR5XG4gICAgICAgICAgICAgIHVuaXRQcmljZVxuICAgICAgICAgICAgICBzdWJ0b3RhbFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3VidG90YWxcbiAgICAgICAgICAgIHRheEFtb3VudFxuICAgICAgICAgICAgc2hpcHBpbmdDb3N0XG4gICAgICAgICAgICB0b3RhbFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYDtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBncmFwaHFsKHF1ZXJ5LCB7IGlkOiAnb3JkZXItMTIzJyB9LCBhdXRoVG9rZW4pLmV4cGVjdChcbiAgICAgICAgMjAwXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLm9yZGVyLmlkKS50b0JlKCdvcmRlci0xMjMnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEub3JkZXIpLnRvSGF2ZVByb3BlcnR5KCdpdGVtcycpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5vcmRlcikudG9IYXZlUHJvcGVydHkoJ3RvdGFsJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQcm9kdWN0IE11dGF0aW9ucycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBwcm9kdWN0IChhZG1pbiBvbmx5KScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG11dGF0aW9uID0gYFxuICAgICAgICBtdXRhdGlvbiBDcmVhdGVQcm9kdWN0KCRpbnB1dDogQ3JlYXRlUHJvZHVjdElucHV0ISkge1xuICAgICAgICAgIGNyZWF0ZVByb2R1Y3QoaW5wdXQ6ICRpbnB1dCkge1xuICAgICAgICAgICAgaWRcbiAgICAgICAgICAgIG5hbWVcbiAgICAgICAgICAgIHNrdVxuICAgICAgICAgICAgcHJpY2VcbiAgICAgICAgICAgIGludmVudG9yeVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYDtcblxuICAgICAgY29uc3QgaW5wdXQgPSB7XG4gICAgICAgIG5hbWU6ICdOZXcgR3JhcGhRTCBQcm9kdWN0JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdDcmVhdGVkIHZpYSBHcmFwaFFMJyxcbiAgICAgICAgc2t1OiAnR1FMLTAwMScsXG4gICAgICAgIHByaWNlOiA5OS45OSxcbiAgICAgICAgaW52ZW50b3J5OiA1MCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ3JhcGhxbChtdXRhdGlvbiwgeyBpbnB1dCB9LCBhZG1pblRva2VuKS5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5jcmVhdGVQcm9kdWN0Lm5hbWUpLnRvQmUoJ05ldyBHcmFwaFFMIFByb2R1Y3QnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEuY3JlYXRlUHJvZHVjdC5za3UpLnRvQmUoJ0dRTC0wMDEnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXBkYXRlIHByb2R1Y3QgKGFkbWluIG9ubHkpJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbXV0YXRpb24gPSBgXG4gICAgICAgIG11dGF0aW9uIFVwZGF0ZVByb2R1Y3QoJGlkOiBJRCEsICRpbnB1dDogVXBkYXRlUHJvZHVjdElucHV0ISkge1xuICAgICAgICAgIHVwZGF0ZVByb2R1Y3QoaWQ6ICRpZCwgaW5wdXQ6ICRpbnB1dCkge1xuICAgICAgICAgICAgaWRcbiAgICAgICAgICAgIG5hbWVcbiAgICAgICAgICAgIHByaWNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBgO1xuXG4gICAgICBjb25zdCBpbnB1dCA9IHtcbiAgICAgICAgbmFtZTogJ1VwZGF0ZWQgTmFtZScsXG4gICAgICAgIHByaWNlOiAxNDkuOTksXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdyYXBocWwoXG4gICAgICAgIG11dGF0aW9uLFxuICAgICAgICB7IGlkOiAncHJvZC11cGRhdGUnLCBpbnB1dCB9LFxuICAgICAgICBhZG1pblRva2VuXG4gICAgICApLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLnVwZGF0ZVByb2R1Y3QubmFtZSkudG9CZSgnVXBkYXRlZCBOYW1lJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLnVwZGF0ZVByb2R1Y3QucHJpY2UpLnRvQmUoMTQ5Ljk5KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGVsZXRlIHByb2R1Y3QgKGFkbWluIG9ubHkpJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbXV0YXRpb24gPSBgXG4gICAgICAgIG11dGF0aW9uIERlbGV0ZVByb2R1Y3QoJGlkOiBJRCEpIHtcbiAgICAgICAgICBkZWxldGVQcm9kdWN0KGlkOiAkaWQpIHtcbiAgICAgICAgICAgIHN1Y2Nlc3NcbiAgICAgICAgICAgIG1lc3NhZ2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ3JhcGhxbChcbiAgICAgICAgbXV0YXRpb24sXG4gICAgICAgIHsgaWQ6ICdwcm9kLWRlbGV0ZScgfSxcbiAgICAgICAgYWRtaW5Ub2tlblxuICAgICAgKS5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5kZWxldGVQcm9kdWN0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlamVjdCBtdXRhdGlvbnMgd2l0aG91dCBhZG1pbiByb2xlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbXV0YXRpb24gPSBgXG4gICAgICAgIG11dGF0aW9uIENyZWF0ZVByb2R1Y3QoJGlucHV0OiBDcmVhdGVQcm9kdWN0SW5wdXQhKSB7XG4gICAgICAgICAgY3JlYXRlUHJvZHVjdChpbnB1dDogJGlucHV0KSB7XG4gICAgICAgICAgICBpZFxuICAgICAgICAgICAgbmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYDtcblxuICAgICAgY29uc3QgaW5wdXQgPSB7XG4gICAgICAgIG5hbWU6ICdVbmF1dGhvcml6ZWQgUHJvZHVjdCcsXG4gICAgICAgIHNrdTogJ1VOQVVUSC0wMDEnLFxuICAgICAgICBwcmljZTogNTAuMDAsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdyYXBocWwobXV0YXRpb24sIHsgaW5wdXQgfSwgYXV0aFRva2VuKS5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3JzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3JzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbignYXV0aG9yaXplZCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVXNlciBNdXRhdGlvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZWdpc3RlciBuZXcgdXNlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG11dGF0aW9uID0gYFxuICAgICAgICBtdXRhdGlvbiBSZWdpc3RlcigkaW5wdXQ6IFJlZ2lzdGVySW5wdXQhKSB7XG4gICAgICAgICAgcmVnaXN0ZXIoaW5wdXQ6ICRpbnB1dCkge1xuICAgICAgICAgICAgdXNlciB7XG4gICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgIGVtYWlsXG4gICAgICAgICAgICAgIGZpcnN0TmFtZVxuICAgICAgICAgICAgICBsYXN0TmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG9rZW5cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IGlucHV0ID0ge1xuICAgICAgICBlbWFpbDogJ2dyYXBocWxAdGVzdC5jb20nLFxuICAgICAgICBwYXNzd29yZDogJ0dyYXBoUUxQYXNzMTIzIScsXG4gICAgICAgIGZpcnN0TmFtZTogJ0dyYXBoUUwnLFxuICAgICAgICBsYXN0TmFtZTogJ1VzZXInLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBncmFwaHFsKG11dGF0aW9uLCB7IGlucHV0IH0pLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLnJlZ2lzdGVyLnVzZXIuZW1haWwpLnRvQmUoJ2dyYXBocWxAdGVzdC5jb20nKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEucmVnaXN0ZXIudG9rZW4pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxvZ2luIHVzZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtdXRhdGlvbiA9IGBcbiAgICAgICAgbXV0YXRpb24gTG9naW4oJGVtYWlsOiBTdHJpbmchLCAkcGFzc3dvcmQ6IFN0cmluZyEpIHtcbiAgICAgICAgICBsb2dpbihlbWFpbDogJGVtYWlsLCBwYXNzd29yZDogJHBhc3N3b3JkKSB7XG4gICAgICAgICAgICB1c2VyIHtcbiAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgZW1haWxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRva2VuXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBgO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdyYXBocWwobXV0YXRpb24sIHtcbiAgICAgICAgZW1haWw6ICdleGlzdGluZ0B0ZXN0LmNvbScsXG4gICAgICAgIHBhc3N3b3JkOiAnQ29ycmVjdFBhc3MxMjMhJyxcbiAgICAgIH0pLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLmxvZ2luLnVzZXIuZW1haWwpLnRvQmUoJ2V4aXN0aW5nQHRlc3QuY29tJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLmxvZ2luLnRva2VuKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgdXNlciBwcm9maWxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbXV0YXRpb24gPSBgXG4gICAgICAgIG11dGF0aW9uIFVwZGF0ZVByb2ZpbGUoJGlucHV0OiBVcGRhdGVQcm9maWxlSW5wdXQhKSB7XG4gICAgICAgICAgdXBkYXRlUHJvZmlsZShpbnB1dDogJGlucHV0KSB7XG4gICAgICAgICAgICBpZFxuICAgICAgICAgICAgZmlyc3ROYW1lXG4gICAgICAgICAgICBsYXN0TmFtZVxuICAgICAgICAgICAgcGhvbmVOdW1iZXJcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IGlucHV0ID0ge1xuICAgICAgICBmaXJzdE5hbWU6ICdVcGRhdGVkJyxcbiAgICAgICAgbGFzdE5hbWU6ICdHcmFwaFFMJyxcbiAgICAgICAgcGhvbmVOdW1iZXI6ICcrMTU1NTU1NTU1NTUnLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBncmFwaHFsKG11dGF0aW9uLCB7IGlucHV0IH0sIGF1dGhUb2tlbikuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEudXBkYXRlUHJvZmlsZS5maXJzdE5hbWUpLnRvQmUoJ1VwZGF0ZWQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ09yZGVyIE11dGF0aW9ucycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBvcmRlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG11dGF0aW9uID0gYFxuICAgICAgICBtdXRhdGlvbiBDcmVhdGVPcmRlcigkaW5wdXQ6IENyZWF0ZU9yZGVySW5wdXQhKSB7XG4gICAgICAgICAgY3JlYXRlT3JkZXIoaW5wdXQ6ICRpbnB1dCkge1xuICAgICAgICAgICAgaWRcbiAgICAgICAgICAgIG9yZGVyTnVtYmVyXG4gICAgICAgICAgICBzdGF0dXNcbiAgICAgICAgICAgIHRvdGFsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBgO1xuXG4gICAgICBjb25zdCBpbnB1dCA9IHtcbiAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBwcm9kdWN0SWQ6ICdwcm9kLTQ1NicsXG4gICAgICAgICAgICBxdWFudGl0eTogMixcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBzaGlwcGluZ0FkZHJlc3M6IHtcbiAgICAgICAgICBzdHJlZXQ6ICcxMjMgTWFpbiBTdCcsXG4gICAgICAgICAgY2l0eTogJ05ldyBZb3JrJyxcbiAgICAgICAgICBzdGF0ZTogJ05ZJyxcbiAgICAgICAgICB6aXA6ICcxMDAwMScsXG4gICAgICAgICAgY291bnRyeTogJ1VTJyxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ3JhcGhxbChtdXRhdGlvbiwgeyBpbnB1dCB9LCBhdXRoVG9rZW4pLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLmNyZWF0ZU9yZGVyKS50b0hhdmVQcm9wZXJ0eSgnaWQnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEuY3JlYXRlT3JkZXIpLnRvSGF2ZVByb3BlcnR5KCdvcmRlck51bWJlcicpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5jcmVhdGVPcmRlci5zdGF0dXMpLnRvQmUoJ3BlbmRpbmcnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FuY2VsIG9yZGVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbXV0YXRpb24gPSBgXG4gICAgICAgIG11dGF0aW9uIENhbmNlbE9yZGVyKCRpZDogSUQhLCAkcmVhc29uOiBTdHJpbmchKSB7XG4gICAgICAgICAgY2FuY2VsT3JkZXIoaWQ6ICRpZCwgcmVhc29uOiAkcmVhc29uKSB7XG4gICAgICAgICAgICBpZFxuICAgICAgICAgICAgc3RhdHVzXG4gICAgICAgICAgICBjYW5jZWxsYXRpb25SZWFzb25cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ3JhcGhxbChcbiAgICAgICAgbXV0YXRpb24sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ29yZGVyLWNhbmNlbC1ncWwnLFxuICAgICAgICAgIHJlYXNvbjogJ0NoYW5nZWQgbWluZCcsXG4gICAgICAgIH0sXG4gICAgICAgIGF1dGhUb2tlblxuICAgICAgKS5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5jYW5jZWxPcmRlci5zdGF0dXMpLnRvQmUoJ2NhbmNlbGxlZCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ2FydCBNdXRhdGlvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhZGQgaXRlbSB0byBjYXJ0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbXV0YXRpb24gPSBgXG4gICAgICAgIG11dGF0aW9uIEFkZFRvQ2FydCgkcHJvZHVjdElkOiBJRCEsICRxdWFudGl0eTogSW50ISkge1xuICAgICAgICAgIGFkZFRvQ2FydChwcm9kdWN0SWQ6ICRwcm9kdWN0SWQsIHF1YW50aXR5OiAkcXVhbnRpdHkpIHtcbiAgICAgICAgICAgIGl0ZW1zIHtcbiAgICAgICAgICAgICAgcHJvZHVjdElkXG4gICAgICAgICAgICAgIHF1YW50aXR5XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b3RhbFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYDtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBncmFwaHFsKFxuICAgICAgICBtdXRhdGlvbixcbiAgICAgICAge1xuICAgICAgICAgIHByb2R1Y3RJZDogJ3Byb2QtNzg5JyxcbiAgICAgICAgICBxdWFudGl0eTogMyxcbiAgICAgICAgfSxcbiAgICAgICAgYXV0aFRva2VuXG4gICAgICApLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLmFkZFRvQ2FydC5pdGVtcykudG9Db250YWluRXF1YWwoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBwcm9kdWN0SWQ6ICdwcm9kLTc4OScsXG4gICAgICAgICAgcXVhbnRpdHk6IDMsXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZW1vdmUgaXRlbSBmcm9tIGNhcnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtdXRhdGlvbiA9IGBcbiAgICAgICAgbXV0YXRpb24gUmVtb3ZlRnJvbUNhcnQoJHByb2R1Y3RJZDogSUQhKSB7XG4gICAgICAgICAgcmVtb3ZlRnJvbUNhcnQocHJvZHVjdElkOiAkcHJvZHVjdElkKSB7XG4gICAgICAgICAgICBpdGVtcyB7XG4gICAgICAgICAgICAgIHByb2R1Y3RJZFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG90YWxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ3JhcGhxbChcbiAgICAgICAgbXV0YXRpb24sXG4gICAgICAgIHsgcHJvZHVjdElkOiAncHJvZC1yZW1vdmUnIH0sXG4gICAgICAgIGF1dGhUb2tlblxuICAgICAgKS5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KFxuICAgICAgICByZXNwb25zZS5ib2R5LmRhdGEucmVtb3ZlRnJvbUNhcnQuaXRlbXMuZmluZChcbiAgICAgICAgICAoaTogYW55KSA9PiBpLnByb2R1Y3RJZCA9PT0gJ3Byb2QtcmVtb3ZlJ1xuICAgICAgICApXG4gICAgICApLnRvQmVVbmRlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2xlYXIgY2FydCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG11dGF0aW9uID0gYFxuICAgICAgICBtdXRhdGlvbiB7XG4gICAgICAgICAgY2xlYXJDYXJ0IHtcbiAgICAgICAgICAgIGl0ZW1zXG4gICAgICAgICAgICB0b3RhbFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYDtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBncmFwaHFsKG11dGF0aW9uLCB7fSwgYXV0aFRva2VuKS5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5jbGVhckNhcnQuaXRlbXMpLnRvRXF1YWwoW10pO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5jbGVhckNhcnQudG90YWwpLnRvQmUoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdOZXN0ZWQgUXVlcmllcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHF1ZXJ5IG9yZGVyIHdpdGggbmVzdGVkIHByb2R1Y3QgZGV0YWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gYFxuICAgICAgICBxdWVyeSBHZXRPcmRlcigkaWQ6IElEISkge1xuICAgICAgICAgIG9yZGVyKGlkOiAkaWQpIHtcbiAgICAgICAgICAgIGlkXG4gICAgICAgICAgICBpdGVtcyB7XG4gICAgICAgICAgICAgIHByb2R1Y3Qge1xuICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgbmFtZVxuICAgICAgICAgICAgICAgIHByaWNlXG4gICAgICAgICAgICAgICAgaW52ZW50b3J5XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcXVhbnRpdHlcbiAgICAgICAgICAgICAgc3VidG90YWxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ3JhcGhxbChxdWVyeSwgeyBpZDogJ29yZGVyLW5lc3RlZCcgfSwgYXV0aFRva2VuKS5leHBlY3QoXG4gICAgICAgIDIwMFxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5vcmRlci5pdGVtc1swXSkudG9IYXZlUHJvcGVydHkoJ3Byb2R1Y3QnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEub3JkZXIuaXRlbXNbMF0ucHJvZHVjdCkudG9IYXZlUHJvcGVydHkoJ25hbWUnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcXVlcnkgdXNlciB3aXRoIG9yZGVycyBhbmQgb3JkZXIgaXRlbXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBxdWVyeSA9IGBcbiAgICAgICAgcXVlcnkge1xuICAgICAgICAgIG1lIHtcbiAgICAgICAgICAgIGlkXG4gICAgICAgICAgICBlbWFpbFxuICAgICAgICAgICAgb3JkZXJzKGxpbWl0OiA1KSB7XG4gICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgIG9yZGVyTnVtYmVyXG4gICAgICAgICAgICAgIGl0ZW1zIHtcbiAgICAgICAgICAgICAgICBwcm9kdWN0TmFtZVxuICAgICAgICAgICAgICAgIHF1YW50aXR5XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdG90YWxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ3JhcGhxbChxdWVyeSwge30sIGF1dGhUb2tlbikuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEubWUpLnRvSGF2ZVByb3BlcnR5KCdvcmRlcnMnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEubWUub3JkZXJzWzBdKS50b0hhdmVQcm9wZXJ0eSgnaXRlbXMnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHZhbGlkYXRpb24gZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbXV0YXRpb24gPSBgXG4gICAgICAgIG11dGF0aW9uIFJlZ2lzdGVyKCRpbnB1dDogUmVnaXN0ZXJJbnB1dCEpIHtcbiAgICAgICAgICByZWdpc3RlcihpbnB1dDogJGlucHV0KSB7XG4gICAgICAgICAgICB1c2VyIHtcbiAgICAgICAgICAgICAgZW1haWxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IGlucHV0ID0ge1xuICAgICAgICBlbWFpbDogJ2ludmFsaWQtZW1haWwnLFxuICAgICAgICBwYXNzd29yZDogJ3dlYWsnLFxuICAgICAgICBmaXJzdE5hbWU6ICdUZXN0JyxcbiAgICAgICAgbGFzdE5hbWU6ICdVc2VyJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ3JhcGhxbChtdXRhdGlvbiwgeyBpbnB1dCB9KS5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3JzKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbm90IGZvdW5kIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gYFxuICAgICAgICBxdWVyeSBHZXRQcm9kdWN0KCRpZDogSUQhKSB7XG4gICAgICAgICAgcHJvZHVjdChpZDogJGlkKSB7XG4gICAgICAgICAgICBpZFxuICAgICAgICAgICAgbmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYDtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBncmFwaHFsKHF1ZXJ5LCB7IGlkOiAnbm9uZXhpc3RlbnQnIH0pLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvcnMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvcnNbMF0ubWVzc2FnZSkudG9Db250YWluKCdub3QgZm91bmQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHVuYXV0aG9yaXplZCBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBxdWVyeSA9IGBcbiAgICAgICAgcXVlcnkge1xuICAgICAgICAgIHVzZXJzIHtcbiAgICAgICAgICAgIGl0ZW1zIHtcbiAgICAgICAgICAgICAgZW1haWxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ3JhcGhxbChxdWVyeSwge30sIGF1dGhUb2tlbikuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9ycykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ2F1dGhvcml6ZWQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BhZ2luYXRpb24gYW5kIEZpbHRlcmluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHBhZ2luYXRlIHJlc3VsdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBxdWVyeSA9IGBcbiAgICAgICAgcXVlcnkgR2V0UHJvZHVjdHMoJHBhZ2U6IEludCEsICRsaW1pdDogSW50ISkge1xuICAgICAgICAgIHByb2R1Y3RzKHBhZ2U6ICRwYWdlLCBsaW1pdDogJGxpbWl0KSB7XG4gICAgICAgICAgICBpdGVtcyB7XG4gICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYWdlXG4gICAgICAgICAgICBsaW1pdFxuICAgICAgICAgICAgdG90YWxcbiAgICAgICAgICAgIHRvdGFsUGFnZXNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ3JhcGhxbChxdWVyeSwgeyBwYWdlOiAyLCBsaW1pdDogNSB9KS5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5wcm9kdWN0cy5wYWdlKS50b0JlKDIpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5wcm9kdWN0cy5saW1pdCkudG9CZSg1KTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEucHJvZHVjdHMuaXRlbXMubGVuZ3RoKS50b0JlTGVzc1RoYW5PckVxdWFsKDUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmaWx0ZXIgYW5kIHNvcnQgcmVzdWx0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gYFxuICAgICAgICBxdWVyeSBHZXRQcm9kdWN0cygkZmlsdGVyOiBQcm9kdWN0RmlsdGVyLCAkc29ydDogUHJvZHVjdFNvcnQpIHtcbiAgICAgICAgICBwcm9kdWN0cyhmaWx0ZXI6ICRmaWx0ZXIsIHNvcnQ6ICRzb3J0KSB7XG4gICAgICAgICAgICBpdGVtcyB7XG4gICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgIHByaWNlXG4gICAgICAgICAgICAgIGNhdGVnb3J5XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBgO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdyYXBocWwocXVlcnksIHtcbiAgICAgICAgZmlsdGVyOiB7XG4gICAgICAgICAgY2F0ZWdvcnk6ICdlbGVjdHJvbmljcycsXG4gICAgICAgICAgbWluUHJpY2U6IDUwLFxuICAgICAgICAgIG1heFByaWNlOiAyMDAsXG4gICAgICAgIH0sXG4gICAgICAgIHNvcnQ6IHtcbiAgICAgICAgICBmaWVsZDogJ3ByaWNlJyxcbiAgICAgICAgICBvcmRlcjogJ0RFU0MnLFxuICAgICAgICB9LFxuICAgICAgfSkuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChcbiAgICAgICAgcmVzcG9uc2UuYm9keS5kYXRhLnByb2R1Y3RzLml0ZW1zLmV2ZXJ5KFxuICAgICAgICAgIChwOiBhbnkpID0+IHAuY2F0ZWdvcnkgPT09ICdlbGVjdHJvbmljcycgJiYgcC5wcmljZSA+PSA1MCAmJiBwLnByaWNlIDw9IDIwMFxuICAgICAgICApXG4gICAgICApLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBbmFseXRpY3MgUXVlcmllcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHF1ZXJ5IGRhc2hib2FyZCBtZXRyaWNzIChhZG1pbiknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBxdWVyeSA9IGBcbiAgICAgICAgcXVlcnkge1xuICAgICAgICAgIGFuYWx5dGljcyB7XG4gICAgICAgICAgICB0b3RhbFJldmVudWVcbiAgICAgICAgICAgIHRvdGFsT3JkZXJzXG4gICAgICAgICAgICB0b3RhbFVzZXJzXG4gICAgICAgICAgICB0b3RhbFByb2R1Y3RzXG4gICAgICAgICAgICBhdmVyYWdlT3JkZXJWYWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYDtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBncmFwaHFsKHF1ZXJ5LCB7fSwgYWRtaW5Ub2tlbikuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEuYW5hbHl0aWNzKS50b0hhdmVQcm9wZXJ0eSgndG90YWxSZXZlbnVlJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLmFuYWx5dGljcykudG9IYXZlUHJvcGVydHkoJ3RvdGFsT3JkZXJzJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHF1ZXJ5IHNhbGVzIG1ldHJpY3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBxdWVyeSA9IGBcbiAgICAgICAgcXVlcnkgR2V0U2FsZXNNZXRyaWNzKCRwZXJpb2Q6IFBlcmlvZCEpIHtcbiAgICAgICAgICBzYWxlc01ldHJpY3MocGVyaW9kOiAkcGVyaW9kKSB7XG4gICAgICAgICAgICBwZXJpb2RcbiAgICAgICAgICAgIHJldmVudWVcbiAgICAgICAgICAgIG9yZGVyQ291bnRcbiAgICAgICAgICAgIGF2ZXJhZ2VPcmRlclZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBgO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdyYXBocWwoXG4gICAgICAgIHF1ZXJ5LFxuICAgICAgICB7IHBlcmlvZDogJ21vbnRoJyB9LFxuICAgICAgICBhZG1pblRva2VuXG4gICAgICApLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXNwb25zZS5ib2R5LmRhdGEuc2FsZXNNZXRyaWNzKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0JhdGNoIE9wZXJhdGlvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBleGVjdXRlIG11bHRpcGxlIHF1ZXJpZXMgaW4gc2luZ2xlIHJlcXVlc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBxdWVyeSA9IGBcbiAgICAgICAgcXVlcnkge1xuICAgICAgICAgIHByb2R1Y3QxOiBwcm9kdWN0KGlkOiBcInByb2QtMVwiKSB7XG4gICAgICAgICAgICBpZFxuICAgICAgICAgICAgbmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgICBwcm9kdWN0MjogcHJvZHVjdChpZDogXCJwcm9kLTJcIikge1xuICAgICAgICAgICAgaWRcbiAgICAgICAgICAgIG5hbWVcbiAgICAgICAgICB9XG4gICAgICAgICAgdG9wU2VsbGluZzogdG9wU2VsbGluZ1Byb2R1Y3RzKGxpbWl0OiA1KSB7XG4gICAgICAgICAgICBpZFxuICAgICAgICAgICAgbmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYDtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBncmFwaHFsKHF1ZXJ5KS5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YSkudG9IYXZlUHJvcGVydHkoJ3Byb2R1Y3QxJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhKS50b0hhdmVQcm9wZXJ0eSgncHJvZHVjdDInKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEpLnRvSGF2ZVByb3BlcnR5KCd0b3BTZWxsaW5nJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGaWVsZC1MZXZlbCBBdXRob3JpemF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGlkZSBzZW5zaXRpdmUgZmllbGRzIGZyb20gdW5hdXRob3JpemVkIHVzZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICAgIHF1ZXJ5IEdldFByb2R1Y3QoJGlkOiBJRCEpIHtcbiAgICAgICAgICBwcm9kdWN0KGlkOiAkaWQpIHtcbiAgICAgICAgICAgIGlkXG4gICAgICAgICAgICBuYW1lXG4gICAgICAgICAgICBjb3N0XG4gICAgICAgICAgICBwcm9maXRNYXJnaW5cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ3JhcGhxbChxdWVyeSwgeyBpZDogJ3Byb2QtMTIzJyB9LCBhdXRoVG9rZW4pLmV4cGVjdChcbiAgICAgICAgMjAwXG4gICAgICApO1xuXG4gICAgICAvLyBDdXN0b21lciBzaG91bGQgbm90IHNlZSBjb3N0IGFuZCBwcm9maXRNYXJnaW5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9ycykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ2F1dGhvcml6ZWQnKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==