{"file":"C:\\Adaptive_Testing\\tests\\e2e\\graphql\\graphql-api.e2e.test.ts","mappings":"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","names":[],"sources":["C:\\Adaptive_Testing\\tests\\e2e\\graphql\\graphql-api.e2e.test.ts"],"sourcesContent":["/**\n * E2E Tests: GraphQL API\n *\n * Testing GraphQL queries, mutations, and subscriptions\n */\n\nimport request from 'supertest';\nimport { Express } from 'express';\nimport { createApp } from '../../../src/app';\nimport { generateToken } from '../../../src/libs/auth/jwt.utils';\n\ndescribe('GraphQL API E2E Tests', () => {\n  let app: Express;\n  let authToken: string;\n  let adminToken: string;\n\n  beforeAll(async () => {\n    app = await createApp();\n\n    authToken = generateToken({\n      userId: 'user-123',\n      email: 'customer@test.com',\n      role: 'customer',\n    });\n\n    adminToken = generateToken({\n      userId: 'admin-123',\n      email: 'admin@test.com',\n      role: 'admin',\n    });\n  });\n\n  const graphql = (query: string, variables?: any, token?: string) => {\n    const req = request(app).post('/graphql').send({ query, variables });\n\n    if (token) {\n      req.set('Authorization', `Bearer ${token}`);\n    }\n\n    return req;\n  };\n\n  describe('Product Queries', () => {\n    it('should query all products', async () => {\n      const query = `\n        query {\n          products(page: 1, limit: 10) {\n            items {\n              id\n              name\n              price\n              inventory\n            }\n            total\n            page\n          }\n        }\n      `;\n\n      const response = await graphql(query).expect(200);\n\n      expect(response.body.data.products).toHaveProperty('items');\n      expect(Array.isArray(response.body.data.products.items)).toBe(true);\n      expect(response.body.data.products).toHaveProperty('total');\n    });\n\n    it('should query single product by ID', async () => {\n      const query = `\n        query GetProduct($id: ID!) {\n          product(id: $id) {\n            id\n            name\n            description\n            price\n            inventory\n            rating\n            reviewCount\n          }\n        }\n      `;\n\n      const response = await graphql(query, { id: 'prod-123' }).expect(200);\n\n      expect(response.body.data.product.id).toBe('prod-123');\n      expect(response.body.data.product).toHaveProperty('name');\n      expect(response.body.data.product).toHaveProperty('price');\n    });\n\n    it('should search products', async () => {\n      const query = `\n        query SearchProducts($searchTerm: String!) {\n          searchProducts(query: $searchTerm, limit: 10) {\n            id\n            name\n            price\n          }\n        }\n      `;\n\n      const response = await graphql(query, { searchTerm: 'laptop' }).expect(200);\n\n      expect(Array.isArray(response.body.data.searchProducts)).toBe(true);\n    });\n\n    it('should filter products by category', async () => {\n      const query = `\n        query ProductsByCategory($category: String!) {\n          products(category: $category) {\n            items {\n              id\n              name\n              category\n            }\n          }\n        }\n      `;\n\n      const response = await graphql(query, { category: 'electronics' }).expect(200);\n\n      expect(\n        response.body.data.products.items.every(\n          (p: any) => p.category === 'electronics'\n        )\n      ).toBe(true);\n    });\n\n    it('should get top selling products', async () => {\n      const query = `\n        query {\n          topSellingProducts(limit: 5) {\n            id\n            name\n            soldCount\n          }\n        }\n      `;\n\n      const response = await graphql(query).expect(200);\n\n      expect(Array.isArray(response.body.data.topSellingProducts)).toBe(true);\n      expect(response.body.data.topSellingProducts.length).toBeLessThanOrEqual(5);\n    });\n  });\n\n  describe('User Queries', () => {\n    it('should query current user profile', async () => {\n      const query = `\n        query {\n          me {\n            id\n            email\n            firstName\n            lastName\n            role\n          }\n        }\n      `;\n\n      const response = await graphql(query, {}, authToken).expect(200);\n\n      expect(response.body.data.me).toHaveProperty('id');\n      expect(response.body.data.me).toHaveProperty('email');\n      expect(response.body.data.me).not.toHaveProperty('password');\n    });\n\n    it('should require authentication for user profile', async () => {\n      const query = `\n        query {\n          me {\n            id\n            email\n          }\n        }\n      `;\n\n      const response = await graphql(query).expect(200);\n\n      expect(response.body.errors).toBeDefined();\n      expect(response.body.errors[0].message).toContain('authentication');\n    });\n\n    it('should query all users (admin only)', async () => {\n      const query = `\n        query {\n          users(page: 1, limit: 10) {\n            items {\n              id\n              email\n              role\n              status\n            }\n            total\n          }\n        }\n      `;\n\n      const response = await graphql(query, {}, adminToken).expect(200);\n\n      expect(response.body.data.users).toHaveProperty('items');\n      expect(Array.isArray(response.body.data.users.items)).toBe(true);\n    });\n  });\n\n  describe('Order Queries', () => {\n    it('should query user orders', async () => {\n      const query = `\n        query {\n          myOrders(page: 1, limit: 10) {\n            items {\n              id\n              orderNumber\n              status\n              total\n              createdAt\n            }\n            total\n          }\n        }\n      `;\n\n      const response = await graphql(query, {}, authToken).expect(200);\n\n      expect(response.body.data.myOrders).toHaveProperty('items');\n      expect(Array.isArray(response.body.data.myOrders.items)).toBe(true);\n    });\n\n    it('should query order details', async () => {\n      const query = `\n        query GetOrder($id: ID!) {\n          order(id: $id) {\n            id\n            orderNumber\n            status\n            items {\n              productId\n              productName\n              quantity\n              unitPrice\n              subtotal\n            }\n            subtotal\n            taxAmount\n            shippingCost\n            total\n          }\n        }\n      `;\n\n      const response = await graphql(query, { id: 'order-123' }, authToken).expect(\n        200\n      );\n\n      expect(response.body.data.order.id).toBe('order-123');\n      expect(response.body.data.order).toHaveProperty('items');\n      expect(response.body.data.order).toHaveProperty('total');\n    });\n  });\n\n  describe('Product Mutations', () => {\n    it('should create product (admin only)', async () => {\n      const mutation = `\n        mutation CreateProduct($input: CreateProductInput!) {\n          createProduct(input: $input) {\n            id\n            name\n            sku\n            price\n            inventory\n          }\n        }\n      `;\n\n      const input = {\n        name: 'New GraphQL Product',\n        description: 'Created via GraphQL',\n        sku: 'GQL-001',\n        price: 99.99,\n        inventory: 50,\n      };\n\n      const response = await graphql(mutation, { input }, adminToken).expect(200);\n\n      expect(response.body.data.createProduct.name).toBe('New GraphQL Product');\n      expect(response.body.data.createProduct.sku).toBe('GQL-001');\n    });\n\n    it('should update product (admin only)', async () => {\n      const mutation = `\n        mutation UpdateProduct($id: ID!, $input: UpdateProductInput!) {\n          updateProduct(id: $id, input: $input) {\n            id\n            name\n            price\n          }\n        }\n      `;\n\n      const input = {\n        name: 'Updated Name',\n        price: 149.99,\n      };\n\n      const response = await graphql(\n        mutation,\n        { id: 'prod-update', input },\n        adminToken\n      ).expect(200);\n\n      expect(response.body.data.updateProduct.name).toBe('Updated Name');\n      expect(response.body.data.updateProduct.price).toBe(149.99);\n    });\n\n    it('should delete product (admin only)', async () => {\n      const mutation = `\n        mutation DeleteProduct($id: ID!) {\n          deleteProduct(id: $id) {\n            success\n            message\n          }\n        }\n      `;\n\n      const response = await graphql(\n        mutation,\n        { id: 'prod-delete' },\n        adminToken\n      ).expect(200);\n\n      expect(response.body.data.deleteProduct.success).toBe(true);\n    });\n\n    it('should reject mutations without admin role', async () => {\n      const mutation = `\n        mutation CreateProduct($input: CreateProductInput!) {\n          createProduct(input: $input) {\n            id\n            name\n          }\n        }\n      `;\n\n      const input = {\n        name: 'Unauthorized Product',\n        sku: 'UNAUTH-001',\n        price: 50.00,\n      };\n\n      const response = await graphql(mutation, { input }, authToken).expect(200);\n\n      expect(response.body.errors).toBeDefined();\n      expect(response.body.errors[0].message).toContain('authorized');\n    });\n  });\n\n  describe('User Mutations', () => {\n    it('should register new user', async () => {\n      const mutation = `\n        mutation Register($input: RegisterInput!) {\n          register(input: $input) {\n            user {\n              id\n              email\n              firstName\n              lastName\n            }\n            token\n          }\n        }\n      `;\n\n      const input = {\n        email: 'graphql@test.com',\n        password: 'GraphQLPass123!',\n        firstName: 'GraphQL',\n        lastName: 'User',\n      };\n\n      const response = await graphql(mutation, { input }).expect(200);\n\n      expect(response.body.data.register.user.email).toBe('graphql@test.com');\n      expect(response.body.data.register.token).toBeDefined();\n    });\n\n    it('should login user', async () => {\n      const mutation = `\n        mutation Login($email: String!, $password: String!) {\n          login(email: $email, password: $password) {\n            user {\n              id\n              email\n            }\n            token\n          }\n        }\n      `;\n\n      const response = await graphql(mutation, {\n        email: 'existing@test.com',\n        password: 'CorrectPass123!',\n      }).expect(200);\n\n      expect(response.body.data.login.user.email).toBe('existing@test.com');\n      expect(response.body.data.login.token).toBeDefined();\n    });\n\n    it('should update user profile', async () => {\n      const mutation = `\n        mutation UpdateProfile($input: UpdateProfileInput!) {\n          updateProfile(input: $input) {\n            id\n            firstName\n            lastName\n            phoneNumber\n          }\n        }\n      `;\n\n      const input = {\n        firstName: 'Updated',\n        lastName: 'GraphQL',\n        phoneNumber: '+15555555555',\n      };\n\n      const response = await graphql(mutation, { input }, authToken).expect(200);\n\n      expect(response.body.data.updateProfile.firstName).toBe('Updated');\n    });\n  });\n\n  describe('Order Mutations', () => {\n    it('should create order', async () => {\n      const mutation = `\n        mutation CreateOrder($input: CreateOrderInput!) {\n          createOrder(input: $input) {\n            id\n            orderNumber\n            status\n            total\n          }\n        }\n      `;\n\n      const input = {\n        items: [\n          {\n            productId: 'prod-456',\n            quantity: 2,\n          },\n        ],\n        shippingAddress: {\n          street: '123 Main St',\n          city: 'New York',\n          state: 'NY',\n          zip: '10001',\n          country: 'US',\n        },\n      };\n\n      const response = await graphql(mutation, { input }, authToken).expect(200);\n\n      expect(response.body.data.createOrder).toHaveProperty('id');\n      expect(response.body.data.createOrder).toHaveProperty('orderNumber');\n      expect(response.body.data.createOrder.status).toBe('pending');\n    });\n\n    it('should cancel order', async () => {\n      const mutation = `\n        mutation CancelOrder($id: ID!, $reason: String!) {\n          cancelOrder(id: $id, reason: $reason) {\n            id\n            status\n            cancellationReason\n          }\n        }\n      `;\n\n      const response = await graphql(\n        mutation,\n        {\n          id: 'order-cancel-gql',\n          reason: 'Changed mind',\n        },\n        authToken\n      ).expect(200);\n\n      expect(response.body.data.cancelOrder.status).toBe('cancelled');\n    });\n  });\n\n  describe('Cart Mutations', () => {\n    it('should add item to cart', async () => {\n      const mutation = `\n        mutation AddToCart($productId: ID!, $quantity: Int!) {\n          addToCart(productId: $productId, quantity: $quantity) {\n            items {\n              productId\n              quantity\n            }\n            total\n          }\n        }\n      `;\n\n      const response = await graphql(\n        mutation,\n        {\n          productId: 'prod-789',\n          quantity: 3,\n        },\n        authToken\n      ).expect(200);\n\n      expect(response.body.data.addToCart.items).toContainEqual(\n        expect.objectContaining({\n          productId: 'prod-789',\n          quantity: 3,\n        })\n      );\n    });\n\n    it('should remove item from cart', async () => {\n      const mutation = `\n        mutation RemoveFromCart($productId: ID!) {\n          removeFromCart(productId: $productId) {\n            items {\n              productId\n            }\n            total\n          }\n        }\n      `;\n\n      const response = await graphql(\n        mutation,\n        { productId: 'prod-remove' },\n        authToken\n      ).expect(200);\n\n      expect(\n        response.body.data.removeFromCart.items.find(\n          (i: any) => i.productId === 'prod-remove'\n        )\n      ).toBeUndefined();\n    });\n\n    it('should clear cart', async () => {\n      const mutation = `\n        mutation {\n          clearCart {\n            items\n            total\n          }\n        }\n      `;\n\n      const response = await graphql(mutation, {}, authToken).expect(200);\n\n      expect(response.body.data.clearCart.items).toEqual([]);\n      expect(response.body.data.clearCart.total).toBe(0);\n    });\n  });\n\n  describe('Nested Queries', () => {\n    it('should query order with nested product details', async () => {\n      const query = `\n        query GetOrder($id: ID!) {\n          order(id: $id) {\n            id\n            items {\n              product {\n                id\n                name\n                price\n                inventory\n              }\n              quantity\n              subtotal\n            }\n          }\n        }\n      `;\n\n      const response = await graphql(query, { id: 'order-nested' }, authToken).expect(\n        200\n      );\n\n      expect(response.body.data.order.items[0]).toHaveProperty('product');\n      expect(response.body.data.order.items[0].product).toHaveProperty('name');\n    });\n\n    it('should query user with orders and order items', async () => {\n      const query = `\n        query {\n          me {\n            id\n            email\n            orders(limit: 5) {\n              id\n              orderNumber\n              items {\n                productName\n                quantity\n              }\n              total\n            }\n          }\n        }\n      `;\n\n      const response = await graphql(query, {}, authToken).expect(200);\n\n      expect(response.body.data.me).toHaveProperty('orders');\n      expect(response.body.data.me.orders[0]).toHaveProperty('items');\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should return validation errors', async () => {\n      const mutation = `\n        mutation Register($input: RegisterInput!) {\n          register(input: $input) {\n            user {\n              email\n            }\n          }\n        }\n      `;\n\n      const input = {\n        email: 'invalid-email',\n        password: 'weak',\n        firstName: 'Test',\n        lastName: 'User',\n      };\n\n      const response = await graphql(mutation, { input }).expect(200);\n\n      expect(response.body.errors).toBeDefined();\n    });\n\n    it('should handle not found errors', async () => {\n      const query = `\n        query GetProduct($id: ID!) {\n          product(id: $id) {\n            id\n            name\n          }\n        }\n      `;\n\n      const response = await graphql(query, { id: 'nonexistent' }).expect(200);\n\n      expect(response.body.errors).toBeDefined();\n      expect(response.body.errors[0].message).toContain('not found');\n    });\n\n    it('should handle unauthorized errors', async () => {\n      const query = `\n        query {\n          users {\n            items {\n              email\n            }\n          }\n        }\n      `;\n\n      const response = await graphql(query, {}, authToken).expect(200);\n\n      expect(response.body.errors).toBeDefined();\n      expect(response.body.errors[0].message).toContain('authorized');\n    });\n  });\n\n  describe('Pagination and Filtering', () => {\n    it('should paginate results', async () => {\n      const query = `\n        query GetProducts($page: Int!, $limit: Int!) {\n          products(page: $page, limit: $limit) {\n            items {\n              id\n            }\n            page\n            limit\n            total\n            totalPages\n          }\n        }\n      `;\n\n      const response = await graphql(query, { page: 2, limit: 5 }).expect(200);\n\n      expect(response.body.data.products.page).toBe(2);\n      expect(response.body.data.products.limit).toBe(5);\n      expect(response.body.data.products.items.length).toBeLessThanOrEqual(5);\n    });\n\n    it('should filter and sort results', async () => {\n      const query = `\n        query GetProducts($filter: ProductFilter, $sort: ProductSort) {\n          products(filter: $filter, sort: $sort) {\n            items {\n              id\n              price\n              category\n            }\n          }\n        }\n      `;\n\n      const response = await graphql(query, {\n        filter: {\n          category: 'electronics',\n          minPrice: 50,\n          maxPrice: 200,\n        },\n        sort: {\n          field: 'price',\n          order: 'DESC',\n        },\n      }).expect(200);\n\n      expect(\n        response.body.data.products.items.every(\n          (p: any) => p.category === 'electronics' && p.price >= 50 && p.price <= 200\n        )\n      ).toBe(true);\n    });\n  });\n\n  describe('Analytics Queries', () => {\n    it('should query dashboard metrics (admin)', async () => {\n      const query = `\n        query {\n          analytics {\n            totalRevenue\n            totalOrders\n            totalUsers\n            totalProducts\n            averageOrderValue\n          }\n        }\n      `;\n\n      const response = await graphql(query, {}, adminToken).expect(200);\n\n      expect(response.body.data.analytics).toHaveProperty('totalRevenue');\n      expect(response.body.data.analytics).toHaveProperty('totalOrders');\n    });\n\n    it('should query sales metrics', async () => {\n      const query = `\n        query GetSalesMetrics($period: Period!) {\n          salesMetrics(period: $period) {\n            period\n            revenue\n            orderCount\n            averageOrderValue\n          }\n        }\n      `;\n\n      const response = await graphql(\n        query,\n        { period: 'month' },\n        adminToken\n      ).expect(200);\n\n      expect(Array.isArray(response.body.data.salesMetrics)).toBe(true);\n    });\n  });\n\n  describe('Batch Operations', () => {\n    it('should execute multiple queries in single request', async () => {\n      const query = `\n        query {\n          product1: product(id: \"prod-1\") {\n            id\n            name\n          }\n          product2: product(id: \"prod-2\") {\n            id\n            name\n          }\n          topSelling: topSellingProducts(limit: 5) {\n            id\n            name\n          }\n        }\n      `;\n\n      const response = await graphql(query).expect(200);\n\n      expect(response.body.data).toHaveProperty('product1');\n      expect(response.body.data).toHaveProperty('product2');\n      expect(response.body.data).toHaveProperty('topSelling');\n    });\n  });\n\n  describe('Field-Level Authorization', () => {\n    it('should hide sensitive fields from unauthorized users', async () => {\n      const query = `\n        query GetProduct($id: ID!) {\n          product(id: $id) {\n            id\n            name\n            cost\n            profitMargin\n          }\n        }\n      `;\n\n      const response = await graphql(query, { id: 'prod-123' }, authToken).expect(\n        200\n      );\n\n      // Customer should not see cost and profitMargin\n      expect(response.body.errors).toBeDefined();\n      expect(response.body.errors[0].message).toContain('authorized');\n    });\n  });\n});\n"],"version":3}