cd45d173cc10749cce7ce51d3d6a61ec
"use strict";
/**
 * Unit Tests: Product Entity
 *
 * Testing product entity business logic methods
 */
Object.defineProperty(exports, "__esModule", { value: true });
const product_entity_1 = require("./product.entity");
describe('Product Entity', () => {
    let product;
    beforeEach(() => {
        product = new product_entity_1.Product();
        product.id = 'product-123';
        product.name = 'Test Product';
        product.description = 'Test Description';
        product.sku = 'TEST-SKU-001';
        product.price = 99.99;
        product.inventory = 10;
        product.status = product_entity_1.ProductStatus.ACTIVE;
        product.rating = 4.5;
        product.reviewCount = 100;
        product.soldCount = 50;
        product.createdAt = new Date();
        product.updatedAt = new Date();
    });
    describe('isInStock', () => {
        it('should return true when product is active and has inventory', () => {
            product.status = product_entity_1.ProductStatus.ACTIVE;
            product.inventory = 5;
            expect(product.isInStock()).toBe(true);
        });
        it('should return false when inventory is zero', () => {
            product.status = product_entity_1.ProductStatus.ACTIVE;
            product.inventory = 0;
            expect(product.isInStock()).toBe(false);
        });
        it('should return false when product is draft', () => {
            product.status = product_entity_1.ProductStatus.DRAFT;
            product.inventory = 10;
            expect(product.isInStock()).toBe(false);
        });
        it('should return false when product is out of stock status', () => {
            product.status = product_entity_1.ProductStatus.OUT_OF_STOCK;
            product.inventory = 5; // Has inventory but status is out of stock
            expect(product.isInStock()).toBe(false);
        });
        it('should return false when product is discontinued', () => {
            product.status = product_entity_1.ProductStatus.DISCONTINUED;
            product.inventory = 10;
            expect(product.isInStock()).toBe(false);
        });
        it('should return false when inventory is negative', () => {
            product.status = product_entity_1.ProductStatus.ACTIVE;
            product.inventory = -1;
            expect(product.isInStock()).toBe(false);
        });
        it('should return true with large inventory', () => {
            product.status = product_entity_1.ProductStatus.ACTIVE;
            product.inventory = 1000;
            expect(product.isInStock()).toBe(true);
        });
    });
    describe('isOnSale', () => {
        it('should return true when compareAtPrice is higher than price', () => {
            product.price = 79.99;
            product.compareAtPrice = 99.99;
            expect(product.isOnSale()).toBe(true);
        });
        it('should return false when compareAtPrice is not set', () => {
            product.price = 99.99;
            product.compareAtPrice = undefined;
            expect(product.isOnSale()).toBe(false);
        });
        it('should return false when compareAtPrice equals price', () => {
            product.price = 99.99;
            product.compareAtPrice = 99.99;
            expect(product.isOnSale()).toBe(false);
        });
        it('should return false when compareAtPrice is lower than price', () => {
            product.price = 99.99;
            product.compareAtPrice = 79.99;
            expect(product.isOnSale()).toBe(false);
        });
        it('should return false when compareAtPrice is zero', () => {
            product.price = 99.99;
            product.compareAtPrice = 0;
            expect(product.isOnSale()).toBe(false);
        });
        it('should handle small price differences', () => {
            product.price = 99.98;
            product.compareAtPrice = 99.99;
            expect(product.isOnSale()).toBe(true);
        });
        it('should handle large price differences', () => {
            product.price = 49.99;
            product.compareAtPrice = 199.99;
            expect(product.isOnSale()).toBe(true);
        });
    });
    describe('getDiscountPercentage', () => {
        it('should calculate correct discount percentage', () => {
            product.price = 75.00;
            product.compareAtPrice = 100.00;
            expect(product.getDiscountPercentage()).toBe(25);
        });
        it('should return 0 when not on sale', () => {
            product.price = 99.99;
            product.compareAtPrice = undefined;
            expect(product.getDiscountPercentage()).toBe(0);
        });
        it('should return 0 when compareAtPrice equals price', () => {
            product.price = 99.99;
            product.compareAtPrice = 99.99;
            expect(product.getDiscountPercentage()).toBe(0);
        });
        it('should return 0 when price is higher than compareAtPrice', () => {
            product.price = 119.99;
            product.compareAtPrice = 99.99;
            expect(product.getDiscountPercentage()).toBe(0);
        });
        it('should round discount percentage', () => {
            product.price = 66.67;
            product.compareAtPrice = 100.00;
            // 33.33% should round to 33
            expect(product.getDiscountPercentage()).toBe(33);
        });
        it('should handle 50% discount', () => {
            product.price = 50.00;
            product.compareAtPrice = 100.00;
            expect(product.getDiscountPercentage()).toBe(50);
        });
        it('should handle small discounts', () => {
            product.price = 98.00;
            product.compareAtPrice = 100.00;
            expect(product.getDiscountPercentage()).toBe(2);
        });
        it('should handle large discounts', () => {
            product.price = 10.00;
            product.compareAtPrice = 100.00;
            expect(product.getDiscountPercentage()).toBe(90);
        });
        it('should handle fractional percentages', () => {
            product.price = 75.50;
            product.compareAtPrice = 100.00;
            // 24.5% should round to 25
            expect(product.getDiscountPercentage()).toBe(25);
        });
    });
    describe('Product Status', () => {
        it('should have draft status', () => {
            product.status = product_entity_1.ProductStatus.DRAFT;
            expect(product.status).toBe(product_entity_1.ProductStatus.DRAFT);
        });
        it('should have active status', () => {
            product.status = product_entity_1.ProductStatus.ACTIVE;
            expect(product.status).toBe(product_entity_1.ProductStatus.ACTIVE);
        });
        it('should have out of stock status', () => {
            product.status = product_entity_1.ProductStatus.OUT_OF_STOCK;
            expect(product.status).toBe(product_entity_1.ProductStatus.OUT_OF_STOCK);
        });
        it('should have discontinued status', () => {
            product.status = product_entity_1.ProductStatus.DISCONTINUED;
            expect(product.status).toBe(product_entity_1.ProductStatus.DISCONTINUED);
        });
    });
    describe('Product Properties', () => {
        it('should have required fields', () => {
            expect(product.id).toBeDefined();
            expect(product.name).toBeDefined();
            expect(product.description).toBeDefined();
            expect(product.sku).toBeDefined();
            expect(product.price).toBeDefined();
            expect(product.inventory).toBeDefined();
        });
        it('should have optional category', () => {
            product.categoryId = 'category-123';
            expect(product.categoryId).toBe('category-123');
        });
        it('should support multiple images', () => {
            product.images = ['image1.jpg', 'image2.jpg', 'image3.jpg'];
            expect(product.images).toHaveLength(3);
            expect(product.images).toContain('image1.jpg');
        });
        it('should support metadata as JSON', () => {
            product.metadata = {
                weight: '1.5kg',
                dimensions: { width: 10, height: 20, depth: 5 },
                color: 'blue',
            };
            expect(product.metadata?.weight).toBe('1.5kg');
            expect(product.metadata?.color).toBe('blue');
        });
        it('should track rating', () => {
            product.rating = 4.7;
            expect(product.rating).toBe(4.7);
        });
        it('should track review count', () => {
            product.reviewCount = 150;
            expect(product.reviewCount).toBe(150);
        });
        it('should track sold count', () => {
            product.soldCount = 75;
            expect(product.soldCount).toBe(75);
        });
        it('should have timestamps', () => {
            expect(product.createdAt).toBeInstanceOf(Date);
            expect(product.updatedAt).toBeInstanceOf(Date);
        });
    });
    describe('Price Validation Scenarios', () => {
        it('should handle free products', () => {
            product.price = 0;
            product.compareAtPrice = undefined;
            expect(product.price).toBe(0);
            expect(product.isOnSale()).toBe(false);
        });
        it('should handle expensive products', () => {
            product.price = 9999.99;
            product.compareAtPrice = 12999.99;
            expect(product.isOnSale()).toBe(true);
            expect(product.getDiscountPercentage()).toBe(23);
        });
        it('should handle decimal prices', () => {
            product.price = 19.99;
            product.compareAtPrice = 29.99;
            expect(product.isOnSale()).toBe(true);
        });
    });
    describe('Inventory Scenarios', () => {
        it('should handle low inventory', () => {
            product.inventory = 1;
            product.status = product_entity_1.ProductStatus.ACTIVE;
            expect(product.isInStock()).toBe(true);
        });
        it('should handle high inventory', () => {
            product.inventory = 9999;
            product.status = product_entity_1.ProductStatus.ACTIVE;
            expect(product.isInStock()).toBe(true);
        });
        it('should detect when inventory depleted', () => {
            product.inventory = 0;
            product.status = product_entity_1.ProductStatus.ACTIVE;
            expect(product.isInStock()).toBe(false);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXEFkYXB0aXZlX1Rlc3RpbmdcXHNyY1xcc2VydmljZXNcXHByb2R1Y3QtY2F0YWxvZ1xcZW50aXRpZXNcXHByb2R1Y3QuZW50aXR5LnNwZWMudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7O0dBSUc7O0FBRUgscURBQTBEO0FBRTFELFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxHQUFHLEVBQUU7SUFDOUIsSUFBSSxPQUFnQixDQUFDO0lBRXJCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxPQUFPLEdBQUcsSUFBSSx3QkFBTyxFQUFFLENBQUM7UUFDeEIsT0FBTyxDQUFDLEVBQUUsR0FBRyxhQUFhLENBQUM7UUFDM0IsT0FBTyxDQUFDLElBQUksR0FBRyxjQUFjLENBQUM7UUFDOUIsT0FBTyxDQUFDLFdBQVcsR0FBRyxrQkFBa0IsQ0FBQztRQUN6QyxPQUFPLENBQUMsR0FBRyxHQUFHLGNBQWMsQ0FBQztRQUM3QixPQUFPLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUN0QixPQUFPLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztRQUN2QixPQUFPLENBQUMsTUFBTSxHQUFHLDhCQUFhLENBQUMsTUFBTSxDQUFDO1FBQ3RDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDO1FBQ3JCLE9BQU8sQ0FBQyxXQUFXLEdBQUcsR0FBRyxDQUFDO1FBQzFCLE9BQU8sQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO1FBQ3ZCLE9BQU8sQ0FBQyxTQUFTLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUMvQixPQUFPLENBQUMsU0FBUyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7SUFDakMsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsV0FBVyxFQUFFLEdBQUcsRUFBRTtRQUN6QixFQUFFLENBQUMsNkRBQTZELEVBQUUsR0FBRyxFQUFFO1lBQ3JFLE9BQU8sQ0FBQyxNQUFNLEdBQUcsOEJBQWEsQ0FBQyxNQUFNLENBQUM7WUFDdEMsT0FBTyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUM7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QUMsS0FBSyxDQUFDLENBQUM7UUFDekMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsc0RBQXNELEVBQUUsR0FBRyxFQUFFO1lBQzlELE9BQU8sQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1lBQ3RCLE9BQU8sQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO1lBRS9CLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDekMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsNkRBQTZELEVBQUUsR0FBRyxFQUFFO1lBQ3JFLE9BQU8sQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1lBQ3RCLE9BQU8sQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO1lBRS9CLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDekMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsaURBQWlELEVBQUUsR0FBRyxFQUFFO1lBQ3pELE9BQU8sQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1lBQ3RCLE9BQU8sQ0FBQyxjQUFjLEdBQUcsQ0FBQyxDQUFDO1lBRTNCLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDekMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsdUNBQXVDLEVBQUUsR0FBRyxFQUFFO1lBQy9DLE9BQU8sQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1lBQ3RCLE9BQU8sQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO1lBRS9CLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDeEMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsdUNBQXVDLEVBQUUsR0FBRyxFQUFFO1lBQy9DLE9BQU8sQ0FBQyxLQUFL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Y2VzIjpbIkM6XFxBZGFwdGl2ZV9UZXN0aW5nXFxzcmNcXHNlcnZpY2VzXFxwcm9kdWN0LWNhdGFsb2dcXGVudGl0aWVzXFxwcm9kdWN0LmVudGl0eS5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5pdCBUZXN0czogUHJvZHVjdCBFbnRpdHlcbiAqXG4gKiBUZXN0aW5nIHByb2R1Y3QgZW50aXR5IGJ1c2luZXNzIGxvZ2ljIG1ldGhvZHNcbiAqL1xuXG5pbXBvcnQgeyBQcm9kdWN0LCBQcm9kdWN0U3RhdHVzIH0gZnJvbSAnLi9wcm9kdWN0LmVudGl0eSc7XG5cbmRlc2NyaWJlKCdQcm9kdWN0IEVudGl0eScsICgpID0+IHtcbiAgbGV0IHByb2R1Y3Q6IFByb2R1Y3Q7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgcHJvZHVjdCA9IG5ldyBQcm9kdWN0KCk7XG4gICAgcHJvZHVjdC5pZCA9ICdwcm9kdWN0LTEyMyc7XG4gICAgcHJvZHVjdC5uYW1lID0gJ1Rlc3QgUHJvZHVjdCc7XG4gICAgcHJvZHVjdC5kZXNjcmlwdGlvbiA9ICdUZXN0IERlc2NyaXB0aW9uJztcbiAgICBwcm9kdWN0LnNrdSA9ICdURVNULVNLVS0wMDEnO1xuICAgIHByb2R1Y3QucHJpY2UgPSA5OS45OTtcbiAgICBwcm9kdWN0LmludmVudG9yeSA9IDEwO1xuICAgIHByb2R1Y3Quc3RhdHVzID0gUHJvZHVjdFN0YXR1cy5BQ1RJVkU7XG4gICAgcHJvZHVjdC5yYXRpbmcgPSA0LjU7XG4gICAgcHJvZHVjdC5yZXZpZXdDb3VudCA9IDEwMDtcbiAgICBwcm9kdWN0LnNvbGRDb3VudCA9IDUwO1xuICAgIHByb2R1Y3QuY3JlYXRlZEF0ID0gbmV3IERhdGUoKTtcbiAgICBwcm9kdWN0LnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdpc0luU3RvY2snLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdHJ1ZSB3aGVuIHByb2R1Y3QgaXMgYWN0aXZlIGFuZCBoYXMgaW52ZW50b3J5JywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5zdGF0dXMgPSBQcm9kdWN0U3RhdHVzLkFDVElWRTtcbiAgICAgIHByb2R1Y3QuaW52ZW50b3J5ID0gNTtcblxuICAgICAgZXhwZWN0KHByb2R1Y3QuaXNJblN0b2NrKCkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSB3aGVuIGludmVudG9yeSBpcyB6ZXJvJywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5zdGF0dXMgPSBQcm9kdWN0U3RhdHVzLkFDVElWRTtcbiAgICAgIHByb2R1Y3QuaW52ZW50b3J5ID0gMDtcblxuICAgICAgZXhwZWN0KHByb2R1Y3QuaXNJblN0b2NrKCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZmFsc2Ugd2hlbiBwcm9kdWN0IGlzIGRyYWZ0JywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5zdGF0dXMgPSBQcm9kdWN0U3RhdHVzLkRSQUZUO1xuICAgICAgcHJvZHVjdC5pbnZlbnRvcnkgPSAxMDtcblxuICAgICAgZXhwZWN0KHByb2R1Y3QuaXNJblN0b2NrKCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZmFsc2Ugd2hlbiBwcm9kdWN0IGlzIG91dCBvZiBzdG9jayBzdGF0dXMnLCAoKSA9PiB7XG4gICAgICBwcm9kdWN0LnN0YXR1cyA9IFByb2R1Y3RTdGF0dXMuT1VUX09GX1NUT0NLO1xuICAgICAgcHJvZHVjdC5pbnZlbnRvcnkgPSA1OyAvLyBIYXMgaW52ZW50b3J5IGJ1dCBzdGF0dXMgaXMgb3V0IG9mIHN0b2NrXG5cbiAgICAgIGV4cGVjdChwcm9kdWN0LmlzSW5TdG9jaygpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIHdoZW4gcHJvZHVjdCBpcyBkaXNjb250aW51ZWQnLCAoKSA9PiB7XG4gICAgICBwcm9kdWN0LnN0YXR1cyA9IFByb2R1Y3RTdGF0dXMuRElTQ09OVElOVUVEO1xuICAgICAgcHJvZHVjdC5pbnZlbnRvcnkgPSAxMDtcblxuICAgICAgZXhwZWN0KHByb2R1Y3QuaXNJblN0b2NrKCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZmFsc2Ugd2hlbiBpbnZlbnRvcnkgaXMgbmVnYXRpdmUnLCAoKSA9PiB7XG4gICAgICBwcm9kdWN0LnN0YXR1cyA9IFByb2R1Y3RTdGF0dXMuQUNUSVZFO1xuICAgICAgcHJvZHVjdC5pbnZlbnRvcnkgPSAtMTtcblxuICAgICAgZXhwZWN0KHByb2R1Y3QuaXNJblN0b2NrKCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdHJ1ZSB3aXRoIGxhcmdlIGludmVudG9yeScsICgpID0+IHtcbiAgICAgIHByb2R1Y3Quc3RhdHVzID0gUHJvZHVjdFN0YXR1cy5BQ1RJVkU7XG4gICAgICBwcm9kdWN0LmludmVudG9yeSA9IDEwMDA7XG5cbiAgICAgIGV4cGVjdChwcm9kdWN0LmlzSW5TdG9jaygpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnaXNPblNhbGUnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdHJ1ZSB3aGVuIGNvbXBhcmVBdFByaWNlIGlzIGhpZ2hlciB0aGFuIHByaWNlJywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5wcmljZSA9IDc5Ljk5O1xuICAgICAgcHJvZHVjdC5jb21wYXJlQXRQcmljZSA9IDk5Ljk5O1xuXG4gICAgICBleHBlY3QocHJvZHVjdC5pc09uU2FsZSgpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZmFsc2Ugd2hlbiBjb21wYXJlQXRQcmljZSBpcyBub3Qgc2V0JywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5wcmljZSA9IDk5Ljk5O1xuICAgICAgcHJvZHVjdC5jb21wYXJlQXRQcmljZSA9IHVuZGVmaW5lZDtcblxuICAgICAgZXhwZWN0KHByb2R1Y3QuaXNPblNhbGUoKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSB3aGVuIGNvbXBhcmVBdFByaWNlIGVxdWFscyBwcmljZScsICgpID0+IHtcbiAgICAgIHByb2R1Y3QucHJpY2UgPSA5OS45OTtcbiAgICAgIHByb2R1Y3QuY29tcGFyZUF0UHJpY2UgPSA5OS45OTtcblxuICAgICAgZXhwZWN0KHByb2R1Y3QuaXNPblNhbGUoKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSB3aGVuIGNvbXBhcmVBdFByaWNlIGlzIGxvd2VyIHRoYW4gcHJpY2UnLCAoKSA9PiB7XG4gICAgICBwcm9kdWN0LnByaWNlID0gOTkuOTk7XG4gICAgICBwcm9kdWN0LmNvbXBhcmVBdFByaWNlID0gNzkuOTk7XG5cbiAgICAgIGV4cGVjdChwcm9kdWN0LmlzT25TYWxlKCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZmFsc2Ugd2hlbiBjb21wYXJlQXRQcmljZSBpcyB6ZXJvJywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5wcmljZSA9IDk5Ljk5O1xuICAgICAgcHJvZHVjdC5jb21wYXJlQXRQcmljZSA9IDA7XG5cbiAgICAgIGV4cGVjdChwcm9kdWN0LmlzT25TYWxlKCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc21hbGwgcHJpY2UgZGlmZmVyZW5jZXMnLCAoKSA9PiB7XG4gICAgICBwcm9kdWN0LnByaWNlID0gOTkuOTg7XG4gICAgICBwcm9kdWN0LmNvbXBhcmVBdFByaWNlID0gOTkuOTk7XG5cbiAgICAgIGV4cGVjdChwcm9kdWN0LmlzT25TYWxlKCkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBsYXJnZSBwcmljZSBkaWZmZXJlbmNlcycsICgpID0+IHtcbiAgICAgIHByb2R1Y3QucHJpY2UgPSA0OS45OTtcbiAgICAgIHByb2R1Y3QuY29tcGFyZUF0UHJpY2UgPSAxOTkuOTk7XG5cbiAgICAgIGV4cGVjdChwcm9kdWN0LmlzT25TYWxlKCkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXREaXNjb3VudFBlcmNlbnRhZ2UnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgY29ycmVjdCBkaXNjb3VudCBwZXJjZW50YWdlJywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5wcmljZSA9IDc1LjAwO1xuICAgICAgcHJvZHVjdC5jb21wYXJlQXRQcmljZSA9IDEwMC4wMDtcblxuICAgICAgZXhwZWN0KHByb2R1Y3QuZ2V0RGlzY291bnRQZXJjZW50YWdlKCkpLnRvQmUoMjUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gMCB3aGVuIG5vdCBvbiBzYWxlJywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5wcmljZSA9IDk5Ljk5O1xuICAgICAgcHJvZHVjdC5jb21wYXJlQXRQcmljZSA9IHVuZGVmaW5lZDtcblxuICAgICAgZXhwZWN0KHByb2R1Y3QuZ2V0RGlzY291bnRQZXJjZW50YWdlKCkpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiAwIHdoZW4gY29tcGFyZUF0UHJpY2UgZXF1YWxzIHByaWNlJywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5wcmljZSA9IDk5Ljk5O1xuICAgICAgcHJvZHVjdC5jb21wYXJlQXRQcmljZSA9IDk5Ljk5O1xuXG4gICAgICBleHBlY3QocHJvZHVjdC5nZXREaXNjb3VudFBlcmNlbnRhZ2UoKSkudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDAgd2hlbiBwcmljZSBpcyBoaWdoZXIgdGhhbiBjb21wYXJlQXRQcmljZScsICgpID0+IHtcbiAgICAgIHByb2R1Y3QucHJpY2UgPSAxMTkuOTk7XG4gICAgICBwcm9kdWN0LmNvbXBhcmVBdFByaWNlID0gOTkuOTk7XG5cbiAgICAgIGV4cGVjdChwcm9kdWN0LmdldERpc2NvdW50UGVyY2VudGFnZSgpKS50b0JlKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByb3VuZCBkaXNjb3VudCBwZXJjZW50YWdlJywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5wcmljZSA9IDY2LjY3O1xuICAgICAgcHJvZHVjdC5jb21wYXJlQXRQcmljZSA9IDEwMC4wMDtcblxuICAgICAgLy8gMzMuMzMlIHNob3VsZCByb3VuZCB0byAzM1xuICAgICAgZXhwZWN0KHByb2R1Y3QuZ2V0RGlzY291bnRQZXJjZW50YWdlKCkpLnRvQmUoMzMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgNTAlIGRpc2NvdW50JywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5wcmljZSA9IDUwLjAwO1xuICAgICAgcHJvZHVjdC5jb21wYXJlQXRQcmljZSA9IDEwMC4wMDtcblxuICAgICAgZXhwZWN0KHByb2R1Y3QuZ2V0RGlzY291bnRQZXJjZW50YWdlKCkpLnRvQmUoNTApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc21hbGwgZGlzY291bnRzJywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5wcmljZSA9IDk4LjAwO1xuICAgICAgcHJvZHVjdC5jb21wYXJlQXRQcmljZSA9IDEwMC4wMDtcblxuICAgICAgZXhwZWN0KHByb2R1Y3QuZ2V0RGlzY291bnRQZXJjZW50YWdlKCkpLnRvQmUoMik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBsYXJnZSBkaXNjb3VudHMnLCAoKSA9PiB7XG4gICAgICBwcm9kdWN0LnByaWNlID0gMTAuMDA7XG4gICAgICBwcm9kdWN0LmNvbXBhcmVBdFByaWNlID0gMTAwLjAwO1xuXG4gICAgICBleHBlY3QocHJvZHVjdC5nZXREaXNjb3VudFBlcmNlbnRhZ2UoKSkudG9CZSg5MCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBmcmFjdGlvbmFsIHBlcmNlbnRhZ2VzJywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5wcmljZSA9IDc1LjUwO1xuICAgICAgcHJvZHVjdC5jb21wYXJlQXRQcmljZSA9IDEwMC4wMDtcblxuICAgICAgLy8gMjQuNSUgc2hvdWxkIHJvdW5kIHRvIDI1XG4gICAgICBleHBlY3QocHJvZHVjdC5nZXREaXNjb3VudFBlcmNlbnRhZ2UoKSkudG9CZSgyNSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQcm9kdWN0IFN0YXR1cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgZHJhZnQgc3RhdHVzJywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5zdGF0dXMgPSBQcm9kdWN0U3RhdHVzLkRSQUZUO1xuXG4gICAgICBleHBlY3QocHJvZHVjdC5zdGF0dXMpLnRvQmUoUHJvZHVjdFN0YXR1cy5EUkFGVCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgYWN0aXZlIHN0YXR1cycsICgpID0+IHtcbiAgICAgIHByb2R1Y3Quc3RhdHVzID0gUHJvZHVjdFN0YXR1cy5BQ1RJVkU7XG5cbiAgICAgIGV4cGVjdChwcm9kdWN0LnN0YXR1cykudG9CZShQcm9kdWN0U3RhdHVzLkFDVElWRSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgb3V0IG9mIHN0b2NrIHN0YXR1cycsICgpID0+IHtcbiAgICAgIHByb2R1Y3Quc3RhdHVzID0gUHJvZHVjdFN0YXR1cy5PVVRfT0ZfU1RPQ0s7XG5cbiAgICAgIGV4cGVjdChwcm9kdWN0LnN0YXR1cykudG9CZShQcm9kdWN0U3RhdHVzLk9VVF9PRl9TVE9DSyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgZGlzY29udGludWVkIHN0YXR1cycsICgpID0+IHtcbiAgICAgIHByb2R1Y3Quc3RhdHVzID0gUHJvZHVjdFN0YXR1cy5ESVNDT05USU5VRUQ7XG5cbiAgICAgIGV4cGVjdChwcm9kdWN0LnN0YXR1cykudG9CZShQcm9kdWN0U3RhdHVzLkRJU0NPTlRJTlVFRCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQcm9kdWN0IFByb3BlcnRpZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYXZlIHJlcXVpcmVkIGZpZWxkcycsICgpID0+IHtcbiAgICAgIGV4cGVjdChwcm9kdWN0LmlkKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHByb2R1Y3QubmFtZSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChwcm9kdWN0LmRlc2NyaXB0aW9uKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHByb2R1Y3Quc2t1KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHByb2R1Y3QucHJpY2UpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocHJvZHVjdC5pbnZlbnRvcnkpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgb3B0aW9uYWwgY2F0ZWdvcnknLCAoKSA9PiB7XG4gICAgICBwcm9kdWN0LmNhdGVnb3J5SWQgPSAnY2F0ZWdvcnktMTIzJztcblxuICAgICAgZXhwZWN0KHByb2R1Y3QuY2F0ZWdvcnlJZCkudG9CZSgnY2F0ZWdvcnktMTIzJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgbXVsdGlwbGUgaW1hZ2VzJywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5pbWFnZXMgPSBbJ2ltYWdlMS5qcGcnLCAnaW1hZ2UyLmpwZycsICdpbWFnZTMuanBnJ107XG5cbiAgICAgIGV4cGVjdChwcm9kdWN0LmltYWdlcykudG9IYXZlTGVuZ3RoKDMpO1xuICAgICAgZXhwZWN0KHByb2R1Y3QuaW1hZ2VzKS50b0NvbnRhaW4oJ2ltYWdlMS5qcGcnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc3VwcG9ydCBtZXRhZGF0YSBhcyBKU09OJywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5tZXRhZGF0YSA9IHtcbiAgICAgICAgd2VpZ2h0OiAnMS41a2cnLFxuICAgICAgICBkaW1lbnNpb25zOiB7IHdpZHRoOiAxMCwgaGVpZ2h0OiAyMCwgZGVwdGg6IDUgfSxcbiAgICAgICAgY29sb3I6ICdibHVlJyxcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdChwcm9kdWN0Lm1ldGFkYXRhPy53ZWlnaHQpLnRvQmUoJzEuNWtnJyk7XG4gICAgICBleHBlY3QocHJvZHVjdC5tZXRhZGF0YT8uY29sb3IpLnRvQmUoJ2JsdWUnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdHJhY2sgcmF0aW5nJywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5yYXRpbmcgPSA0Ljc7XG5cbiAgICAgIGV4cGVjdChwcm9kdWN0LnJhdGluZykudG9CZSg0LjcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0cmFjayByZXZpZXcgY291bnQnLCAoKSA9PiB7XG4gICAgICBwcm9kdWN0LnJldmlld0NvdW50ID0gMTUwO1xuXG4gICAgICBleHBlY3QocHJvZHVjdC5yZXZpZXdDb3VudCkudG9CZSgxNTApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0cmFjayBzb2xkIGNvdW50JywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5zb2xkQ291bnQgPSA3NTtcblxuICAgICAgZXhwZWN0KHByb2R1Y3Quc29sZENvdW50KS50b0JlKDc1KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSB0aW1lc3RhbXBzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHByb2R1Y3QuY3JlYXRlZEF0KS50b0JlSW5zdGFuY2VPZihEYXRlKTtcbiAgICAgIGV4cGVjdChwcm9kdWN0LnVwZGF0ZWRBdCkudG9CZUluc3RhbmNlT2YoRGF0ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQcmljZSBWYWxpZGF0aW9uIFNjZW5hcmlvcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBmcmVlIHByb2R1Y3RzJywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5wcmljZSA9IDA7XG4gICAgICBwcm9kdWN0LmNvbXBhcmVBdFByaWNlID0gdW5kZWZpbmVkO1xuXG4gICAgICBleHBlY3QocHJvZHVjdC5wcmljZSkudG9CZSgwKTtcbiAgICAgIGV4cGVjdChwcm9kdWN0LmlzT25TYWxlKCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZXhwZW5zaXZlIHByb2R1Y3RzJywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5wcmljZSA9IDk5OTkuOTk7XG4gICAgICBwcm9kdWN0LmNvbXBhcmVBdFByaWNlID0gMTI5OTkuOTk7XG5cbiAgICAgIGV4cGVjdChwcm9kdWN0LmlzT25TYWxlKCkpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocHJvZHVjdC5nZXREaXNjb3VudFBlcmNlbnRhZ2UoKSkudG9CZSgyMyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkZWNpbWFsIHByaWNlcycsICgpID0+IHtcbiAgICAgIHByb2R1Y3QucHJpY2UgPSAxOS45OTtcbiAgICAgIHByb2R1Y3QuY29tcGFyZUF0UHJpY2UgPSAyOS45OTtcblxuICAgICAgZXhwZWN0KHByb2R1Y3QuaXNPblNhbGUoKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ludmVudG9yeSBTY2VuYXJpb3MnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbG93IGludmVudG9yeScsICgpID0+IHtcbiAgICAgIHByb2R1Y3QuaW52ZW50b3J5ID0gMTtcbiAgICAgIHByb2R1Y3Quc3RhdHVzID0gUHJvZHVjdFN0YXR1cy5BQ1RJVkU7XG5cbiAgICAgIGV4cGVjdChwcm9kdWN0LmlzSW5TdG9jaygpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaGlnaCBpbnZlbnRvcnknLCAoKSA9PiB7XG4gICAgICBwcm9kdWN0LmludmVudG9yeSA9IDk5OTk7XG4gICAgICBwcm9kdWN0LnN0YXR1cyA9IFByb2R1Y3RTdGF0dXMuQUNUSVZFO1xuXG4gICAgICBleHBlY3QocHJvZHVjdC5pc0luU3RvY2soKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IHdoZW4gaW52ZW50b3J5IGRlcGxldGVkJywgKCkgPT4ge1xuICAgICAgcHJvZHVjdC5pbnZlbnRvcnkgPSAwO1xuICAgICAgcHJvZHVjdC5zdGF0dXMgPSBQcm9kdWN0U3RhdHVzLkFDVElWRTtcblxuICAgICAgZXhwZWN0KHByb2R1Y3QuaXNJblN0b2NrKCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9