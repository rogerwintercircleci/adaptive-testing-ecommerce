67a170aa5a5cf6f425efd9b974bdb4bd
"use strict";
/**
 * TDD: Discount/Coupon Service Tests
 *
 * Testing comprehensive discount and coupon functionality
 */
Object.defineProperty(exports, "__esModule", { value: true });
const discount_service_1 = require("./discount.service");
const errors_1 = require("@libs/errors");
describe('DiscountService', () => {
    let discountService;
    let mockDiscountRepository;
    beforeEach(() => {
        mockDiscountRepository = {
            create: jest.fn(),
            findById: jest.fn(),
            findByCode: jest.fn(),
            update: jest.fn(),
            delete: jest.fn(),
            findActive: jest.fn(),
            incrementUsageCount: jest.fn(),
            findByUserId: jest.fn(),
        };
        discountService = new discount_service_1.DiscountService(mockDiscountRepository);
    });
    describe('createDiscount', () => {
        it('should create a percentage discount code', async () => {
            const discountDto = {
                code: 'SAVE20',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                description: '20% off',
                expiresAt: new Date('2025-12-31'),
            };
            const mockDiscount = {
                id: '1',
                ...discountDto,
                usageCount: 0,
                isActive: true,
                createdAt: new Date(),
            };
            mockDiscountRepository.create.mockResolvedValue(mockDiscount);
            const result = await discountService.createDiscount(discountDto);
            expect(result).toEqual(mockDiscount);
            expect(mockDiscountRepository.create).toHaveBeenCalledWith(expect.objectContaining({
                code: 'SAVE20',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
            }));
        });
        it('should create a fixed amount discount code', async () => {
            const discountDto = {
                code: 'SAVE10',
                type: discount_service_1.DiscountType.FIXED_AMOUNT,
                value: 10,
                description: '$10 off',
            };
            const mockDiscount = { id: '1', ...discountDto, usageCount: 0, isActive: true };
            mockDiscountRepository.create.mockResolvedValue(mockDiscount);
            const result = await discountService.createDiscount(discountDto);
            expect(result.type).toBe(discount_service_1.DiscountType.FIXED_AMOUNT);
            expect(result.value).toBe(10);
        });
        it('should create a free shipping discount', async () => {
            const discountDto = {
                code: 'FREESHIP',
                type: discount_service_1.DiscountType.FREE_SHIPPING,
                value: 0,
                description: 'Free shipping',
            };
            const mockDiscount = { id: '1', ...discountDto, usageCount: 0, isActive: true };
            mockDiscountRepository.create.mockResolvedValue(mockDiscount);
            const result = await discountService.createDiscount(discountDto);
            expect(result.type).toBe(discount_service_1.DiscountType.FREE_SHIPPING);
        });
        it('should reject percentage discount over 100%', async () => {
            const discountDto = {
                code: 'INVALID',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 150,
                description: 'Invalid discount',
            };
            await expect(discountService.createDiscount(discountDto)).rejects.toThrow(errors_1.BadRequestError);
            await expect(discountService.createDiscount(discountDto)).rejects.toThrow('Percentage discount cannot exceed 100%');
        });
        it('should reject negative discount values', async () => {
            const discountDto = {
                code: 'INVALID',
                type: discount_service_1.DiscountType.FIXED_AMOUNT,
                value: -10,
                description: 'Invalid discount',
            };
            await expect(discountService.createDiscount(discountDto)).rejects.toThrow(errors_1.BadRequestError);
        });
        it('should create discount with minimum purchase requirement', async () => {
            const discountDto = {
                code: 'MIN50',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 15,
                description: '15% off orders over $50',
                minPurchaseAmount: 50,
            };
            const mockDiscount = { id: '1', ...discountDto, usageCount: 0, isActive: true };
            mockDiscountRepository.create.mockResolvedValue(mockDiscount);
            const result = await discountService.createDiscount(discountDto);
            expect(result.minPurchaseAmount).toBe(50);
        });
        it('should create discount with maximum discount cap', async () => {
            const discountDto = {
                code: 'SAVE20MAX10',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                description: '20% off (max $10)',
                maxDiscountAmount: 10,
            };
            const mockDiscount = { id: '1', ...discountDto, usageCount: 0, isActive: true };
            mockDiscountRepository.create.mockResolvedValue(mockDiscount);
            const result = await discountService.createDiscount(discountDto);
            expect(result.maxDiscountAmount).toBe(10);
        });
        it('should create discount with usage limit', async () => {
            const discountDto = {
                code: 'LIMITED100',
                type: discount_service_1.DiscountType.FIXED_AMOUNT,
                value: 5,
                description: 'Limited to 100 uses',
                maxUsageCount: 100,
            };
            const mockDiscount = { id: '1', ...discountDto, usageCount: 0, isActive: true };
            mockDiscountRepository.create.mockResolvedValue(mockDiscount);
            const result = await discountService.createDiscount(discountDto);
            expect(result.maxUsageCount).toBe(100);
        });
        it('should create discount with per-user limit', async () => {
            const discountDto = {
                code: 'ONCE',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 10,
                description: 'One time use per customer',
                maxUsagePerUser: 1,
            };
            const mockDiscount = { id: '1', ...discountDto, usageCount: 0, isActive: true };
            mockDiscountRepository.create.mockResolvedValue(mockDiscount);
            const result = await discountService.createDiscount(discountDto);
            expect(result.maxUsagePerUser).toBe(1);
        });
        it('should normalize discount code to uppercase', async () => {
            const discountDto = {
                code: 'save20',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                description: '20% off',
            };
            const mockDiscount = { id: '1', ...discountDto, usageCount: 0, isActive: true };
            mockDiscountRepository.create.mockResolvedValue(mockDiscount);
            const result = await discountService.createDiscount(discountDto);
            expect(result.code).toBe('SAVE20');
        });
    });
    describe('validateDiscount', () => {
        it('should validate an active discount code', async () => {
            const mockDiscount = {
                id: '1',
                code: 'VALID',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                isActive: true,
                usageCount: 5,
                expiresAt: new Date('2025-12-31'),
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const result = await discountService.validateDiscount('VALID');
            expect(result.isValid).toBe(true);
            expect(result.discount).toEqual(mockDiscount);
        });
        it('should reject non-existent discount code', async () => {
            mockDiscountRepository.findByCode.mockResolvedValue(null);
            const result = await discountService.validateDiscount('INVALID');
            expect(result.isValid).toBe(false);
            expect(result.reason).toBe('Discount code not found');
        });
        it('should reject inactive discount code', async () => {
            const mockDiscount = {
                id: '1',
                code: 'INACTIVE',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                isActive: false,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const result = await discountService.validateDiscount('INACTIVE');
            expect(result.isValid).toBe(false);
            expect(result.reason).toBe('Discount code is not active');
        });
        it('should reject expired discount code', async () => {
            const mockDiscount = {
                id: '1',
                code: 'EXPIRED',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                isActive: true,
                expiresAt: new Date('2020-01-01'),
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const result = await discountService.validateDiscount('EXPIRED');
            expect(result.isValid).toBe(false);
            expect(result.reason).toBe('Discount code has expired');
        });
        it('should reject discount that has not started yet', async () => {
            const mockDiscount = {
                id: '1',
                code: 'FUTURE',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                isActive: true,
                startsAt: new Date('2030-01-01'),
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const result = await discountService.validateDiscount('FUTURE');
            expect(result.isValid).toBe(false);
            expect(result.reason).toBe('Discount code is not yet active');
        });
        it('should reject discount that reached max usage limit', async () => {
            const mockDiscount = {
                id: '1',
                code: 'MAXED',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                isActive: true,
                usageCount: 100,
                maxUsageCount: 100,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const result = await discountService.validateDiscount('MAXED');
            expect(result.isValid).toBe(false);
            expect(result.reason).toBe('Discount code has reached maximum usage limit');
        });
    });
    describe('applyDiscount', () => {
        it('should apply percentage discount to order', async () => {
            const mockDiscount = {
                id: '1',
                code: 'SAVE20',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                isActive: true,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const applyDto = {
                code: 'SAVE20',
                orderSubtotal: 100,
                userId: 'user123',
            };
            const result = await discountService.applyDiscount(applyDto);
            expect(result.discountAmount).toBe(20);
            expect(result.finalAmount).toBe(80);
        });
        it('should apply fixed amount discount to order', async () => {
            const mockDiscount = {
                id: '1',
                code: 'SAVE10',
                type: discount_service_1.DiscountType.FIXED_AMOUNT,
                value: 10,
                isActive: true,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const applyDto = {
                code: 'SAVE10',
                orderSubtotal: 50,
                userId: 'user123',
            };
            const result = await discountService.applyDiscount(applyDto);
            expect(result.discountAmount).toBe(10);
            expect(result.finalAmount).toBe(40);
        });
        it('should apply free shipping discount', async () => {
            const mockDiscount = {
                id: '1',
                code: 'FREESHIP',
                type: discount_service_1.DiscountType.FREE_SHIPPING,
                value: 0,
                isActive: true,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const applyDto = {
                code: 'FREESHIP',
                orderSubtotal: 100,
                shippingCost: 10,
                userId: 'user123',
            };
            const result = await discountService.applyDiscount(applyDto);
            expect(result.freeShipping).toBe(true);
            expect(result.shippingDiscount).toBe(10);
        });
        it('should cap percentage discount at maximum amount', async () => {
            const mockDiscount = {
                id: '1',
                code: 'SAVE20MAX10',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                maxDiscountAmount: 10,
                isActive: true,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const applyDto = {
                code: 'SAVE20MAX10',
                orderSubtotal: 100, // 20% would be $20, but capped at $10
                userId: 'user123',
            };
            const result = await discountService.applyDiscount(applyDto);
            expect(result.discountAmount).toBe(10);
            expect(result.finalAmount).toBe(90);
        });
        it('should reject discount if order does not meet minimum purchase', async () => {
            const mockDiscount = {
                id: '1',
                code: 'MIN50',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 15,
                minPurchaseAmount: 50,
                isActive: true,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const applyDto = {
                code: 'MIN50',
                orderSubtotal: 30,
                userId: 'user123',
            };
            await expect(discountService.applyDiscount(applyDto)).rejects.toThrow(errors_1.BadRequestError);
            await expect(discountService.applyDiscount(applyDto)).rejects.toThrow('minimum purchase amount');
        });
        it('should not allow discount to exceed order subtotal', async () => {
            const mockDiscount = {
                id: '1',
                code: 'SAVE50',
                type: discount_service_1.DiscountType.FIXED_AMOUNT,
                value: 50,
                isActive: true,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const applyDto = {
                code: 'SAVE50',
                orderSubtotal: 30,
                userId: 'user123',
            };
            const result = await discountService.applyDiscount(applyDto);
            expect(result.discountAmount).toBe(30); // Capped at subtotal
            expect(result.finalAmount).toBe(0);
        });
        it('should increment usage count when discount is applied', async () => {
            const mockDiscount = {
                id: '1',
                code: 'SAVE20',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                isActive: true,
                usageCount: 5,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            mockDiscountRepository.incrementUsageCount.mockResolvedValue(undefined);
            const applyDto = {
                code: 'SAVE20',
                orderSubtotal: 100,
                userId: 'user123',
            };
            await discountService.applyDiscount(applyDto);
            expect(mockDiscountRepository.incrementUsageCount).toHaveBeenCalledWith('1', 'user123');
        });
        it('should reject discount if user has exceeded per-user limit', async () => {
            const mockDiscount = {
                id: '1',
                code: 'ONCE',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 10,
                maxUsagePerUser: 1,
                isActive: true,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            mockDiscountRepository.findByUserId.mockResolvedValue([
                { discountId: '1', userId: 'user123', usedAt: new Date() },
            ]);
            const applyDto = {
                code: 'ONCE',
                orderSubtotal: 100,
                userId: 'user123',
            };
            await expect(discountService.applyDiscount(applyDto)).rejects.toThrow(errors_1.BadRequestError);
            await expect(discountService.applyDiscount(applyDto)).rejects.toThrow('already used this discount');
        });
    });
    describe('getActiveDiscounts', () => {
        it('should return all active discounts', async () => {
            const mockDiscounts = [
                { id: '1', code: 'SAVE20', isActive: true, type: discount_service_1.DiscountType.PERCENTAGE, value: 20 },
                { id: '2', code: 'SAVE10', isActive: true, type: discount_service_1.DiscountType.FIXED_AMOUNT, value: 10 },
            ];
            mockDiscountRepository.findActive.mockResolvedValue(mockDiscounts);
            const result = await discountService.getActiveDiscounts();
            expect(result).toHaveLength(2);
            expect(result[0].code).toBe('SAVE20');
        });
    });
    describe('deactivateDiscount', () => {
        it('should deactivate a discount code', async () => {
            const mockDiscount = {
                id: '1',
                code: 'SAVE20',
                isActive: true,
            };
            mockDiscountRepository.findById.mockResolvedValue(mockDiscount);
            mockDiscountRepository.update.mockResolvedValue({ ...mockDiscount, isActive: false });
            const result = await discountService.deactivateDiscount('1');
            expect(result.isActive).toBe(false);
            expect(mockDiscountRepository.update).toHaveBeenCalledWith('1', { isActive: false });
        });
    });
    describe('getDiscountUsageStats', () => {
        it('should return usage statistics for a discount', async () => {
            const mockDiscount = {
                id: '1',
                code: 'SAVE20',
                usageCount: 150,
                maxUsageCount: 200,
            };
            mockDiscountRepository.findById.mockResolvedValue(mockDiscount);
            const result = await discountService.getDiscountUsageStats('1');
            expect(result.totalUsage).toBe(150);
            expect(result.remainingUsage).toBe(50);
            expect(result.usagePercentage).toBe(75);
        });
    });
    describe('calculateSavings', () => {
        it('should calculate total savings from discount', async () => {
            const mockDiscount = {
                id: '1',
                code: 'SAVE20',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                isActive: true,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const savings = await discountService.calculateSavings('SAVE20', 100);
            expect(savings).toBe(20);
        });
        it('should calculate savings for fixed amount discount', async () => {
            const mockDiscount = {
                id: '1',
                code: 'SAVE15',
                type: discount_service_1.DiscountType.FIXED_AMOUNT,
                value: 15,
                isActive: true,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const savings = await discountService.calculateSavings('SAVE15', 100);
            expect(savings).toBe(15);
        });
    });
    describe('deleteDiscount', () => {
        it('should delete a discount code', async () => {
            mockDiscountRepository.delete.mockResolvedValue(undefined);
            await discountService.deleteDiscount('1');
            expect(mockDiscountRepository.delete).toHaveBeenCalledWith('1');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXEFkYXB0aXZlX1Rlc3RpbmdcXHNyY1xcc2VydmljZXNcXHByb21vdGlvbnNcXHNlcnZpY2VzXFxkaXNjb3VudC5zZXJ2aWNlLnNwZWMudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7O0dBSUc7O0FBRUgseURBQXdHO0FBRXhHLHlDQUErQztBQUUvQyxRQUFRLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFO0lBQy9CLElBQUksZUFBZ0MsQ0FBQztJQUNyQyxJQUFJLHNCQUF1RCxDQUFDO0lBRTVELFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxzQkFBc0IsR0FBRztZQUN2QixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNqQixRQUFRLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNuQixVQUFVLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNyQixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNqQixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNqQixVQUFVLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNyQixtQkFBbUIsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQzlCLFlBQVksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1NBQ2pCLENBQUM7UUFFVCxlQUFlLEdBQUcsSUFBSSxrQ0FBZSxDQUFDLHNCQUFzQixDQUFDLENBQUM7SUFDaEUsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO1FBQzlCLEVBQUUsQ0FBQywwQ0FBMEMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUN4RCxNQUFNLFdBQVcsR0FBc0I7Z0JBQ3JDLElBQUksRUFBRSxRQUFRO2dCQUNkLElBQUksRUFBRSwrQkFBWSxDQUFDLFVBQVU7Z0JBQzdCLEtBQUssRUFBRSxFQUFFO2dCQUNULFdBQVcsRUFBRSxTQUFTO2dCQUN0QixTQUFTLEVBQUUsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDO2FBQ2xDLENBQUM7WUFFRixN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QyxvQkFBb0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNsRSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXEFkYXB0aXZlX1Rlc3RpbmdcXHNyY1xcc2VydmljZXNcXHByb21vdGlvbnNcXHNlcnZpY2VzXFxkaXNjb3VudC5zZXJ2aWNlLnNwZWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUREQ6IERpc2NvdW50L0NvdXBvbiBTZXJ2aWNlIFRlc3RzXG4gKlxuICogVGVzdGluZyBjb21wcmVoZW5zaXZlIGRpc2NvdW50IGFuZCBjb3Vwb24gZnVuY3Rpb25hbGl0eVxuICovXG5cbmltcG9ydCB7IERpc2NvdW50U2VydmljZSwgQ3JlYXRlRGlzY291bnREdG8sIERpc2NvdW50VHlwZSwgQXBwbHlEaXNjb3VudER0byB9IGZyb20gJy4vZGlzY291bnQuc2VydmljZSc7XG5pbXBvcnQgeyBEaXNjb3VudFJlcG9zaXRvcnkgfSBmcm9tICcuLi9yZXBvc2l0b3JpZXMvZGlzY291bnQucmVwb3NpdG9yeSc7XG5pbXBvcnQgeyBCYWRSZXF1ZXN0RXJyb3IgfSBmcm9tICdAbGlicy9lcnJvcnMnO1xuXG5kZXNjcmliZSgnRGlzY291bnRTZXJ2aWNlJywgKCkgPT4ge1xuICBsZXQgZGlzY291bnRTZXJ2aWNlOiBEaXNjb3VudFNlcnZpY2U7XG4gIGxldCBtb2NrRGlzY291bnRSZXBvc2l0b3J5OiBqZXN0Lk1vY2tlZDxEaXNjb3VudFJlcG9zaXRvcnk+O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkgPSB7XG4gICAgICBjcmVhdGU6IGplc3QuZm4oKSxcbiAgICAgIGZpbmRCeUlkOiBqZXN0LmZuKCksXG4gICAgICBmaW5kQnlDb2RlOiBqZXN0LmZuKCksXG4gICAgICB1cGRhdGU6IGplc3QuZm4oKSxcbiAgICAgIGRlbGV0ZTogamVzdC5mbigpLFxuICAgICAgZmluZEFjdGl2ZTogamVzdC5mbigpLFxuICAgICAgaW5jcmVtZW50VXNhZ2VDb3VudDogamVzdC5mbigpLFxuICAgICAgZmluZEJ5VXNlcklkOiBqZXN0LmZuKCksXG4gICAgfSBhcyBhbnk7XG5cbiAgICBkaXNjb3VudFNlcnZpY2UgPSBuZXcgRGlzY291bnRTZXJ2aWNlKG1vY2tEaXNjb3VudFJlcG9zaXRvcnkpO1xuICB9KTtcblxuICBkZXNjcmliZSgnY3JlYXRlRGlzY291bnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgYSBwZXJjZW50YWdlIGRpc2NvdW50IGNvZGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBkaXNjb3VudER0bzogQ3JlYXRlRGlzY291bnREdG8gPSB7XG4gICAgICAgIGNvZGU6ICdTQVZFMjAnLFxuICAgICAgICB0eXBlOiBEaXNjb3VudFR5cGUuUEVSQ0VOVEFHRSxcbiAgICAgICAgdmFsdWU6IDIwLFxuICAgICAgICBkZXNjcmlwdGlvbjogJzIwJSBvZmYnLFxuICAgICAgICBleHBpcmVzQXQ6IG5ldyBEYXRlKCcyMDI1LTEyLTMxJyksXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBtb2NrRGlzY291bnQgPSB7XG4gICAgICAgIGlkOiAnMScsXG4gICAgICAgIC4uLmRpc2NvdW50RHRvLFxuICAgICAgICB1c2FnZUNvdW50OiAwLFxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgfTtcblxuICAgICAgbW9ja0Rpc2NvdW50UmVwb3NpdG9yeS5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0Rpc2NvdW50IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRpc2NvdW50U2VydmljZS5jcmVhdGVEaXNjb3VudChkaXNjb3VudER0byk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja0Rpc2NvdW50KTtcbiAgICAgIGV4cGVjdChtb2NrRGlzY291bnRSZXBvc2l0b3J5LmNyZWF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBjb2RlOiAnU0FWRTIwJyxcbiAgICAgICAgICB0eXBlOiBEaXNjb3VudFR5cGUuUEVSQ0VOVEFHRSxcbiAgICAgICAgICB2YWx1ZTogMjAsXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgYSBmaXhlZCBhbW91bnQgZGlzY291bnQgY29kZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRpc2NvdW50RHRvOiBDcmVhdGVEaXNjb3VudER0byA9IHtcbiAgICAgICAgY29kZTogJ1NBVkUxMCcsXG4gICAgICAgIHR5cGU6IERpc2NvdW50VHlwZS5GSVhFRF9BTU9VTlQsXG4gICAgICAgIHZhbHVlOiAxMCxcbiAgICAgICAgZGVzY3JpcHRpb246ICckMTAgb2ZmJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tEaXNjb3VudCA9IHsgaWQ6ICcxJywgLi4uZGlzY291bnREdG8sIHVzYWdlQ291bnQ6IDAsIGlzQWN0aXZlOiB0cnVlIH07XG4gICAgICBtb2NrRGlzY291bnRSZXBvc2l0b3J5LmNyZWF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnQgYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGlzY291bnRTZXJ2aWNlLmNyZWF0ZURpc2NvdW50KGRpc2NvdW50RHRvKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC50eXBlKS50b0JlKERpc2NvdW50VHlwZS5GSVhFRF9BTU9VTlQpO1xuICAgICAgZXhwZWN0KHJlc3VsdC52YWx1ZSkudG9CZSgxMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBhIGZyZWUgc2hpcHBpbmcgZGlzY291bnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBkaXNjb3VudER0bzogQ3JlYXRlRGlzY291bnREdG8gPSB7XG4gICAgICAgIGNvZGU6ICdGUkVFU0hJUCcsXG4gICAgICAgIHR5cGU6IERpc2NvdW50VHlwZS5GUkVFX1NISVBQSU5HLFxuICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgZGVzY3JpcHRpb246ICdGcmVlIHNoaXBwaW5nJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tEaXNjb3VudCA9IHsgaWQ6ICcxJywgLi4uZGlzY291bnREdG8sIHVzYWdlQ291bnQ6IDAsIGlzQWN0aXZlOiB0cnVlIH07XG4gICAgICBtb2NrRGlzY291bnRSZXBvc2l0b3J5LmNyZWF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnQgYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGlzY291bnRTZXJ2aWNlLmNyZWF0ZURpc2NvdW50KGRpc2NvdW50RHRvKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC50eXBlKS50b0JlKERpc2NvdW50VHlwZS5GUkVFX1NISVBQSU5HKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IHBlcmNlbnRhZ2UgZGlzY291bnQgb3ZlciAxMDAlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGlzY291bnREdG86IENyZWF0ZURpc2NvdW50RHRvID0ge1xuICAgICAgICBjb2RlOiAnSU5WQUxJRCcsXG4gICAgICAgIHR5cGU6IERpc2NvdW50VHlwZS5QRVJDRU5UQUdFLFxuICAgICAgICB2YWx1ZTogMTUwLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0ludmFsaWQgZGlzY291bnQnLFxuICAgICAgfTtcblxuICAgICAgYXdhaXQgZXhwZWN0KGRpc2NvdW50U2VydmljZS5jcmVhdGVEaXNjb3VudChkaXNjb3VudER0bykpLnJlamVjdHMudG9UaHJvdyhCYWRSZXF1ZXN0RXJyb3IpO1xuICAgICAgYXdhaXQgZXhwZWN0KGRpc2NvdW50U2VydmljZS5jcmVhdGVEaXNjb3VudChkaXNjb3VudER0bykpLnJlamVjdHMudG9UaHJvdygnUGVyY2VudGFnZSBkaXNjb3VudCBjYW5ub3QgZXhjZWVkIDEwMCUnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IG5lZ2F0aXZlIGRpc2NvdW50IHZhbHVlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRpc2NvdW50RHRvOiBDcmVhdGVEaXNjb3VudER0byA9IHtcbiAgICAgICAgY29kZTogJ0lOVkFMSUQnLFxuICAgICAgICB0eXBlOiBEaXNjb3VudFR5cGUuRklYRURfQU1PVU5ULFxuICAgICAgICB2YWx1ZTogLTEwLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0ludmFsaWQgZGlzY291bnQnLFxuICAgICAgfTtcblxuICAgICAgYXdhaXQgZXhwZWN0KGRpc2NvdW50U2VydmljZS5jcmVhdGVEaXNjb3VudChkaXNjb3VudER0bykpLnJlamVjdHMudG9UaHJvdyhCYWRSZXF1ZXN0RXJyb3IpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgZGlzY291bnQgd2l0aCBtaW5pbXVtIHB1cmNoYXNlIHJlcXVpcmVtZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGlzY291bnREdG86IENyZWF0ZURpc2NvdW50RHRvID0ge1xuICAgICAgICBjb2RlOiAnTUlONTAnLFxuICAgICAgICB0eXBlOiBEaXNjb3VudFR5cGUuUEVSQ0VOVEFHRSxcbiAgICAgICAgdmFsdWU6IDE1LFxuICAgICAgICBkZXNjcmlwdGlvbjogJzE1JSBvZmYgb3JkZXJzIG92ZXIgJDUwJyxcbiAgICAgICAgbWluUHVyY2hhc2VBbW91bnQ6IDUwLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0geyBpZDogJzEnLCAuLi5kaXNjb3VudER0bywgdXNhZ2VDb3VudDogMCwgaXNBY3RpdmU6IHRydWUgfTtcbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tEaXNjb3VudCBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkaXNjb3VudFNlcnZpY2UuY3JlYXRlRGlzY291bnQoZGlzY291bnREdG8pO1xuXG4gICAgICBleHBlY3QocmVzdWx0Lm1pblB1cmNoYXNlQW1vdW50KS50b0JlKDUwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY3JlYXRlIGRpc2NvdW50IHdpdGggbWF4aW11bSBkaXNjb3VudCBjYXAnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBkaXNjb3VudER0bzogQ3JlYXRlRGlzY291bnREdG8gPSB7XG4gICAgICAgIGNvZGU6ICdTQVZFMjBNQVgxMCcsXG4gICAgICAgIHR5cGU6IERpc2NvdW50VHlwZS5QRVJDRU5UQUdFLFxuICAgICAgICB2YWx1ZTogMjAsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnMjAlIG9mZiAobWF4ICQxMCknLFxuICAgICAgICBtYXhEaXNjb3VudEFtb3VudDogMTAsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBtb2NrRGlzY291bnQgPSB7IGlkOiAnMScsIC4uLmRpc2NvdW50RHRvLCB1c2FnZUNvdW50OiAwLCBpc0FjdGl2ZTogdHJ1ZSB9O1xuICAgICAgbW9ja0Rpc2NvdW50UmVwb3NpdG9yeS5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0Rpc2NvdW50IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRpc2NvdW50U2VydmljZS5jcmVhdGVEaXNjb3VudChkaXNjb3VudER0byk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQubWF4RGlzY291bnRBbW91bnQpLnRvQmUoMTApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgZGlzY291bnQgd2l0aCB1c2FnZSBsaW1pdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRpc2NvdW50RHRvOiBDcmVhdGVEaXNjb3VudER0byA9IHtcbiAgICAgICAgY29kZTogJ0xJTUlURUQxMDAnLFxuICAgICAgICB0eXBlOiBEaXNjb3VudFR5cGUuRklYRURfQU1PVU5ULFxuICAgICAgICB2YWx1ZTogNSxcbiAgICAgICAgZGVzY3JpcHRpb246ICdMaW1pdGVkIHRvIDEwMCB1c2VzJyxcbiAgICAgICAgbWF4VXNhZ2VDb3VudDogMTAwLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0geyBpZDogJzEnLCAuLi5kaXNjb3VudER0bywgdXNhZ2VDb3VudDogMCwgaXNBY3RpdmU6IHRydWUgfTtcbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tEaXNjb3VudCBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkaXNjb3VudFNlcnZpY2UuY3JlYXRlRGlzY291bnQoZGlzY291bnREdG8pO1xuXG4gICAgICBleHBlY3QocmVzdWx0Lm1heFVzYWdlQ291bnQpLnRvQmUoMTAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY3JlYXRlIGRpc2NvdW50IHdpdGggcGVyLXVzZXIgbGltaXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBkaXNjb3VudER0bzogQ3JlYXRlRGlzY291bnREdG8gPSB7XG4gICAgICAgIGNvZGU6ICdPTkNFJyxcbiAgICAgICAgdHlwZTogRGlzY291bnRUeXBlLlBFUkNFTlRBR0UsXG4gICAgICAgIHZhbHVlOiAxMCxcbiAgICAgICAgZGVzY3JpcHRpb246ICdPbmUgdGltZSB1c2UgcGVyIGN1c3RvbWVyJyxcbiAgICAgICAgbWF4VXNhZ2VQZXJVc2VyOiAxLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0geyBpZDogJzEnLCAuLi5kaXNjb3VudER0bywgdXNhZ2VDb3VudDogMCwgaXNBY3RpdmU6IHRydWUgfTtcbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tEaXNjb3VudCBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkaXNjb3VudFNlcnZpY2UuY3JlYXRlRGlzY291bnQoZGlzY291bnREdG8pO1xuXG4gICAgICBleHBlY3QocmVzdWx0Lm1heFVzYWdlUGVyVXNlcikudG9CZSgxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm9ybWFsaXplIGRpc2NvdW50IGNvZGUgdG8gdXBwZXJjYXNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGlzY291bnREdG86IENyZWF0ZURpc2NvdW50RHRvID0ge1xuICAgICAgICBjb2RlOiAnc2F2ZTIwJyxcbiAgICAgICAgdHlwZTogRGlzY291bnRUeXBlLlBFUkNFTlRBR0UsXG4gICAgICAgIHZhbHVlOiAyMCxcbiAgICAgICAgZGVzY3JpcHRpb246ICcyMCUgb2ZmJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tEaXNjb3VudCA9IHsgaWQ6ICcxJywgLi4uZGlzY291bnREdG8sIHVzYWdlQ291bnQ6IDAsIGlzQWN0aXZlOiB0cnVlIH07XG4gICAgICBtb2NrRGlzY291bnRSZXBvc2l0b3J5LmNyZWF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnQgYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGlzY291bnRTZXJ2aWNlLmNyZWF0ZURpc2NvdW50KGRpc2NvdW50RHRvKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jb2RlKS50b0JlKCdTQVZFMjAnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3ZhbGlkYXRlRGlzY291bnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBhbiBhY3RpdmUgZGlzY291bnQgY29kZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tEaXNjb3VudCA9IHtcbiAgICAgICAgaWQ6ICcxJyxcbiAgICAgICAgY29kZTogJ1ZBTElEJyxcbiAgICAgICAgdHlwZTogRGlzY291bnRUeXBlLlBFUkNFTlRBR0UsXG4gICAgICAgIHZhbHVlOiAyMCxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgIHVzYWdlQ291bnQ6IDUsXG4gICAgICAgIGV4cGlyZXNBdDogbmV3IERhdGUoJzIwMjUtMTItMzEnKSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuZmluZEJ5Q29kZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnQgYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGlzY291bnRTZXJ2aWNlLnZhbGlkYXRlRGlzY291bnQoJ1ZBTElEJyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZGlzY291bnQpLnRvRXF1YWwobW9ja0Rpc2NvdW50KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IG5vbi1leGlzdGVudCBkaXNjb3VudCBjb2RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0Rpc2NvdW50UmVwb3NpdG9yeS5maW5kQnlDb2RlLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkaXNjb3VudFNlcnZpY2UudmFsaWRhdGVEaXNjb3VudCgnSU5WQUxJRCcpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5yZWFzb24pLnRvQmUoJ0Rpc2NvdW50IGNvZGUgbm90IGZvdW5kJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlamVjdCBpbmFjdGl2ZSBkaXNjb3VudCBjb2RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0ge1xuICAgICAgICBpZDogJzEnLFxuICAgICAgICBjb2RlOiAnSU5BQ1RJVkUnLFxuICAgICAgICB0eXBlOiBEaXNjb3VudFR5cGUuUEVSQ0VOVEFHRSxcbiAgICAgICAgdmFsdWU6IDIwLFxuICAgICAgICBpc0FjdGl2ZTogZmFsc2UsXG4gICAgICB9O1xuXG4gICAgICBtb2NrRGlzY291bnRSZXBvc2l0b3J5LmZpbmRCeUNvZGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0Rpc2NvdW50IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRpc2NvdW50U2VydmljZS52YWxpZGF0ZURpc2NvdW50KCdJTkFDVElWRScpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5yZWFzb24pLnRvQmUoJ0Rpc2NvdW50IGNvZGUgaXMgbm90IGFjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgZXhwaXJlZCBkaXNjb3VudCBjb2RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0ge1xuICAgICAgICBpZDogJzEnLFxuICAgICAgICBjb2RlOiAnRVhQSVJFRCcsXG4gICAgICAgIHR5cGU6IERpc2NvdW50VHlwZS5QRVJDRU5UQUdFLFxuICAgICAgICB2YWx1ZTogMjAsXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICBleHBpcmVzQXQ6IG5ldyBEYXRlKCcyMDIwLTAxLTAxJyksXG4gICAgICB9O1xuXG4gICAgICBtb2NrRGlzY291bnRSZXBvc2l0b3J5LmZpbmRCeUNvZGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0Rpc2NvdW50IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRpc2NvdW50U2VydmljZS52YWxpZGF0ZURpc2NvdW50KCdFWFBJUkVEJyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LnJlYXNvbikudG9CZSgnRGlzY291bnQgY29kZSBoYXMgZXhwaXJlZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgZGlzY291bnQgdGhhdCBoYXMgbm90IHN0YXJ0ZWQgeWV0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0ge1xuICAgICAgICBpZDogJzEnLFxuICAgICAgICBjb2RlOiAnRlVUVVJFJyxcbiAgICAgICAgdHlwZTogRGlzY291bnRUeXBlLlBFUkNFTlRBR0UsXG4gICAgICAgIHZhbHVlOiAyMCxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgIHN0YXJ0c0F0OiBuZXcgRGF0ZSgnMjAzMC0wMS0wMScpLFxuICAgICAgfTtcblxuICAgICAgbW9ja0Rpc2NvdW50UmVwb3NpdG9yeS5maW5kQnlDb2RlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tEaXNjb3VudCBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkaXNjb3VudFNlcnZpY2UudmFsaWRhdGVEaXNjb3VudCgnRlVUVVJFJyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LnJlYXNvbikudG9CZSgnRGlzY291bnQgY29kZSBpcyBub3QgeWV0IGFjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgZGlzY291bnQgdGhhdCByZWFjaGVkIG1heCB1c2FnZSBsaW1pdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tEaXNjb3VudCA9IHtcbiAgICAgICAgaWQ6ICcxJyxcbiAgICAgICAgY29kZTogJ01BWEVEJyxcbiAgICAgICAgdHlwZTogRGlzY291bnRUeXBlLlBFUkNFTlRBR0UsXG4gICAgICAgIHZhbHVlOiAyMCxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgIHVzYWdlQ291bnQ6IDEwMCxcbiAgICAgICAgbWF4VXNhZ2VDb3VudDogMTAwLFxuICAgICAgfTtcblxuICAgICAgbW9ja0Rpc2NvdW50UmVwb3NpdG9yeS5maW5kQnlDb2RlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tEaXNjb3VudCBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkaXNjb3VudFNlcnZpY2UudmFsaWRhdGVEaXNjb3VudCgnTUFYRUQnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1ZhbGlkKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQucmVhc29uKS50b0JlKCdEaXNjb3VudCBjb2RlIGhhcyByZWFjaGVkIG1heGltdW0gdXNhZ2UgbGltaXQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FwcGx5RGlzY291bnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhcHBseSBwZXJjZW50YWdlIGRpc2NvdW50IHRvIG9yZGVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0ge1xuICAgICAgICBpZDogJzEnLFxuICAgICAgICBjb2RlOiAnU0FWRTIwJyxcbiAgICAgICAgdHlwZTogRGlzY291bnRUeXBlLlBFUkNFTlRBR0UsXG4gICAgICAgIHZhbHVlOiAyMCxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICB9O1xuXG4gICAgICBtb2NrRGlzY291bnRSZXBvc2l0b3J5LmZpbmRCeUNvZGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0Rpc2NvdW50IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IGFwcGx5RHRvOiBBcHBseURpc2NvdW50RHRvID0ge1xuICAgICAgICBjb2RlOiAnU0FWRTIwJyxcbiAgICAgICAgb3JkZXJTdWJ0b3RhbDogMTAwLFxuICAgICAgICB1c2VySWQ6ICd1c2VyMTIzJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRpc2NvdW50U2VydmljZS5hcHBseURpc2NvdW50KGFwcGx5RHRvKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5kaXNjb3VudEFtb3VudCkudG9CZSgyMCk7XG4gICAgICBleHBlY3QocmVzdWx0LmZpbmFsQW1vdW50KS50b0JlKDgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYXBwbHkgZml4ZWQgYW1vdW50IGRpc2NvdW50IHRvIG9yZGVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0ge1xuICAgICAgICBpZDogJzEnLFxuICAgICAgICBjb2RlOiAnU0FWRTEwJyxcbiAgICAgICAgdHlwZTogRGlzY291bnRUeXBlLkZJWEVEX0FNT1VOVCxcbiAgICAgICAgdmFsdWU6IDEwLFxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuZmluZEJ5Q29kZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnQgYXMgYW55KTtcblxuICAgICAgY29uc3QgYXBwbHlEdG86IEFwcGx5RGlzY291bnREdG8gPSB7XG4gICAgICAgIGNvZGU6ICdTQVZFMTAnLFxuICAgICAgICBvcmRlclN1YnRvdGFsOiA1MCxcbiAgICAgICAgdXNlcklkOiAndXNlcjEyMycsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkaXNjb3VudFNlcnZpY2UuYXBwbHlEaXNjb3VudChhcHBseUR0byk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuZGlzY291bnRBbW91bnQpLnRvQmUoMTApO1xuICAgICAgZXhwZWN0KHJlc3VsdC5maW5hbEFtb3VudCkudG9CZSg0MCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFwcGx5IGZyZWUgc2hpcHBpbmcgZGlzY291bnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRGlzY291bnQgPSB7XG4gICAgICAgIGlkOiAnMScsXG4gICAgICAgIGNvZGU6ICdGUkVFU0hJUCcsXG4gICAgICAgIHR5cGU6IERpc2NvdW50VHlwZS5GUkVFX1NISVBQSU5HLFxuICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICB9O1xuXG4gICAgICBtb2NrRGlzY291bnRSZXBvc2l0b3J5LmZpbmRCeUNvZGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0Rpc2NvdW50IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IGFwcGx5RHRvOiBBcHBseURpc2NvdW50RHRvID0ge1xuICAgICAgICBjb2RlOiAnRlJFRVNISVAnLFxuICAgICAgICBvcmRlclN1YnRvdGFsOiAxMDAsXG4gICAgICAgIHNoaXBwaW5nQ29zdDogMTAsXG4gICAgICAgIHVzZXJJZDogJ3VzZXIxMjMnLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGlzY291bnRTZXJ2aWNlLmFwcGx5RGlzY291bnQoYXBwbHlEdG8pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmZyZWVTaGlwcGluZykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc2hpcHBpbmdEaXNjb3VudCkudG9CZSgxMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNhcCBwZXJjZW50YWdlIGRpc2NvdW50IGF0IG1heGltdW0gYW1vdW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0ge1xuICAgICAgICBpZDogJzEnLFxuICAgICAgICBjb2RlOiAnU0FWRTIwTUFYMTAnLFxuICAgICAgICB0eXBlOiBEaXNjb3VudFR5cGUuUEVSQ0VOVEFHRSxcbiAgICAgICAgdmFsdWU6IDIwLFxuICAgICAgICBtYXhEaXNjb3VudEFtb3VudDogMTAsXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgfTtcblxuICAgICAgbW9ja0Rpc2NvdW50UmVwb3NpdG9yeS5maW5kQnlDb2RlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tEaXNjb3VudCBhcyBhbnkpO1xuXG4gICAgICBjb25zdCBhcHBseUR0bzogQXBwbHlEaXNjb3VudER0byA9IHtcbiAgICAgICAgY29kZTogJ1NBVkUyME1BWDEwJyxcbiAgICAgICAgb3JkZXJTdWJ0b3RhbDogMTAwLCAvLyAyMCUgd291bGQgYmUgJDIwLCBidXQgY2FwcGVkIGF0ICQxMFxuICAgICAgICB1c2VySWQ6ICd1c2VyMTIzJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRpc2NvdW50U2VydmljZS5hcHBseURpc2NvdW50KGFwcGx5RHRvKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5kaXNjb3VudEFtb3VudCkudG9CZSgxMCk7XG4gICAgICBleHBlY3QocmVzdWx0LmZpbmFsQW1vdW50KS50b0JlKDkwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGRpc2NvdW50IGlmIG9yZGVyIGRvZXMgbm90IG1lZXQgbWluaW11bSBwdXJjaGFzZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tEaXNjb3VudCA9IHtcbiAgICAgICAgaWQ6ICcxJyxcbiAgICAgICAgY29kZTogJ01JTjUwJyxcbiAgICAgICAgdHlwZTogRGlzY291bnRUeXBlLlBFUkNFTlRBR0UsXG4gICAgICAgIHZhbHVlOiAxNSxcbiAgICAgICAgbWluUHVyY2hhc2VBbW91bnQ6IDUwLFxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuZmluZEJ5Q29kZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnQgYXMgYW55KTtcblxuICAgICAgY29uc3QgYXBwbHlEdG86IEFwcGx5RGlzY291bnREdG8gPSB7XG4gICAgICAgIGNvZGU6ICdNSU41MCcsXG4gICAgICAgIG9yZGVyU3VidG90YWw6IDMwLFxuICAgICAgICB1c2VySWQ6ICd1c2VyMTIzJyxcbiAgICAgIH07XG5cbiAgICAgIGF3YWl0IGV4cGVjdChkaXNjb3VudFNlcnZpY2UuYXBwbHlEaXNjb3VudChhcHBseUR0bykpLnJlamVjdHMudG9UaHJvdyhCYWRSZXF1ZXN0RXJyb3IpO1xuICAgICAgYXdhaXQgZXhwZWN0KGRpc2NvdW50U2VydmljZS5hcHBseURpc2NvdW50KGFwcGx5RHRvKSkucmVqZWN0cy50b1Rocm93KCdtaW5pbXVtIHB1cmNoYXNlIGFtb3VudCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgYWxsb3cgZGlzY291bnQgdG8gZXhjZWVkIG9yZGVyIHN1YnRvdGFsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0ge1xuICAgICAgICBpZDogJzEnLFxuICAgICAgICBjb2RlOiAnU0FWRTUwJyxcbiAgICAgICAgdHlwZTogRGlzY291bnRUeXBlLkZJWEVEX0FNT1VOVCxcbiAgICAgICAgdmFsdWU6IDUwLFxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuZmluZEJ5Q29kZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnQgYXMgYW55KTtcblxuICAgICAgY29uc3QgYXBwbHlEdG86IEFwcGx5RGlzY291bnREdG8gPSB7XG4gICAgICAgIGNvZGU6ICdTQVZFNTAnLFxuICAgICAgICBvcmRlclN1YnRvdGFsOiAzMCxcbiAgICAgICAgdXNlcklkOiAndXNlcjEyMycsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkaXNjb3VudFNlcnZpY2UuYXBwbHlEaXNjb3VudChhcHBseUR0byk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuZGlzY291bnRBbW91bnQpLnRvQmUoMzApOyAvLyBDYXBwZWQgYXQgc3VidG90YWxcbiAgICAgIGV4cGVjdChyZXN1bHQuZmluYWxBbW91bnQpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGluY3JlbWVudCB1c2FnZSBjb3VudCB3aGVuIGRpc2NvdW50IGlzIGFwcGxpZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRGlzY291bnQgPSB7XG4gICAgICAgIGlkOiAnMScsXG4gICAgICAgIGNvZGU6ICdTQVZFMjAnLFxuICAgICAgICB0eXBlOiBEaXNjb3VudFR5cGUuUEVSQ0VOVEFHRSxcbiAgICAgICAgdmFsdWU6IDIwLFxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgdXNhZ2VDb3VudDogNSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuZmluZEJ5Q29kZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnQgYXMgYW55KTtcbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuaW5jcmVtZW50VXNhZ2VDb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuXG4gICAgICBjb25zdCBhcHBseUR0bzogQXBwbHlEaXNjb3VudER0byA9IHtcbiAgICAgICAgY29kZTogJ1NBVkUyMCcsXG4gICAgICAgIG9yZGVyU3VidG90YWw6IDEwMCxcbiAgICAgICAgdXNlcklkOiAndXNlcjEyMycsXG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBkaXNjb3VudFNlcnZpY2UuYXBwbHlEaXNjb3VudChhcHBseUR0byk7XG5cbiAgICAgIGV4cGVjdChtb2NrRGlzY291bnRSZXBvc2l0b3J5LmluY3JlbWVudFVzYWdlQ291bnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcxJywgJ3VzZXIxMjMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGRpc2NvdW50IGlmIHVzZXIgaGFzIGV4Y2VlZGVkIHBlci11c2VyIGxpbWl0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0ge1xuICAgICAgICBpZDogJzEnLFxuICAgICAgICBjb2RlOiAnT05DRScsXG4gICAgICAgIHR5cGU6IERpc2NvdW50VHlwZS5QRVJDRU5UQUdFLFxuICAgICAgICB2YWx1ZTogMTAsXG4gICAgICAgIG1heFVzYWdlUGVyVXNlcjogMSxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICB9O1xuXG4gICAgICBtb2NrRGlzY291bnRSZXBvc2l0b3J5LmZpbmRCeUNvZGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0Rpc2NvdW50IGFzIGFueSk7XG4gICAgICBtb2NrRGlzY291bnRSZXBvc2l0b3J5LmZpbmRCeVVzZXJJZC5tb2NrUmVzb2x2ZWRWYWx1ZShbXG4gICAgICAgIHsgZGlzY291bnRJZDogJzEnLCB1c2VySWQ6ICd1c2VyMTIzJywgdXNlZEF0OiBuZXcgRGF0ZSgpIH0sXG4gICAgICBdIGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IGFwcGx5RHRvOiBBcHBseURpc2NvdW50RHRvID0ge1xuICAgICAgICBjb2RlOiAnT05DRScsXG4gICAgICAgIG9yZGVyU3VidG90YWw6IDEwMCxcbiAgICAgICAgdXNlcklkOiAndXNlcjEyMycsXG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBleHBlY3QoZGlzY291bnRTZXJ2aWNlLmFwcGx5RGlzY291bnQoYXBwbHlEdG8pKS5yZWplY3RzLnRvVGhyb3coQmFkUmVxdWVzdEVycm9yKTtcbiAgICAgIGF3YWl0IGV4cGVjdChkaXNjb3VudFNlcnZpY2UuYXBwbHlEaXNjb3VudChhcHBseUR0bykpLnJlamVjdHMudG9UaHJvdygnYWxyZWFkeSB1c2VkIHRoaXMgZGlzY291bnQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldEFjdGl2ZURpc2NvdW50cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBhbGwgYWN0aXZlIGRpc2NvdW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tEaXNjb3VudHMgPSBbXG4gICAgICAgIHsgaWQ6ICcxJywgY29kZTogJ1NBVkUyMCcsIGlzQWN0aXZlOiB0cnVlLCB0eXBlOiBEaXNjb3VudFR5cGUuUEVSQ0VOVEFHRSwgdmFsdWU6IDIwIH0sXG4gICAgICAgIHsgaWQ6ICcyJywgY29kZTogJ1NBVkUxMCcsIGlzQWN0aXZlOiB0cnVlLCB0eXBlOiBEaXNjb3VudFR5cGUuRklYRURfQU1PVU5ULCB2YWx1ZTogMTAgfSxcbiAgICAgIF07XG5cbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuZmluZEFjdGl2ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnRzIGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRpc2NvdW50U2VydmljZS5nZXRBY3RpdmVEaXNjb3VudHMoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXS5jb2RlKS50b0JlKCdTQVZFMjAnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2RlYWN0aXZhdGVEaXNjb3VudCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRlYWN0aXZhdGUgYSBkaXNjb3VudCBjb2RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0ge1xuICAgICAgICBpZDogJzEnLFxuICAgICAgICBjb2RlOiAnU0FWRTIwJyxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICB9O1xuXG4gICAgICBtb2NrRGlzY291bnRSZXBvc2l0b3J5LmZpbmRCeUlkLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tEaXNjb3VudCBhcyBhbnkpO1xuICAgICAgbW9ja0Rpc2NvdW50UmVwb3NpdG9yeS51cGRhdGUubW9ja1Jlc29sdmVkVmFsdWUoeyAuLi5tb2NrRGlzY291bnQsIGlzQWN0aXZlOiBmYWxzZSB9IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRpc2NvdW50U2VydmljZS5kZWFjdGl2YXRlRGlzY291bnQoJzEnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc0FjdGl2ZSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QobW9ja0Rpc2NvdW50UmVwb3NpdG9yeS51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcxJywgeyBpc0FjdGl2ZTogZmFsc2UgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXREaXNjb3VudFVzYWdlU3RhdHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdXNhZ2Ugc3RhdGlzdGljcyBmb3IgYSBkaXNjb3VudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tEaXNjb3VudCA9IHtcbiAgICAgICAgaWQ6ICcxJyxcbiAgICAgICAgY29kZTogJ1NBVkUyMCcsXG4gICAgICAgIHVzYWdlQ291bnQ6IDE1MCxcbiAgICAgICAgbWF4VXNhZ2VDb3VudDogMjAwLFxuICAgICAgfTtcblxuICAgICAgbW9ja0Rpc2NvdW50UmVwb3NpdG9yeS5maW5kQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnQgYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGlzY291bnRTZXJ2aWNlLmdldERpc2NvdW50VXNhZ2VTdGF0cygnMScpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnRvdGFsVXNhZ2UpLnRvQmUoMTUwKTtcbiAgICAgIGV4cGVjdChyZXN1bHQucmVtYWluaW5nVXNhZ2UpLnRvQmUoNTApO1xuICAgICAgZXhwZWN0KHJlc3VsdC51c2FnZVBlcmNlbnRhZ2UpLnRvQmUoNzUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY2FsY3VsYXRlU2F2aW5ncycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSB0b3RhbCBzYXZpbmdzIGZyb20gZGlzY291bnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRGlzY291bnQgPSB7XG4gICAgICAgIGlkOiAnMScsXG4gICAgICAgIGNvZGU6ICdTQVZFMjAnLFxuICAgICAgICB0eXBlOiBEaXNjb3VudFR5cGUuUEVSQ0VOVEFHRSxcbiAgICAgICAgdmFsdWU6IDIwLFxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuZmluZEJ5Q29kZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnQgYXMgYW55KTtcblxuICAgICAgY29uc3Qgc2F2aW5ncyA9IGF3YWl0IGRpc2NvdW50U2VydmljZS5jYWxjdWxhdGVTYXZpbmdzKCdTQVZFMjAnLCAxMDApO1xuXG4gICAgICBleHBlY3Qoc2F2aW5ncykudG9CZSgyMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBzYXZpbmdzIGZvciBmaXhlZCBhbW91bnQgZGlzY291bnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRGlzY291bnQgPSB7XG4gICAgICAgIGlkOiAnMScsXG4gICAgICAgIGNvZGU6ICdTQVZFMTUnLFxuICAgICAgICB0eXBlOiBEaXNjb3VudFR5cGUuRklYRURfQU1PVU5ULFxuICAgICAgICB2YWx1ZTogMTUsXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgfTtcblxuICAgICAgbW9ja0Rpc2NvdW50UmVwb3NpdG9yeS5maW5kQnlDb2RlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tEaXNjb3VudCBhcyBhbnkpO1xuXG4gICAgICBjb25zdCBzYXZpbmdzID0gYXdhaXQgZGlzY291bnRTZXJ2aWNlLmNhbGN1bGF0ZVNhdmluZ3MoJ1NBVkUxNScsIDEwMCk7XG5cbiAgICAgIGV4cGVjdChzYXZpbmdzKS50b0JlKDE1KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2RlbGV0ZURpc2NvdW50JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGVsZXRlIGEgZGlzY291bnQgY29kZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuZGVsZXRlLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG5cbiAgICAgIGF3YWl0IGRpc2NvdW50U2VydmljZS5kZWxldGVEaXNjb3VudCgnMScpO1xuXG4gICAgICBleHBlY3QobW9ja0Rpc2NvdW50UmVwb3NpdG9yeS5kZWxldGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcxJyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=