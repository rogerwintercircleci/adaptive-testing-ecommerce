{"file":"C:\\Adaptive_Testing\\src\\services\\order-processing\\services\\order.service.spec.ts","mappings":"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","names":[],"sources":["C:\\Adaptive_Testing\\src\\services\\order-processing\\services\\order.service.spec.ts"],"sourcesContent":["/**\n * TDD: Order Service Tests\n *\n * Testing order processing business logic\n */\n\nimport { OrderService } from './order.service';\nimport { OrderRepository } from '../repositories/order.repository';\nimport { Order, OrderStatus, PaymentStatus, OrderItem } from '../entities/order.entity';\nimport { NotFoundError } from '@libs/errors';\n\njest.mock('../repositories/order.repository');\n\ndescribe('OrderService', () => {\n  let orderService: OrderService;\n  let mockOrderRepository: jest.Mocked<OrderRepository>;\n\n  beforeEach(() => {\n    mockOrderRepository = {\n      create: jest.fn(),\n      findById: jest.fn(),\n      findByOrderNumber: jest.fn(),\n      findByUserId: jest.fn(),\n      updateStatus: jest.fn(),\n      updatePaymentStatus: jest.fn(),\n      cancelOrder: jest.fn(),\n      markAsShipped: jest.fn(),\n      markAsDelivered: jest.fn(),\n      getTotalRevenue: jest.fn(),\n      getOrderStats: jest.fn(),\n    } as unknown as jest.Mocked<OrderRepository>;\n\n    orderService = new OrderService(mockOrderRepository);\n  });\n\n  describe('createOrder', () => {\n    const validOrderData = {\n      userId: 'user-123',\n      items: [\n        {\n          productId: 'prod-1',\n          productName: 'Product 1',\n          productSku: 'SKU-001',\n          unitPrice: 50.00,\n          quantity: 2,\n          subtotal: 100.00,\n        },\n      ] as OrderItem[],\n      shippingAddress: {\n        street: '123 Main St',\n        city: 'New York',\n        state: 'NY',\n        postalCode: '10001',\n        country: 'USA',\n      },\n    };\n\n    it('should create order successfully', async () => {\n      const mockOrder = {\n        id: 'order-123',\n        orderNumber: 'ORD-2024-001',\n        ...validOrderData,\n        subtotal: 100.00,\n        total: 110.00,\n        status: OrderStatus.PENDING,\n      } as Order;\n\n      mockOrderRepository.create.mockResolvedValue(mockOrder);\n\n      const result = await orderService.createOrder(validOrderData);\n\n      expect(result).toEqual(mockOrder);\n      expect(result.orderNumber).toMatch(/^ORD-\\d{4}-\\d+$/);\n    });\n\n    it('should reject order with empty items', async () => {\n      const invalidData = {\n        ...validOrderData,\n        items: [],\n      };\n\n      await expect(orderService.createOrder(invalidData)).rejects.toThrow(\n        'Order must contain at least one item'\n      );\n    });\n\n    it('should reject order with negative quantity', async () => {\n      const invalidData = {\n        ...validOrderData,\n        items: [{\n          ...validOrderData.items[0],\n          quantity: -1,\n        }] as OrderItem[],\n      };\n\n      await expect(orderService.createOrder(invalidData)).rejects.toThrow(\n        'Item quantity must be positive'\n      );\n    });\n\n    it('should calculate subtotal correctly', async () => {\n      const orderData = {\n        ...validOrderData,\n        items: [\n          {\n            productId: 'prod-1',\n            productName: 'Product 1',\n            productSku: 'SKU-001',\n            unitPrice: 50.00,\n            quantity: 2,\n            subtotal: 100.00,\n          },\n          {\n            productId: 'prod-2',\n            productName: 'Product 2',\n            productSku: 'SKU-002',\n            unitPrice: 30.00,\n            quantity: 3,\n            subtotal: 90.00,\n          },\n        ] as OrderItem[],\n      };\n\n      mockOrderRepository.create.mockResolvedValue({\n        subtotal: 190.00,\n      } as Order);\n\n      await orderService.createOrder(orderData);\n\n      expect(mockOrderRepository.create).toHaveBeenCalledWith(\n        expect.objectContaining({\n          subtotal: 190.00,\n        })\n      );\n    });\n\n    it('should calculate tax at 10%', async () => {\n      mockOrderRepository.create.mockResolvedValue({\n        subtotal: 100.00,\n        taxAmount: 10.00,\n      } as Order);\n\n      await orderService.createOrder(validOrderData);\n\n      expect(mockOrderRepository.create).toHaveBeenCalledWith(\n        expect.objectContaining({\n          taxAmount: 10.00,\n        })\n      );\n    });\n\n    it('should add default shipping cost', async () => {\n      mockOrderRepository.create.mockResolvedValue({\n        shippingCost: 10.00,\n      } as Order);\n\n      await orderService.createOrder(validOrderData);\n\n      expect(mockOrderRepository.create).toHaveBeenCalledWith(\n        expect.objectContaining({\n          shippingCost: 10.00,\n        })\n      );\n    });\n  });\n\n  describe('getOrderById', () => {\n    it('should return order by ID', async () => {\n      const mockOrder = { id: 'order-123' } as Order;\n      mockOrderRepository.findById.mockResolvedValue(mockOrder);\n\n      const result = await orderService.getOrderById('order-123');\n\n      expect(result).toEqual(mockOrder);\n    });\n\n    it('should throw NotFoundError for non-existent order', async () => {\n      mockOrderRepository.findById.mockRejectedValue(\n        new NotFoundError('Order not found')\n      );\n\n      await expect(orderService.getOrderById('invalid')).rejects.toThrow(NotFoundError);\n    });\n  });\n\n  describe('getUserOrders', () => {\n    it('should return all orders for user', async () => {\n      const mockOrders = [\n        { id: '1', userId: 'user-123' },\n        { id: '2', userId: 'user-123' },\n      ] as Order[];\n\n      mockOrderRepository.findByUserId.mockResolvedValue(mockOrders);\n\n      const result = await orderService.getUserOrders('user-123');\n\n      expect(result).toEqual(mockOrders);\n    });\n\n    it('should return empty array for user with no orders', async () => {\n      mockOrderRepository.findByUserId.mockResolvedValue([]);\n\n      const result = await orderService.getUserOrders('user-456');\n\n      expect(result).toEqual([]);\n    });\n  });\n\n  describe('confirmOrder', () => {\n    it('should confirm pending order', async () => {\n      const mockOrder = {\n        id: 'order-123',\n        status: OrderStatus.CONFIRMED,\n      } as Order;\n\n      mockOrderRepository.updateStatus.mockResolvedValue(mockOrder);\n\n      const result = await orderService.confirmOrder('order-123');\n\n      expect(result.status).toBe(OrderStatus.CONFIRMED);\n      expect(mockOrderRepository.updateStatus).toHaveBeenCalledWith(\n        'order-123',\n        OrderStatus.CONFIRMED\n      );\n    });\n  });\n\n  describe('processPayment', () => {\n    it('should mark payment as successful', async () => {\n      const mockOrder = {\n        id: 'order-123',\n        paymentStatus: PaymentStatus.PAID,\n        paidAt: expect.any(Date),\n      } as Order;\n\n      mockOrderRepository.updatePaymentStatus.mockResolvedValue(mockOrder);\n\n      const result = await orderService.processPayment('order-123', 'payment-ref-123');\n\n      expect(result.paymentStatus).toBe(PaymentStatus.PAID);\n    });\n\n    it('should handle payment failure', async () => {\n      const mockOrder = {\n        id: 'order-123',\n        paymentStatus: PaymentStatus.FAILED,\n      } as Order;\n\n      mockOrderRepository.updatePaymentStatus.mockResolvedValue(mockOrder);\n\n      const result = await orderService.processPayment('order-123', null);\n\n      expect(result.paymentStatus).toBe(PaymentStatus.FAILED);\n    });\n  });\n\n  describe('shipOrder', () => {\n    it('should ship confirmed paid order', async () => {\n      const mockOrder = {\n        id: 'order-123',\n        status: OrderStatus.SHIPPED,\n        trackingNumber: 'TRACK-123',\n      } as Order;\n\n      mockOrderRepository.markAsShipped.mockResolvedValue(mockOrder);\n\n      const result = await orderService.shipOrder('order-123', 'TRACK-123');\n\n      expect(result.status).toBe(OrderStatus.SHIPPED);\n      expect(result.trackingNumber).toBe('TRACK-123');\n    });\n  });\n\n  describe('deliverOrder', () => {\n    it('should mark order as delivered', async () => {\n      const mockOrder = {\n        id: 'order-123',\n        status: OrderStatus.DELIVERED,\n        deliveredAt: expect.any(Date),\n      } as Order;\n\n      mockOrderRepository.markAsDelivered.mockResolvedValue(mockOrder);\n\n      const result = await orderService.deliverOrder('order-123');\n\n      expect(result.status).toBe(OrderStatus.DELIVERED);\n      expect(result.deliveredAt).toBeDefined();\n    });\n  });\n\n  describe('cancelOrder', () => {\n    it('should cancel pending order', async () => {\n      const mockOrder = {\n        id: 'order-123',\n        status: OrderStatus.PENDING,\n        canBeCancelled: () => true,\n      } as Order;\n\n      mockOrderRepository.findById.mockResolvedValue(mockOrder);\n      mockOrderRepository.cancelOrder.mockResolvedValue({\n        ...mockOrder,\n        status: OrderStatus.CANCELLED,\n        canBeCancelled: () => false,\n        calculateTotal: () => 0,\n        calculateSubtotal: () => 0,\n        isFulfilled: () => false,\n        isPaid: () => false,\n        getTotalItemsCount: () => 0,\n      } as Order);\n\n      const result = await orderService.cancelOrder('order-123');\n\n      expect(result.status).toBe(OrderStatus.CANCELLED);\n    });\n\n    it('should not cancel shipped order', async () => {\n      const mockOrder = {\n        id: 'order-123',\n        status: OrderStatus.SHIPPED,\n        canBeCancelled: () => false,\n      } as Order;\n\n      mockOrderRepository.findById.mockResolvedValue(mockOrder);\n\n      await expect(orderService.cancelOrder('order-123')).rejects.toThrow(\n        'Order cannot be cancelled in current status'\n      );\n    });\n  });\n\n  describe('applyDiscount', () => {\n    it('should apply valid discount code', async () => {\n      mockOrderRepository.findById.mockResolvedValue({\n        id: 'order-123',\n        subtotal: 100.00,\n      } as Order);\n\n      const result = await orderService.applyDiscount('order-123', 'SAVE20', 20.00);\n\n      expect(result.discountCode).toBe('SAVE20');\n      expect(result.discountAmount).toBe(20.00);\n    });\n\n    it('should reject discount greater than subtotal', async () => {\n      mockOrderRepository.findById.mockResolvedValue({\n        id: 'order-123',\n        subtotal: 50.00,\n      } as Order);\n\n      await expect(\n        orderService.applyDiscount('order-123', 'INVALID', 100.00)\n      ).rejects.toThrow('Discount amount cannot exceed order subtotal');\n    });\n\n    it('should reject negative discount', async () => {\n      mockOrderRepository.findById.mockResolvedValue({\n        id: 'order-123',\n        subtotal: 100.00,\n      } as Order);\n\n      await expect(\n        orderService.applyDiscount('order-123', 'INVALID', -10.00)\n      ).rejects.toThrow('Discount amount must be positive');\n    });\n  });\n\n  describe('getOrderTotal', () => {\n    it('should calculate total with tax and shipping', async () => {\n      const mockOrder = {\n        id: 'order-123',\n        subtotal: 100.00,\n        taxAmount: 10.00,\n        shippingCost: 15.00,\n        discountAmount: 0,\n      } as Order;\n\n      mockOrderRepository.findById.mockResolvedValue(mockOrder);\n\n      const total = await orderService.getOrderTotal('order-123');\n\n      expect(total).toBe(125.00);\n    });\n\n    it('should subtract discount from total', async () => {\n      const mockOrder = {\n        id: 'order-123',\n        subtotal: 100.00,\n        taxAmount: 10.00,\n        shippingCost: 15.00,\n        discountAmount: 25.00,\n      } as Order;\n\n      mockOrderRepository.findById.mockResolvedValue(mockOrder);\n\n      const total = await orderService.getOrderTotal('order-123');\n\n      expect(total).toBe(100.00);\n    });\n  });\n\n  describe('getTotalRevenue', () => {\n    it('should return total revenue from paid orders', async () => {\n      mockOrderRepository.getTotalRevenue.mockResolvedValue(15000.00);\n\n      const result = await orderService.getTotalRevenue();\n\n      expect(result).toBe(15000.00);\n    });\n  });\n\n  describe('getOrderStatistics', () => {\n    it('should return order stats by status', async () => {\n      const mockStats = [\n        { status: OrderStatus.PENDING, count: 10 },\n        { status: OrderStatus.DELIVERED, count: 45 },\n      ];\n\n      mockOrderRepository.getOrderStats.mockResolvedValue(mockStats);\n\n      const result = await orderService.getOrderStatistics();\n\n      expect(result).toEqual(mockStats);\n    });\n  });\n});\n"],"version":3}