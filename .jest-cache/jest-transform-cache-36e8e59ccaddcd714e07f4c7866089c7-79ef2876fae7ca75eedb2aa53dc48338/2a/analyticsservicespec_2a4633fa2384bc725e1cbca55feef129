95d869373c83e61965a6d5009bd07e41
"use strict";
/**
 * TDD: Analytics Service Tests
 *
 * Testing sales metrics, user behavior tracking, and reporting
 */
Object.defineProperty(exports, "__esModule", { value: true });
jest.mock('../../order-processing/repositories/order.repository');
jest.mock('../../product-catalog/repositories/product.repository');
jest.mock('../../user-management/repositories/user.repository');
const analytics_service_1 = require("./analytics.service");
describe('AnalyticsService', () => {
    let analyticsService;
    let mockOrderRepository;
    let mockProductRepository;
    let mockUserRepository;
    beforeEach(() => {
        mockOrderRepository = {
            getTotalRevenue: jest.fn(),
            getOrderStats: jest.fn(),
            findOrdersByDateRange: jest.fn(),
            count: jest.fn(),
        };
        mockProductRepository = {
            findTopSelling: jest.fn(),
            findTopRated: jest.fn(),
            findLowStock: jest.fn(),
            count: jest.fn(),
        };
        mockUserRepository = {
            count: jest.fn(),
            findByStatus: jest.fn(),
        };
        analyticsService = new analytics_service_1.AnalyticsService(mockOrderRepository, mockProductRepository, mockUserRepository);
    });
    describe('getTotalRevenue', () => {
        it('should return total revenue from all orders', async () => {
            mockOrderRepository.getTotalRevenue.mockResolvedValue(50000.00);
            const revenue = await analyticsService.getTotalRevenue();
            expect(revenue).toBe(50000.00);
        });
        it('should return zero when no orders', async () => {
            mockOrderRepository.getTotalRevenue.mockResolvedValue(0);
            const revenue = await analyticsService.getTotalRevenue();
            expect(revenue).toBe(0);
        });
    });
    describe('getRevenueByDateRange', () => {
        it('should calculate revenue for date range', async () => {
            const startDate = new Date('2024-01-01');
            const endDate = new Date('2024-01-31');
            mockOrderRepository.findOrdersByDateRange.mockResolvedValue([
                { total: 100.00 },
                { total: 200.00 },
                { total: 150.00 },
            ]);
            const revenue = await analyticsService.getRevenueByDateRange(startDate, endDate);
            expect(revenue).toBe(450.00);
        });
        it('should return zero for date range with no orders', async () => {
            mockOrderRepository.findOrdersByDateRange.mockResolvedValue([]);
            const revenue = await analyticsService.getRevenueByDateRange(new Date(), new Date());
            expect(revenue).toBe(0);
        });
    });
    describe('getAverageOrderValue', () => {
        it('should calculate average order value', async () => {
            mockOrderRepository.getTotalRevenue.mockResolvedValue(10000.00);
            mockOrderRepository.count.mockResolvedValue(100);
            const avg = await analyticsService.getAverageOrderValue();
            expect(avg).toBe(100.00);
        });
        it('should return zero when no orders', async () => {
            mockOrderRepository.getTotalRevenue.mockResolvedValue(0);
            mockOrderRepository.count.mockResolvedValue(0);
            const avg = await analyticsService.getAverageOrderValue();
            expect(avg).toBe(0);
        });
        it('should handle decimal values correctly', async () => {
            mockOrderRepository.getTotalRevenue.mockResolvedValue(1000.00);
            mockOrderRepository.count.mockResolvedValue(3);
            const avg = await analyticsService.getAverageOrderValue();
            expect(avg).toBeCloseTo(333.33, 2);
        });
    });
    describe('getTopSellingProducts', () => {
        it('should return top selling products', async () => {
            const mockProducts = [
                { id: '1', name: 'Product 1', soldCount: 1000 },
                { id: '2', name: 'Product 2', soldCount: 800 },
                { id: '3', name: 'Product 3', soldCount: 600 },
            ];
            mockProductRepository.findTopSelling.mockResolvedValue(mockProducts);
            const result = await analyticsService.getTopSellingProducts(10);
            expect(result).toEqual(mockProducts);
            expect(mockProductRepository.findTopSelling).toHaveBeenCalledWith(10);
        });
        it('should default to top 10 if no limit specified', async () => {
            mockProductRepository.findTopSelling.mockResolvedValue([]);
            await analyticsService.getTopSellingProducts();
            expect(mockProductRepository.findTopSelling).toHaveBeenCalledWith(10);
        });
    });
    describe('getTopRatedProducts', () => {
        it('should return top rated products', async () => {
            const mockProducts = [
                { id: '1', name: 'Product 1', rating: 4.9 },
                { id: '2', name: 'Product 2', rating: 4.8 },
            ];
            mockProductRepository.findTopRated.mockResolvedValue(mockProducts);
            const result = await analyticsService.getTopRatedProducts(5);
            expect(result).toEqual(mockProducts);
        });
    });
    describe('getLowStockAlert', () => {
        it('should return products with low stock', async () => {
            const mockProducts = [
                { id: '1', name: 'Product 1', inventory: 3 },
                { id: '2', name: 'Product 2', inventory: 5 },
            ];
            mockProductRepository.findLowStock.mockResolvedValue(mockProducts);
            const result = await analyticsService.getLowStockAlert(10);
            expect(result).toEqual(mockProducts);
        });
        it('should use default threshold of 10', async () => {
            mockProductRepository.findLowStock.mockResolvedValue([]);
            await analyticsService.getLowStockAlert();
            expect(mockProductRepository.findLowStock).toHaveBeenCalledWith(10);
        });
    });
    describe('getUserGrowthMetrics', () => {
        it('should calculate user growth rate', async () => {
            mockUserRepository.count.mockResolvedValueOnce(1000); // Current total
            mockUserRepository.count.mockResolvedValueOnce(100); // New this month
            const metrics = await analyticsService.getUserGrowthMetrics();
            expect(metrics.totalUsers).toBe(1000);
            expect(metrics.newUsersThisMonth).toBe(100);
            expect(metrics.growthRate).toBe(10); // 100/1000 * 100
        });
        it('should handle zero growth', async () => {
            mockUserRepository.count.mockResolvedValueOnce(1000);
            mockUserRepository.count.mockResolvedValueOnce(0);
            const metrics = await analyticsService.getUserGrowthMetrics();
            expect(metrics.growthRate).toBe(0);
        });
    });
    describe('getActiveUserCount', () => {
        it('should return count of active users', async () => {
            mockUserRepository.findByStatus.mockResolvedValue(Array(500).fill({}));
            const count = await analyticsService.getActiveUserCount();
            expect(count).toBe(500);
        });
    });
    describe('getSalesMetricsByPeriod', () => {
        it('should aggregate metrics for monthly period', async () => {
            const period = 'month';
            const mockOrders = [
                { createdAt: new Date('2024-01-15'), total: 100 },
                { createdAt: new Date('2024-01-20'), total: 200 },
                { createdAt: new Date('2024-02-05'), total: 150 },
            ];
            mockOrderRepository.findOrdersByDateRange.mockResolvedValue(mockOrders);
            const metrics = await analyticsService.getSalesMetricsByPeriod(period);
            expect(metrics).toBeDefined();
            expect(metrics.length).toBeGreaterThan(0);
        });
        it('should aggregate metrics for weekly period', async () => {
            const period = 'week';
            mockOrderRepository.findOrdersByDateRange.mockResolvedValue([]);
            const metrics = await analyticsService.getSalesMetricsByPeriod(period);
            expect(Array.isArray(metrics)).toBe(true);
        });
        it('should aggregate metrics for daily period', async () => {
            const period = 'day';
            mockOrderRepository.findOrdersByDateRange.mockResolvedValue([]);
            const metrics = await analyticsService.getSalesMetricsByPeriod(period);
            expect(Array.isArray(metrics)).toBe(true);
        });
    });
    describe('getConversionRate', () => {
        it('should calculate conversion rate', async () => {
            const result = await analyticsService.getConversionRate(1000, // visitors
            50 // orders
            );
            expect(result).toBe(5); // 50/1000 * 100
        });
        it('should return zero when no visitors', async () => {
            const result = await analyticsService.getConversionRate(0, 0);
            expect(result).toBe(0);
        });
        it('should handle decimal conversion rates', async () => {
            const result = await analyticsService.getConversionRate(300, 7);
            expect(result).toBeCloseTo(2.33, 2);
        });
    });
    describe('getCustomerLifetimeValue', () => {
        it('should calculate average customer lifetime value', async () => {
            mockOrderRepository.getTotalRevenue.mockResolvedValue(100000);
            mockUserRepository.count.mockResolvedValue(500);
            const clv = await analyticsService.getCustomerLifetimeValue();
            expect(clv).toBe(200); // 100000 / 500
        });
        it('should return zero when no customers', async () => {
            mockOrderRepository.getTotalRevenue.mockResolvedValue(0);
            mockUserRepository.count.mockResolvedValue(0);
            const clv = await analyticsService.getCustomerLifetimeValue();
            expect(clv).toBe(0);
        });
    });
    describe('getProductPerformance', () => {
        it('should return performance metrics for product', async () => {
            const productId = 'prod-123';
            const metrics = await analyticsService.getProductPerformance(productId);
            expect(metrics).toHaveProperty('views');
            expect(metrics).toHaveProperty('purchases');
            expect(metrics).toHaveProperty('conversionRate');
            expect(metrics).toHaveProperty('revenue');
        });
    });
    describe('trackEvent', () => {
        it('should track user event', async () => {
            const event = {
                userId: 'user-123',
                eventType: 'page_view',
                page: '/products',
                timestamp: new Date(),
            };
            await analyticsService.trackEvent(event);
            const events = await analyticsService.getEventsByUser('user-123');
            expect(events.length).toBeGreaterThan(0);
            expect(events[0].eventType).toBe('page_view');
        });
        it('should track product view event', async () => {
            await analyticsService.trackEvent({
                userId: 'user-123',
                eventType: 'product_view',
                productId: 'prod-456',
                timestamp: new Date(),
            });
            const events = await analyticsService.getEventsByUser('user-123');
            expect(events.some(e => e.eventType === 'product_view')).toBe(true);
        });
    });
    describe('getEventsByUser', () => {
        it('should return all events for user', async () => {
            await analyticsService.trackEvent({
                userId: 'user-123',
                eventType: 'login',
                timestamp: new Date(),
            });
            await analyticsService.trackEvent({
                userId: 'user-123',
                eventType: 'add_to_cart',
                timestamp: new Date(),
            });
            const events = await analyticsService.getEventsByUser('user-123');
            expect(events.length).toBe(2);
        });
        it('should return empty array for user with no events', async () => {
            const events = await analyticsService.getEventsByUser('new-user');
            expect(events).toEqual([]);
        });
    });
    describe('getDashboardMetrics', () => {
        it('should return comprehensive dashboard metrics', async () => {
            mockOrderRepository.getTotalRevenue.mockResolvedValue(50000);
            mockOrderRepository.count.mockResolvedValue(200);
            mockUserRepository.count.mockResolvedValue(1000);
            mockProductRepository.count.mockResolvedValue(150);
            const metrics = await analyticsService.getDashboardMetrics();
            expect(metrics).toHaveProperty('totalRevenue');
            expect(metrics).toHaveProperty('totalOrders');
            expect(metrics).toHaveProperty('totalUsers');
            expect(metrics).toHaveProperty('totalProducts');
            expect(metrics).toHaveProperty('averageOrderValue');
        });
        it('should include growth metrics', async () => {
            mockOrderRepository.getTotalRevenue.mockResolvedValue(50000);
            mockOrderRepository.count.mockResolvedValue(200);
            mockUserRepository.count.mockResolvedValueOnce(1000).mockResolvedValueOnce(100);
            mockProductRepository.count.mockResolvedValue(150);
            const metrics = await analyticsService.getDashboardMetrics();
            expect(metrics).toHaveProperty('userGrowthRate');
        });
    });
    describe('exportReport', () => {
        it('should generate revenue report', async () => {
            mockOrderRepository.getTotalRevenue.mockResolvedValue(10000);
            mockOrderRepository.findOrdersByDateRange.mockResolvedValue([]);
            const report = await analyticsService.exportReport('revenue', {
                startDate: new Date('2024-01-01'),
                endDate: new Date('2024-01-31'),
            });
            expect(report).toHaveProperty('type');
            expect(report.type).toBe('revenue');
            expect(report).toHaveProperty('data');
        });
        it('should generate user report', async () => {
            mockUserRepository.count.mockResolvedValue(1000);
            mockUserRepository.findByStatus.mockResolvedValue([{}, {}, {}]);
            mockOrderRepository.count.mockResolvedValue(100);
            mockOrderRepository.getTotalRevenue.mockResolvedValue(50000);
            const report = await analyticsService.exportReport('users');
            expect(report.type).toBe('users');
            expect(report.data).toHaveProperty('totalUsers');
        });
        it('should generate product report', async () => {
            mockProductRepository.findTopSelling.mockResolvedValue([]);
            mockProductRepository.findTopRated.mockResolvedValue([]);
            const report = await analyticsService.exportReport('products');
            expect(report.type).toBe('products');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXEFkYXB0aXZlX1Rlc3RpbmdcXHNyY1xcc2VydmljZXNcXGFuYWx5dGljc1xcc2VydmljZXNcXGFuYWx5dGljcy5zZXJ2aWNlLnNwZWMudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7O0dBSUc7O0FBT0gsSUFBSSxDQUFDLElBQUksQ0FBQyxzREFBc0QsQ0FBQyxDQUFDO0FBQ2xFLElBQUksQ0FBQyxJQUFJLENBQUMsdURBQXVELENBQUMsQ0FBQztBQUNuRSxJQUFJLENBQUMsSUFBSSxDQUFDLG9EQUFvRCxDQUFDLENBQUM7QUFQaEUsMkRBQXVEO0FBU3ZELFFBQVEsQ0FBQyxrQkFBa0IsRUFBRSxHQUFHLEVBQUU7SUFDaEMsSUFBSSxnQkFBa0MsQ0FBQztJQUN2QyxJQUFJLG1CQUFpRCxDQUFDO0lBQ3RELElBQUkscUJBQXFELENBQUM7SUFDMUQsSUFBSSxrQkFBK0MsQ0FBQztJQUVwRCxVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QsbUJBQW1CLEdBQUc7WUFDcEIsZUFBZSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDMUIsYUFBYSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDeEIscUJBQXFCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNoQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtTQUMwQixDQUFDO1FBRTdDLHFCQUFxQixHQUFHO1lBQ3RCLGNBQWMsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ3pCLFlBQVksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ3ZCLFlBQVksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ3ZCLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1NBQzRCLENBQUM7UUFFL0Msa0JBQWtCLEdBQUc7WUFDbkIsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDaEIsWUFBWSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7U0FDa0IsQ0FBQztRQUU1QyxnQkFBZ0IsR0FBRyxJQUFJLG9DQUFnQixDQUNy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QWtCLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2pELGtCQUFrQixDQUFDLFlBQVksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFRLENBQUMsQ0FBQztZQUN2RSxtQkFBbUIsQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDakQsbUJBQW1CLENBQUMsZUFBZSxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRTdELE1BQU0sTUFBTSxHQUFHLE1BQU0sZ0JBQWdCLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBRTVELE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ2xDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ25ELENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLGdDQUFnQyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzlDLHFCQUFxQixDQUFDLGNBQWMsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUMzRCxxQkFBcUIsQ0FBQyxZQUFZLENBQUMsaUJBQWlCLENBQUMsRUFBRSxDQUFDLENBQUM7WUFFekQsTUFBTSxNQUFNLEdBQUcsTUFBTSxnQkFBZ0IsQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLENBQUM7WUFFL0QsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDdkMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxBZGFwdGl2ZV9UZXN0aW5nXFxzcmNcXHNlcnZpY2VzXFxhbmFseXRpY3NcXHNlcnZpY2VzXFxhbmFseXRpY3Muc2VydmljZS5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVEREOiBBbmFseXRpY3MgU2VydmljZSBUZXN0c1xuICpcbiAqIFRlc3Rpbmcgc2FsZXMgbWV0cmljcywgdXNlciBiZWhhdmlvciB0cmFja2luZywgYW5kIHJlcG9ydGluZ1xuICovXG5cbmltcG9ydCB7IEFuYWx5dGljc1NlcnZpY2UgfSBmcm9tICcuL2FuYWx5dGljcy5zZXJ2aWNlJztcbmltcG9ydCB7IE9yZGVyUmVwb3NpdG9yeSB9IGZyb20gJy4uLy4uL29yZGVyLXByb2Nlc3NpbmcvcmVwb3NpdG9yaWVzL29yZGVyLnJlcG9zaXRvcnknO1xuaW1wb3J0IHsgUHJvZHVjdFJlcG9zaXRvcnkgfSBmcm9tICcuLi8uLi9wcm9kdWN0LWNhdGFsb2cvcmVwb3NpdG9yaWVzL3Byb2R1Y3QucmVwb3NpdG9yeSc7XG5pbXBvcnQgeyBVc2VyUmVwb3NpdG9yeSB9IGZyb20gJy4uLy4uL3VzZXItbWFuYWdlbWVudC9yZXBvc2l0b3JpZXMvdXNlci5yZXBvc2l0b3J5JztcblxuamVzdC5tb2NrKCcuLi8uLi9vcmRlci1wcm9jZXNzaW5nL3JlcG9zaXRvcmllcy9vcmRlci5yZXBvc2l0b3J5Jyk7XG5qZXN0Lm1vY2soJy4uLy4uL3Byb2R1Y3QtY2F0YWxvZy9yZXBvc2l0b3JpZXMvcHJvZHVjdC5yZXBvc2l0b3J5Jyk7XG5qZXN0Lm1vY2soJy4uLy4uL3VzZXItbWFuYWdlbWVudC9yZXBvc2l0b3JpZXMvdXNlci5yZXBvc2l0b3J5Jyk7XG5cbmRlc2NyaWJlKCdBbmFseXRpY3NTZXJ2aWNlJywgKCkgPT4ge1xuICBsZXQgYW5hbHl0aWNzU2VydmljZTogQW5hbHl0aWNzU2VydmljZTtcbiAgbGV0IG1vY2tPcmRlclJlcG9zaXRvcnk6IGplc3QuTW9ja2VkPE9yZGVyUmVwb3NpdG9yeT47XG4gIGxldCBtb2NrUHJvZHVjdFJlcG9zaXRvcnk6IGplc3QuTW9ja2VkPFByb2R1Y3RSZXBvc2l0b3J5PjtcbiAgbGV0IG1vY2tVc2VyUmVwb3NpdG9yeTogamVzdC5Nb2NrZWQ8VXNlclJlcG9zaXRvcnk+O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIG1vY2tPcmRlclJlcG9zaXRvcnkgPSB7XG4gICAgICBnZXRUb3RhbFJldmVudWU6IGplc3QuZm4oKSxcbiAgICAgIGdldE9yZGVyU3RhdHM6IGplc3QuZm4oKSxcbiAgICAgIGZpbmRPcmRlcnNCeURhdGVSYW5nZTogamVzdC5mbigpLFxuICAgICAgY291bnQ6IGplc3QuZm4oKSxcbiAgICB9IGFzIHVua25vd24gYXMgamVzdC5Nb2NrZWQ8T3JkZXJSZXBvc2l0b3J5PjtcblxuICAgIG1vY2tQcm9kdWN0UmVwb3NpdG9yeSA9IHtcbiAgICAgIGZpbmRUb3BTZWxsaW5nOiBqZXN0LmZuKCksXG4gICAgICBmaW5kVG9wUmF0ZWQ6IGplc3QuZm4oKSxcbiAgICAgIGZpbmRMb3dTdG9jazogamVzdC5mbigpLFxuICAgICAgY291bnQ6IGplc3QuZm4oKSxcbiAgICB9IGFzIHVua25vd24gYXMgamVzdC5Nb2NrZWQ8UHJvZHVjdFJlcG9zaXRvcnk+O1xuXG4gICAgbW9ja1VzZXJSZXBvc2l0b3J5ID0ge1xuICAgICAgY291bnQ6IGplc3QuZm4oKSxcbiAgICAgIGZpbmRCeVN0YXR1czogamVzdC5mbigpLFxuICAgIH0gYXMgdW5rbm93biBhcyBqZXN0Lk1vY2tlZDxVc2VyUmVwb3NpdG9yeT47XG5cbiAgICBhbmFseXRpY3NTZXJ2aWNlID0gbmV3IEFuYWx5dGljc1NlcnZpY2UoXG4gICAgICBtb2NrT3JkZXJSZXBvc2l0b3J5LFxuICAgICAgbW9ja1Byb2R1Y3RSZXBvc2l0b3J5LFxuICAgICAgbW9ja1VzZXJSZXBvc2l0b3J5XG4gICAgKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldFRvdGFsUmV2ZW51ZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB0b3RhbCByZXZlbnVlIGZyb20gYWxsIG9yZGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tPcmRlclJlcG9zaXRvcnkuZ2V0VG90YWxSZXZlbnVlLm1vY2tSZXNvbHZlZFZhbHVlKDUwMDAwLjAwKTtcblxuICAgICAgY29uc3QgcmV2ZW51ZSA9IGF3YWl0IGFuYWx5dGljc1NlcnZpY2UuZ2V0VG90YWxSZXZlbnVlKCk7XG5cbiAgICAgIGV4cGVjdChyZXZlbnVlKS50b0JlKDUwMDAwLjAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHplcm8gd2hlbiBubyBvcmRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrT3JkZXJSZXBvc2l0b3J5LmdldFRvdGFsUmV2ZW51ZS5tb2NrUmVzb2x2ZWRWYWx1ZSgwKTtcblxuICAgICAgY29uc3QgcmV2ZW51ZSA9IGF3YWl0IGFuYWx5dGljc1NlcnZpY2UuZ2V0VG90YWxSZXZlbnVlKCk7XG5cbiAgICAgIGV4cGVjdChyZXZlbnVlKS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0UmV2ZW51ZUJ5RGF0ZVJhbmdlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIHJldmVudWUgZm9yIGRhdGUgcmFuZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZSgnMjAyNC0wMS0wMScpO1xuICAgICAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKCcyMDI0LTAxLTMxJyk7XG5cbiAgICAgIG1vY2tPcmRlclJlcG9zaXRvcnkuZmluZE9yZGVyc0J5RGF0ZVJhbmdlLm1vY2tSZXNvbHZlZFZhbHVlKFtcbiAgICAgICAgeyB0b3RhbDogMTAwLjAwIH0gYXMgYW55LFxuICAgICAgICB7IHRvdGFsOiAyMDAuMDAgfSBhcyBhbnksXG4gICAgICAgIHsgdG90YWw6IDE1MC4wMCB9IGFzIGFueSxcbiAgICAgIF0pO1xuXG4gICAgICBjb25zdCByZXZlbnVlID0gYXdhaXQgYW5hbHl0aWNzU2VydmljZS5nZXRSZXZlbnVlQnlEYXRlUmFuZ2Uoc3RhcnREYXRlLCBlbmREYXRlKTtcblxuICAgICAgZXhwZWN0KHJldmVudWUpLnRvQmUoNDUwLjAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHplcm8gZm9yIGRhdGUgcmFuZ2Ugd2l0aCBubyBvcmRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrT3JkZXJSZXBvc2l0b3J5LmZpbmRPcmRlcnNCeURhdGVSYW5nZS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSk7XG5cbiAgICAgIGNvbnN0IHJldmVudWUgPSBhd2FpdCBhbmFseXRpY3NTZXJ2aWNlLmdldFJldmVudWVCeURhdGVSYW5nZShcbiAgICAgICAgbmV3IERhdGUoKSxcbiAgICAgICAgbmV3IERhdGUoKVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJldmVudWUpLnRvQmUoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRBdmVyYWdlT3JkZXJWYWx1ZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBhdmVyYWdlIG9yZGVyIHZhbHVlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja09yZGVyUmVwb3NpdG9yeS5nZXRUb3RhbFJldmVudWUubW9ja1Jlc29sdmVkVmFsdWUoMTAwMDAuMDApO1xuICAgICAgbW9ja09yZGVyUmVwb3NpdG9yeS5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSgxMDApO1xuXG4gICAgICBjb25zdCBhdmcgPSBhd2FpdCBhbmFseXRpY3NTZXJ2aWNlLmdldEF2ZXJhZ2VPcmRlclZhbHVlKCk7XG5cbiAgICAgIGV4cGVjdChhdmcpLnRvQmUoMTAwLjAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHplcm8gd2hlbiBubyBvcmRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrT3JkZXJSZXBvc2l0b3J5LmdldFRvdGFsUmV2ZW51ZS5tb2NrUmVzb2x2ZWRWYWx1ZSgwKTtcbiAgICAgIG1vY2tPcmRlclJlcG9zaXRvcnkuY291bnQubW9ja1Jlc29sdmVkVmFsdWUoMCk7XG5cbiAgICAgIGNvbnN0IGF2ZyA9IGF3YWl0IGFuYWx5dGljc1NlcnZpY2UuZ2V0QXZlcmFnZU9yZGVyVmFsdWUoKTtcblxuICAgICAgZXhwZWN0KGF2ZykudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRlY2ltYWwgdmFsdWVzIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tPcmRlclJlcG9zaXRvcnkuZ2V0VG90YWxSZXZlbnVlLm1vY2tSZXNvbHZlZFZhbHVlKDEwMDAuMDApO1xuICAgICAgbW9ja09yZGVyUmVwb3NpdG9yeS5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSgzKTtcblxuICAgICAgY29uc3QgYXZnID0gYXdhaXQgYW5hbHl0aWNzU2VydmljZS5nZXRBdmVyYWdlT3JkZXJWYWx1ZSgpO1xuXG4gICAgICBleHBlY3QoYXZnKS50b0JlQ2xvc2VUbygzMzMuMzMsIDIpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0VG9wU2VsbGluZ1Byb2R1Y3RzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHRvcCBzZWxsaW5nIHByb2R1Y3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Byb2R1Y3RzID0gW1xuICAgICAgICB7IGlkOiAnMScsIG5hbWU6ICdQcm9kdWN0IDEnLCBzb2xkQ291bnQ6IDEwMDAgfSxcbiAgICAgICAgeyBpZDogJzInLCBuYW1lOiAnUHJvZHVjdCAyJywgc29sZENvdW50OiA4MDAgfSxcbiAgICAgICAgeyBpZDogJzMnLCBuYW1lOiAnUHJvZHVjdCAzJywgc29sZENvdW50OiA2MDAgfSxcbiAgICAgIF0gYXMgYW55W107XG5cbiAgICAgIG1vY2tQcm9kdWN0UmVwb3NpdG9yeS5maW5kVG9wU2VsbGluZy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUHJvZHVjdHMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhbmFseXRpY3NTZXJ2aWNlLmdldFRvcFNlbGxpbmdQcm9kdWN0cygxMCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja1Byb2R1Y3RzKTtcbiAgICAgIGV4cGVjdChtb2NrUHJvZHVjdFJlcG9zaXRvcnkuZmluZFRvcFNlbGxpbmcpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDEwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGVmYXVsdCB0byB0b3AgMTAgaWYgbm8gbGltaXQgc3BlY2lmaWVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1Byb2R1Y3RSZXBvc2l0b3J5LmZpbmRUb3BTZWxsaW5nLm1vY2tSZXNvbHZlZFZhbHVlKFtdKTtcblxuICAgICAgYXdhaXQgYW5hbHl0aWNzU2VydmljZS5nZXRUb3BTZWxsaW5nUHJvZHVjdHMoKTtcblxuICAgICAgZXhwZWN0KG1vY2tQcm9kdWN0UmVwb3NpdG9yeS5maW5kVG9wU2VsbGluZykudG9IYXZlQmVlbkNhbGxlZFdpdGgoMTApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0VG9wUmF0ZWRQcm9kdWN0cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB0b3AgcmF0ZWQgcHJvZHVjdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUHJvZHVjdHMgPSBbXG4gICAgICAgIHsgaWQ6ICcxJywgbmFtZTogJ1Byb2R1Y3QgMScsIHJhdGluZzogNC45IH0sXG4gICAgICAgIHsgaWQ6ICcyJywgbmFtZTogJ1Byb2R1Y3QgMicsIHJhdGluZzogNC44IH0sXG4gICAgICBdIGFzIGFueVtdO1xuXG4gICAgICBtb2NrUHJvZHVjdFJlcG9zaXRvcnkuZmluZFRvcFJhdGVkLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tQcm9kdWN0cyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFuYWx5dGljc1NlcnZpY2UuZ2V0VG9wUmF0ZWRQcm9kdWN0cyg1KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrUHJvZHVjdHMpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0TG93U3RvY2tBbGVydCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBwcm9kdWN0cyB3aXRoIGxvdyBzdG9jaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQcm9kdWN0cyA9IFtcbiAgICAgICAgeyBpZDogJzEnLCBuYW1lOiAnUHJvZHVjdCAxJywgaW52ZW50b3J5OiAzIH0sXG4gICAgICAgIHsgaWQ6ICcyJywgbmFtZTogJ1Byb2R1Y3QgMicsIGludmVudG9yeTogNSB9LFxuICAgICAgXSBhcyBhbnlbXTtcblxuICAgICAgbW9ja1Byb2R1Y3RSZXBvc2l0b3J5LmZpbmRMb3dTdG9jay5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUHJvZHVjdHMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhbmFseXRpY3NTZXJ2aWNlLmdldExvd1N0b2NrQWxlcnQoMTApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tQcm9kdWN0cyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVzZSBkZWZhdWx0IHRocmVzaG9sZCBvZiAxMCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tQcm9kdWN0UmVwb3NpdG9yeS5maW5kTG93U3RvY2subW9ja1Jlc29sdmVkVmFsdWUoW10pO1xuXG4gICAgICBhd2FpdCBhbmFseXRpY3NTZXJ2aWNlLmdldExvd1N0b2NrQWxlcnQoKTtcblxuICAgICAgZXhwZWN0KG1vY2tQcm9kdWN0UmVwb3NpdG9yeS5maW5kTG93U3RvY2spLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDEwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldFVzZXJHcm93dGhNZXRyaWNzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIHVzZXIgZ3Jvd3RoIHJhdGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVXNlclJlcG9zaXRvcnkuY291bnQubW9ja1Jlc29sdmVkVmFsdWVPbmNlKDEwMDApOyAvLyBDdXJyZW50IHRvdGFsXG4gICAgICBtb2NrVXNlclJlcG9zaXRvcnkuY291bnQubW9ja1Jlc29sdmVkVmFsdWVPbmNlKDEwMCk7ICAvLyBOZXcgdGhpcyBtb250aFxuXG4gICAgICBjb25zdCBtZXRyaWNzID0gYXdhaXQgYW5hbHl0aWNzU2VydmljZS5nZXRVc2VyR3Jvd3RoTWV0cmljcygpO1xuXG4gICAgICBleHBlY3QobWV0cmljcy50b3RhbFVzZXJzKS50b0JlKDEwMDApO1xuICAgICAgZXhwZWN0KG1ldHJpY3MubmV3VXNlcnNUaGlzTW9udGgpLnRvQmUoMTAwKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLmdyb3d0aFJhdGUpLnRvQmUoMTApOyAvLyAxMDAvMTAwMCAqIDEwMFxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgemVybyBncm93dGgnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVXNlclJlcG9zaXRvcnkuY291bnQubW9ja1Jlc29sdmVkVmFsdWVPbmNlKDEwMDApO1xuICAgICAgbW9ja1VzZXJSZXBvc2l0b3J5LmNvdW50Lm1vY2tSZXNvbHZlZFZhbHVlT25jZSgwKTtcblxuICAgICAgY29uc3QgbWV0cmljcyA9IGF3YWl0IGFuYWx5dGljc1NlcnZpY2UuZ2V0VXNlckdyb3d0aE1ldHJpY3MoKTtcblxuICAgICAgZXhwZWN0KG1ldHJpY3MuZ3Jvd3RoUmF0ZSkudG9CZSgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldEFjdGl2ZVVzZXJDb3VudCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBjb3VudCBvZiBhY3RpdmUgdXNlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVXNlclJlcG9zaXRvcnkuZmluZEJ5U3RhdHVzLm1vY2tSZXNvbHZlZFZhbHVlKFxuICAgICAgICBBcnJheSg1MDApLmZpbGwoe30pIGFzIGFueVtdXG4gICAgICApO1xuXG4gICAgICBjb25zdCBjb3VudCA9IGF3YWl0IGFuYWx5dGljc1NlcnZpY2UuZ2V0QWN0aXZlVXNlckNvdW50KCk7XG5cbiAgICAgIGV4cGVjdChjb3VudCkudG9CZSg1MDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0U2FsZXNNZXRyaWNzQnlQZXJpb2QnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhZ2dyZWdhdGUgbWV0cmljcyBmb3IgbW9udGhseSBwZXJpb2QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwZXJpb2QgPSAnbW9udGgnO1xuICAgICAgY29uc3QgbW9ja09yZGVycyA9IFtcbiAgICAgICAgeyBjcmVhdGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAxLTE1JyksIHRvdGFsOiAxMDAgfSxcbiAgICAgICAgeyBjcmVhdGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAxLTIwJyksIHRvdGFsOiAyMDAgfSxcbiAgICAgICAgeyBjcmVhdGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAyLTA1JyksIHRvdGFsOiAxNTAgfSxcbiAgICAgIF0gYXMgYW55W107XG5cbiAgICAgIG1vY2tPcmRlclJlcG9zaXRvcnkuZmluZE9yZGVyc0J5RGF0ZVJhbmdlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tPcmRlcnMpO1xuXG4gICAgICBjb25zdCBtZXRyaWNzID0gYXdhaXQgYW5hbHl0aWNzU2VydmljZS5nZXRTYWxlc01ldHJpY3NCeVBlcmlvZChwZXJpb2QpO1xuXG4gICAgICBleHBlY3QobWV0cmljcykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhZ2dyZWdhdGUgbWV0cmljcyBmb3Igd2Vla2x5IHBlcmlvZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBlcmlvZCA9ICd3ZWVrJztcblxuICAgICAgbW9ja09yZGVyUmVwb3NpdG9yeS5maW5kT3JkZXJzQnlEYXRlUmFuZ2UubW9ja1Jlc29sdmVkVmFsdWUoW10pO1xuXG4gICAgICBjb25zdCBtZXRyaWNzID0gYXdhaXQgYW5hbHl0aWNzU2VydmljZS5nZXRTYWxlc01ldHJpY3NCeVBlcmlvZChwZXJpb2QpO1xuXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShtZXRyaWNzKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWdncmVnYXRlIG1ldHJpY3MgZm9yIGRhaWx5IHBlcmlvZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBlcmlvZCA9ICdkYXknO1xuXG4gICAgICBtb2NrT3JkZXJSZXBvc2l0b3J5LmZpbmRPcmRlcnNCeURhdGVSYW5nZS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSk7XG5cbiAgICAgIGNvbnN0IG1ldHJpY3MgPSBhd2FpdCBhbmFseXRpY3NTZXJ2aWNlLmdldFNhbGVzTWV0cmljc0J5UGVyaW9kKHBlcmlvZCk7XG5cbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KG1ldHJpY3MpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0Q29udmVyc2lvblJhdGUnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgY29udmVyc2lvbiByYXRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYW5hbHl0aWNzU2VydmljZS5nZXRDb252ZXJzaW9uUmF0ZShcbiAgICAgICAgMTAwMCwgLy8gdmlzaXRvcnNcbiAgICAgICAgNTAgICAgLy8gb3JkZXJzXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKDUpOyAvLyA1MC8xMDAwICogMTAwXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiB6ZXJvIHdoZW4gbm8gdmlzaXRvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhbmFseXRpY3NTZXJ2aWNlLmdldENvbnZlcnNpb25SYXRlKDAsIDApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGVjaW1hbCBjb252ZXJzaW9uIHJhdGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYW5hbHl0aWNzU2VydmljZS5nZXRDb252ZXJzaW9uUmF0ZSgzMDAsIDcpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlQ2xvc2VUbygyLjMzLCAyKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldEN1c3RvbWVyTGlmZXRpbWVWYWx1ZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBhdmVyYWdlIGN1c3RvbWVyIGxpZmV0aW1lIHZhbHVlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja09yZGVyUmVwb3NpdG9yeS5nZXRUb3RhbFJldmVudWUubW9ja1Jlc29sdmVkVmFsdWUoMTAwMDAwKTtcbiAgICAgIG1vY2tVc2VyUmVwb3NpdG9yeS5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSg1MDApO1xuXG4gICAgICBjb25zdCBjbHYgPSBhd2FpdCBhbmFseXRpY3NTZXJ2aWNlLmdldEN1c3RvbWVyTGlmZXRpbWVWYWx1ZSgpO1xuXG4gICAgICBleHBlY3QoY2x2KS50b0JlKDIwMCk7IC8vIDEwMDAwMCAvIDUwMFxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gemVybyB3aGVuIG5vIGN1c3RvbWVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tPcmRlclJlcG9zaXRvcnkuZ2V0VG90YWxSZXZlbnVlLm1vY2tSZXNvbHZlZFZhbHVlKDApO1xuICAgICAgbW9ja1VzZXJSZXBvc2l0b3J5LmNvdW50Lm1vY2tSZXNvbHZlZFZhbHVlKDApO1xuXG4gICAgICBjb25zdCBjbHYgPSBhd2FpdCBhbmFseXRpY3NTZXJ2aWNlLmdldEN1c3RvbWVyTGlmZXRpbWVWYWx1ZSgpO1xuXG4gICAgICBleHBlY3QoY2x2KS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0UHJvZHVjdFBlcmZvcm1hbmNlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHBlcmZvcm1hbmNlIG1ldHJpY3MgZm9yIHByb2R1Y3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9kdWN0SWQgPSAncHJvZC0xMjMnO1xuXG4gICAgICBjb25zdCBtZXRyaWNzID0gYXdhaXQgYW5hbHl0aWNzU2VydmljZS5nZXRQcm9kdWN0UGVyZm9ybWFuY2UocHJvZHVjdElkKTtcblxuICAgICAgZXhwZWN0KG1ldHJpY3MpLnRvSGF2ZVByb3BlcnR5KCd2aWV3cycpO1xuICAgICAgZXhwZWN0KG1ldHJpY3MpLnRvSGF2ZVByb3BlcnR5KCdwdXJjaGFzZXMnKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzKS50b0hhdmVQcm9wZXJ0eSgnY29udmVyc2lvblJhdGUnKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzKS50b0hhdmVQcm9wZXJ0eSgncmV2ZW51ZScpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndHJhY2tFdmVudCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHRyYWNrIHVzZXIgZXZlbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBldmVudCA9IHtcbiAgICAgICAgdXNlcklkOiAndXNlci0xMjMnLFxuICAgICAgICBldmVudFR5cGU6ICdwYWdlX3ZpZXcnLFxuICAgICAgICBwYWdlOiAnL3Byb2R1Y3RzJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgfTtcblxuICAgICAgYXdhaXQgYW5hbHl0aWNzU2VydmljZS50cmFja0V2ZW50KGV2ZW50KTtcblxuICAgICAgY29uc3QgZXZlbnRzID0gYXdhaXQgYW5hbHl0aWNzU2VydmljZS5nZXRFdmVudHNCeVVzZXIoJ3VzZXItMTIzJyk7XG5cbiAgICAgIGV4cGVjdChldmVudHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QoZXZlbnRzWzBdLmV2ZW50VHlwZSkudG9CZSgncGFnZV92aWV3Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRyYWNrIHByb2R1Y3QgdmlldyBldmVudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFuYWx5dGljc1NlcnZpY2UudHJhY2tFdmVudCh7XG4gICAgICAgIHVzZXJJZDogJ3VzZXItMTIzJyxcbiAgICAgICAgZXZlbnRUeXBlOiAncHJvZHVjdF92aWV3JyxcbiAgICAgICAgcHJvZHVjdElkOiAncHJvZC00NTYnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZXZlbnRzID0gYXdhaXQgYW5hbHl0aWNzU2VydmljZS5nZXRFdmVudHNCeVVzZXIoJ3VzZXItMTIzJyk7XG5cbiAgICAgIGV4cGVjdChldmVudHMuc29tZShlID0+IGUuZXZlbnRUeXBlID09PSAncHJvZHVjdF92aWV3JykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRFdmVudHNCeVVzZXInLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gYWxsIGV2ZW50cyBmb3IgdXNlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFuYWx5dGljc1NlcnZpY2UudHJhY2tFdmVudCh7XG4gICAgICAgIHVzZXJJZDogJ3VzZXItMTIzJyxcbiAgICAgICAgZXZlbnRUeXBlOiAnbG9naW4nLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgYW5hbHl0aWNzU2VydmljZS50cmFja0V2ZW50KHtcbiAgICAgICAgdXNlcklkOiAndXNlci0xMjMnLFxuICAgICAgICBldmVudFR5cGU6ICdhZGRfdG9fY2FydCcsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBldmVudHMgPSBhd2FpdCBhbmFseXRpY3NTZXJ2aWNlLmdldEV2ZW50c0J5VXNlcigndXNlci0xMjMnKTtcblxuICAgICAgZXhwZWN0KGV2ZW50cy5sZW5ndGgpLnRvQmUoMik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXB0eSBhcnJheSBmb3IgdXNlciB3aXRoIG5vIGV2ZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGV2ZW50cyA9IGF3YWl0IGFuYWx5dGljc1NlcnZpY2UuZ2V0RXZlbnRzQnlVc2VyKCduZXctdXNlcicpO1xuXG4gICAgICBleHBlY3QoZXZlbnRzKS50b0VxdWFsKFtdKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldERhc2hib2FyZE1ldHJpY3MnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gY29tcHJlaGVuc2l2ZSBkYXNoYm9hcmQgbWV0cmljcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tPcmRlclJlcG9zaXRvcnkuZ2V0VG90YWxSZXZlbnVlLm1vY2tSZXNvbHZlZFZhbHVlKDUwMDAwKTtcbiAgICAgIG1vY2tPcmRlclJlcG9zaXRvcnkuY291bnQubW9ja1Jlc29sdmVkVmFsdWUoMjAwKTtcbiAgICAgIG1vY2tVc2VyUmVwb3NpdG9yeS5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSgxMDAwKTtcbiAgICAgIG1vY2tQcm9kdWN0UmVwb3NpdG9yeS5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSgxNTApO1xuXG4gICAgICBjb25zdCBtZXRyaWNzID0gYXdhaXQgYW5hbHl0aWNzU2VydmljZS5nZXREYXNoYm9hcmRNZXRyaWNzKCk7XG5cbiAgICAgIGV4cGVjdChtZXRyaWNzKS50b0hhdmVQcm9wZXJ0eSgndG90YWxSZXZlbnVlJyk7XG4gICAgICBleHBlY3QobWV0cmljcykudG9IYXZlUHJvcGVydHkoJ3RvdGFsT3JkZXJzJyk7XG4gICAgICBleHBlY3QobWV0cmljcykudG9IYXZlUHJvcGVydHkoJ3RvdGFsVXNlcnMnKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzKS50b0hhdmVQcm9wZXJ0eSgndG90YWxQcm9kdWN0cycpO1xuICAgICAgZXhwZWN0KG1ldHJpY3MpLnRvSGF2ZVByb3BlcnR5KCdhdmVyYWdlT3JkZXJWYWx1ZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIGdyb3d0aCBtZXRyaWNzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja09yZGVyUmVwb3NpdG9yeS5nZXRUb3RhbFJldmVudWUubW9ja1Jlc29sdmVkVmFsdWUoNTAwMDApO1xuICAgICAgbW9ja09yZGVyUmVwb3NpdG9yeS5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSgyMDApO1xuICAgICAgbW9ja1VzZXJSZXBvc2l0b3J5LmNvdW50Lm1vY2tSZXNvbHZlZFZhbHVlT25jZSgxMDAwKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoMTAwKTtcbiAgICAgIG1vY2tQcm9kdWN0UmVwb3NpdG9yeS5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSgxNTApO1xuXG4gICAgICBjb25zdCBtZXRyaWNzID0gYXdhaXQgYW5hbHl0aWNzU2VydmljZS5nZXREYXNoYm9hcmRNZXRyaWNzKCk7XG5cbiAgICAgIGV4cGVjdChtZXRyaWNzKS50b0hhdmVQcm9wZXJ0eSgndXNlckdyb3d0aFJhdGUnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2V4cG9ydFJlcG9ydCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIHJldmVudWUgcmVwb3J0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja09yZGVyUmVwb3NpdG9yeS5nZXRUb3RhbFJldmVudWUubW9ja1Jlc29sdmVkVmFsdWUoMTAwMDApO1xuICAgICAgbW9ja09yZGVyUmVwb3NpdG9yeS5maW5kT3JkZXJzQnlEYXRlUmFuZ2UubW9ja1Jlc29sdmVkVmFsdWUoW10pO1xuXG4gICAgICBjb25zdCByZXBvcnQgPSBhd2FpdCBhbmFseXRpY3NTZXJ2aWNlLmV4cG9ydFJlcG9ydCgncmV2ZW51ZScsIHtcbiAgICAgICAgc3RhcnREYXRlOiBuZXcgRGF0ZSgnMjAyNC0wMS0wMScpLFxuICAgICAgICBlbmREYXRlOiBuZXcgRGF0ZSgnMjAyNC0wMS0zMScpLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXBvcnQpLnRvSGF2ZVByb3BlcnR5KCd0eXBlJyk7XG4gICAgICBleHBlY3QocmVwb3J0LnR5cGUpLnRvQmUoJ3JldmVudWUnKTtcbiAgICAgIGV4cGVjdChyZXBvcnQpLnRvSGF2ZVByb3BlcnR5KCdkYXRhJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIHVzZXIgcmVwb3J0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1VzZXJSZXBvc2l0b3J5LmNvdW50Lm1vY2tSZXNvbHZlZFZhbHVlKDEwMDApO1xuICAgICAgbW9ja1VzZXJSZXBvc2l0b3J5LmZpbmRCeVN0YXR1cy5tb2NrUmVzb2x2ZWRWYWx1ZShbe30sIHt9LCB7fV0gYXMgYW55KTtcbiAgICAgIG1vY2tPcmRlclJlcG9zaXRvcnkuY291bnQubW9ja1Jlc29sdmVkVmFsdWUoMTAwKTtcbiAgICAgIG1vY2tPcmRlclJlcG9zaXRvcnkuZ2V0VG90YWxSZXZlbnVlLm1vY2tSZXNvbHZlZFZhbHVlKDUwMDAwKTtcblxuICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgYW5hbHl0aWNzU2VydmljZS5leHBvcnRSZXBvcnQoJ3VzZXJzJyk7XG5cbiAgICAgIGV4cGVjdChyZXBvcnQudHlwZSkudG9CZSgndXNlcnMnKTtcbiAgICAgIGV4cGVjdChyZXBvcnQuZGF0YSkudG9IYXZlUHJvcGVydHkoJ3RvdGFsVXNlcnMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgcHJvZHVjdCByZXBvcnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUHJvZHVjdFJlcG9zaXRvcnkuZmluZFRvcFNlbGxpbmcubW9ja1Jlc29sdmVkVmFsdWUoW10pO1xuICAgICAgbW9ja1Byb2R1Y3RSZXBvc2l0b3J5LmZpbmRUb3BSYXRlZC5tb2NrUmVzb2x2ZWRWYWx1ZShbXSk7XG5cbiAgICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IGFuYWx5dGljc1NlcnZpY2UuZXhwb3J0UmVwb3J0KCdwcm9kdWN0cycpO1xuXG4gICAgICBleHBlY3QocmVwb3J0LnR5cGUpLnRvQmUoJ3Byb2R1Y3RzJyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=