{"file":"C:\\Adaptive_Testing\\src\\services\\inventory\\services\\inventory.service.spec.ts","mappings":";AAAA;;;;GAIG;;AAEH,2DAA2F;AAG3F,yCAA8D;AAE9D,QAAQ,CAAC,kBAAkB,EAAE,GAAG,EAAE;IAChC,IAAI,gBAAkC,CAAC;IACvC,IAAI,uBAAyD,CAAC;IAC9D,IAAI,qBAAqD,CAAC;IAE1D,UAAU,CAAC,GAAG,EAAE;QACd,uBAAuB,GAAG;YACxB,eAAe,EAAE,IAAI,CAAC,EAAE,EAAE;YAC1B,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE;YACjB,iBAAiB,EAAE,IAAI,CAAC,EAAE,EAAE;YAC5B,kBAAkB,EAAE,IAAI,CAAC,EAAE,EAAE;YAC7B,eAAe,EAAE,IAAI,CAAC,EAAE,EAAE;YAC1B,uBAAuB,EAAE,IAAI,CAAC,EAAE,EAAE;YAClC,YAAY,EAAE,IAAI,CAAC,EAAE,EAAE;YACvB,cAAc,EAAE,IAAI,CAAC,EAAE,EAAE;YACzB,mBAAmB,EAAE,IAAI,CAAC,EAAE,EAAE;YAC9B,gBAAgB,EAAE,IAAI,CAAC,EAAE,EAAE;SACrB,CAAC;QAET,qBAAqB,GAAG;YACtB,QAAQ,EAAE,IAAI,CAAC,EAAE,EAAE;YACnB,eAAe,EAAE,IAAI,CAAC,EAAE,EAAE;SACpB,CAAC;QAET,gBAAgB,GAAG,IAAI,oCAAgB,CAAC,uBAAuB,EAAE,qBAAqB,CAAC,CAAC;IAC1F,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,UAAU,EAAE,GAAG,EAAE;QACxB,EAAE,CAAC,8CAA8C,EAAE,KAAK,IAAI,EAAE;YAC5D,MAAM,aAAa,GAAG;gBACpB,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,GAAG;gBACb,QAAQ,EAAE,EAAE;gBACZ,SAAS,EAAE,EAAE;aACd,CAAC;YAEF,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC,aAAoB,CAAC,CAAC;YAEhF,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;YAEzD,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAClC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACpC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,wDAAwD,EAAE,KAAK,IAAI,EAAE;YACtE,MAAM,aAAa,GAAG;gBACpB,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,EAAE;gBACZ,QAAQ,EAAE,EAAE;aACb,CAAC;YAEF,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC,aAAoB,CAAC,CAAC;YAEhF,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;YAEzD,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACpC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,iBAAiB,EAAE,GAAG,EAAE;QAC/B,EAAE,CAAC,oCAAoC,EAAE,KAAK,IAAI,EAAE;YAClD,MAAM,SAAS,GAAuB;gBACpC,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,EAAE;gBACZ,MAAM,EAAE,SAAS;aAClB,CAAC;YAEF,MAAM,aAAa,GAAG;gBACpB,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,GAAG;aACd,CAAC;YAEF,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC,aAAoB,CAAC,CAAC;YAChF,uBAAuB,CAAC,MAAM,CAAC,iBAAiB,CAAC;gBAC/C,GAAG,aAAa;gBAChB,QAAQ,EAAE,GAAG;aACP,CAAC,CAAC;YAEV,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;YAEjE,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACpC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,oCAAoC,EAAE,KAAK,IAAI,EAAE;YAClD,MAAM,SAAS,GAAuB;gBACpC,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,CAAC,EAAE;gBACb,MAAM,EAAE,QAAQ;aACjB,CAAC;YAEF,MAAM,aAAa,GAAG;gBACpB,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,GAAG;aACd,CAAC;YAEF,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC,aAAoB,CAAC,CAAC;YAChF,uBAAuB,CAAC,MAAM,CAAC,iBAAiB,CAAC;gBAC/C,GAAG,aAAa;gBAChB,QAAQ,EAAE,EAAE;aACN,CAAC,CAAC;YAEV,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;YAEjE,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACnC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,4DAA4D,EAAE,KAAK,IAAI,EAAE;YAC1E,MAAM,SAAS,GAAuB;gBACpC,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,CAAC,GAAG;gBACd,MAAM,EAAE,YAAY;aACrB,CAAC;YAEF,MAAM,aAAa,GAAG;gBACpB,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,GAAG;aACd,CAAC;YAEF,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC,aAAoB,CAAC,CAAC;YAEhF,MAAM,MAAM,CAAC,gBAAgB,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,wBAAe,CAAC,CAAC;YAC3F,MAAM,MAAM,CAAC,gBAAgB,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,wBAAwB,CAAC,CAAC;QACtG,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,+CAA+C,EAAE,KAAK,IAAI,EAAE;YAC7D,MAAM,SAAS,GAAuB;gBACpC,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,EAAE;gBACZ,MAAM,EAAE,SAAS;gBACjB,MAAM,EAAE,SAAS;aAClB,CAAC;YAEF,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC,EAAE,QAAQ,EAAE,GAAG,EAAS,CAAC,CAAC;YACpF,uBAAuB,CAAC,MAAM,CAAC,iBAAiB,CAAC,EAAE,QAAQ,EAAE,GAAG,EAAS,CAAC,CAAC;YAC3E,uBAAuB,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC;YAEtE,MAAM,gBAAgB,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;YAElD,MAAM,CAAC,uBAAuB,CAAC,gBAAgB,CAAC,CAAC,oBAAoB,CACnE,MAAM,CAAC,gBAAgB,CAAC;gBACtB,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,EAAE;gBACZ,MAAM,EAAE,SAAS;aAClB,CAAC,CACH,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,cAAc,EAAE,GAAG,EAAE;QAC5B,EAAE,CAAC,mCAAmC,EAAE,KAAK,IAAI,EAAE;YACjD,MAAM,cAAc,GAAmB;gBACrC,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,CAAC;gBACX,OAAO,EAAE,SAAS;aACnB,CAAC;YAEF,MAAM,aAAa,GAAG;gBACpB,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,GAAG;gBACb,QAAQ,EAAE,EAAE;gBACZ,SAAS,EAAE,EAAE;aACd,CAAC;YAEF,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC,aAAoB,CAAC,CAAC;YAChF,uBAAuB,CAAC,iBAAiB,CAAC,iBAAiB,CAAC;gBAC1D,EAAE,EAAE,eAAe;gBACnB,GAAG,cAAc;gBACjB,SAAS,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC;aAC1C,CAAC,CAAC;YAEV,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;YAEnE,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAChC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,WAAW,EAAE,CAAC;QACzC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,2DAA2D,EAAE,KAAK,IAAI,EAAE;YACzE,MAAM,cAAc,GAAmB;gBACrC,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,GAAG;gBACb,OAAO,EAAE,SAAS;aACnB,CAAC;YAEF,MAAM,aAAa,GAAG;gBACpB,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,GAAG;gBACb,QAAQ,EAAE,EAAE;gBACZ,SAAS,EAAE,CAAC;aACb,CAAC;YAEF,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC,aAAoB,CAAC,CAAC;YAEhF,MAAM,MAAM,CAAC,gBAAgB,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,sBAAa,CAAC,CAAC;YAC3F,MAAM,MAAM,CAAC,gBAAgB,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,8BAA8B,CAAC,CAAC;QAC9G,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,4CAA4C,EAAE,KAAK,IAAI,EAAE;YAC1D,MAAM,cAAc,GAAmB;gBACrC,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,CAAC;gBACX,OAAO,EAAE,SAAS;gBAClB,iBAAiB,EAAE,EAAE;aACtB,CAAC;YAEF,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC;gBACxD,QAAQ,EAAE,GAAG;gBACb,SAAS,EAAE,GAAG;aACR,CAAC,CAAC;YAEV,uBAAuB,CAAC,iBAAiB,CAAC,iBAAiB,CAAC;gBAC1D,EAAE,EAAE,eAAe;gBACnB,SAAS,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC;aAC1C,CAAC,CAAC;YAEV,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;YAEnE,MAAM,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;YAC1D,MAAM,CAAC,SAAS,CAAC,CAAC,eAAe,CAAC,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;YAClD,MAAM,CAAC,SAAS,CAAC,CAAC,YAAY,CAAC,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;QACjD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,oBAAoB,EAAE,GAAG,EAAE;QAClC,EAAE,CAAC,oCAAoC,EAAE,KAAK,IAAI,EAAE;YAClD,MAAM,eAAe,GAAG;gBACtB,EAAE,EAAE,eAAe;gBACnB,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,CAAC;aACZ,CAAC;YAEF,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC,eAAsB,CAAC,CAAC;YAClF,uBAAuB,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC;YAExE,MAAM,gBAAgB,CAAC,kBAAkB,CAAC,eAAe,CAAC,CAAC;YAE3D,MAAM,CAAC,uBAAuB,CAAC,kBAAkB,CAAC,CAAC,oBAAoB,CAAC,eAAe,CAAC,CAAC;QAC3F,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,8DAA8D,EAAE,KAAK,IAAI,EAAE;YAC5E,MAAM,eAAe,GAAG;gBACtB,EAAE,EAAE,eAAe;gBACnB,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,CAAC;aACZ,CAAC;YAEF,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC,eAAsB,CAAC,CAAC;YAClF,uBAAuB,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC;YAExE,MAAM,gBAAgB,CAAC,kBAAkB,CAAC,eAAe,CAAC,CAAC;YAE3D,0CAA0C;YAC1C,MAAM,CAAC,uBAAuB,CAAC,kBAAkB,CAAC,CAAC,gBAAgB,EAAE,CAAC;QACxE,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,oBAAoB,EAAE,GAAG,EAAE;QAClC,EAAE,CAAC,0DAA0D,EAAE,KAAK,IAAI,EAAE;YACxE,MAAM,eAAe,GAAG;gBACtB,EAAE,EAAE,eAAe;gBACnB,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,CAAC;gBACX,OAAO,EAAE,SAAS;aACnB,CAAC;YAEF,MAAM,aAAa,GAAG;gBACpB,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,GAAG;gBACb,QAAQ,EAAE,EAAE;aACb,CAAC;YAEF,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC,eAAsB,CAAC,CAAC;YAClF,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC,aAAoB,CAAC,CAAC;YAChF,uBAAuB,CAAC,MAAM,CAAC,iBAAiB,CAAC;gBAC/C,GAAG,aAAa;gBAChB,QAAQ,EAAE,EAAE;gBACZ,QAAQ,EAAE,CAAC;aACL,CAAC,CAAC;YAEV,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,kBAAkB,CAAC,eAAe,CAAC,CAAC;YAE1E,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACnC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,mBAAmB,EAAE,GAAG,EAAE;QACjC,EAAE,CAAC,gDAAgD,EAAE,KAAK,IAAI,EAAE;YAC9D,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC;gBACxD,QAAQ,EAAE,EAAE;gBACZ,QAAQ,EAAE,CAAC;aACL,CAAC,CAAC;YAEV,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,iBAAiB,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;YAEtE,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,mEAAmE,EAAE,KAAK,IAAI,EAAE;YACjF,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC;gBACxD,SAAS,EAAE,EAAE;aACP,CAAC,CAAC;YAEV,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,iBAAiB,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;YAEtE,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC7B,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,qBAAqB,EAAE,GAAG,EAAE;QACnC,EAAE,CAAC,+CAA+C,EAAE,KAAK,IAAI,EAAE;YAC7D,MAAM,YAAY,GAAG;gBACnB,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,EAAE,aAAa,EAAE,EAAE,EAAE;gBACvD,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,EAAE,aAAa,EAAE,EAAE,EAAE;aACxD,CAAC;YAEF,uBAAuB,CAAC,YAAY,CAAC,iBAAiB,CAAC,YAAmB,CAAC,CAAC;YAE5E,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,mBAAmB,EAAE,CAAC;YAE5D,MAAM,CAAC,MAAM,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;YAC/B,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC;QACnE,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,iDAAiD,EAAE,KAAK,IAAI,EAAE;YAC/D,MAAM,YAAY,GAAG;gBACnB,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,EAAE,aAAa,EAAE,EAAE,EAAE;aACxD,CAAC;YAEF,uBAAuB,CAAC,YAAY,CAAC,iBAAiB,CAAC,YAAmB,CAAC,CAAC;YAE5E,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,mBAAmB,CAAC,EAAE,SAAS,EAAE,EAAE,EAAE,CAAC,CAAC;YAE7E,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,mBAAmB,CAAC,EAAE,CAAC,CAAC;QAC5D,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,uBAAuB,EAAE,GAAG,EAAE;QACrC,EAAE,CAAC,qCAAqC,EAAE,KAAK,IAAI,EAAE;YACnD,MAAM,cAAc,GAAG;gBACrB,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,EAAE;gBACpC,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,EAAE;aACrC,CAAC;YAEF,uBAAuB,CAAC,cAAc,CAAC,iBAAiB,CAAC,cAAqB,CAAC,CAAC;YAEhF,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,qBAAqB,EAAE,CAAC;YAE9D,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACzD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,kBAAkB,EAAE,GAAG,EAAE;QAChC,EAAE,CAAC,8CAA8C,EAAE,KAAK,IAAI,EAAE;YAC5D,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC;gBACxD,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,EAAE;aACN,CAAC,CAAC;YAEV,uBAAuB,CAAC,MAAM,CAAC,iBAAiB,CAAC;gBAC/C,SAAS,EAAE,QAAQ;gBACnB,aAAa,EAAE,EAAE;aACX,CAAC,CAAC;YAEV,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,gBAAgB,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;YAErE,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACxC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,4CAA4C,EAAE,KAAK,IAAI,EAAE;YAC1D,MAAM,MAAM,CACV,gBAAgB,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,CACjD,CAAC,OAAO,CAAC,OAAO,CAAC,wBAAe,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,iBAAiB,EAAE,GAAG,EAAE;QAC/B,EAAE,CAAC,mDAAmD,EAAE,KAAK,IAAI,EAAE;YACjE,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC;gBACxD,SAAS,EAAE,QAAQ;aACb,CAAC,CAAC;YAEV,uBAAuB,CAAC,MAAM,CAAC,iBAAiB,CAAC;gBAC/C,SAAS,EAAE,QAAQ;gBACnB,YAAY,EAAE,EAAE;gBAChB,eAAe,EAAE,GAAG;aACd,CAAC,CAAC;YAEV,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,eAAe,CAAC,QAAQ,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC;YAEzE,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YACrC,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC3C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,qBAAqB,EAAE,GAAG,EAAE;QACnC,EAAE,CAAC,yCAAyC,EAAE,KAAK,IAAI,EAAE;YACvD,MAAM,WAAW,GAAG;gBAClB,EAAE,EAAE,EAAE,GAAG,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,IAAI,IAAI,EAAE,EAAE;gBACnF,EAAE,EAAE,EAAE,GAAG,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,IAAI,EAAE,EAAE;aACjF,CAAC;YAEF,uBAAuB,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,WAAkB,CAAC,CAAC;YAElF,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,mBAAmB,CAAC,QAAQ,CAAC,CAAC;YAEpE,MAAM,CAAC,MAAM,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,qCAAqC,EAAE,KAAK,IAAI,EAAE;YACnD,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC;YACzC,MAAM,OAAO,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC;YAEvC,uBAAuB,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,EAAS,CAAC,CAAC;YAEzE,MAAM,gBAAgB,CAAC,mBAAmB,CAAC,QAAQ,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,CAAC;YAE7E,MAAM,CAAC,uBAAuB,CAAC,mBAAmB,CAAC,CAAC,oBAAoB,CACtE,QAAQ,EACR,MAAM,CAAC,gBAAgB,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,CAChD,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,4BAA4B,EAAE,GAAG,EAAE;QAC1C,EAAE,CAAC,+CAA+C,EAAE,KAAK,IAAI,EAAE;YAC7D,MAAM,WAAW,GAAG;gBAClB,EAAE,EAAE,EAAE,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,EAAE;gBACjD,EAAE,EAAE,EAAE,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,EAAE;aAClD,CAAC;YAEF,uBAAuB,CAAC,uBAAuB,CAAC,iBAAiB,CAAC,WAAkB,CAAC,CAAC;YACtF,uBAAuB,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC;YAExE,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,0BAA0B,EAAE,CAAC;YAEnE,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACrC,MAAM,CAAC,uBAAuB,CAAC,kBAAkB,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC;QAC9E,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,eAAe,EAAE,GAAG,EAAE;QAC7B,EAAE,CAAC,2CAA2C,EAAE,KAAK,IAAI,EAAE;YACzD,MAAM,aAAa,GAAG;gBACpB,SAAS,EAAE,QAAQ;gBACnB,QAAQ,EAAE,GAAG;aACd,CAAC;YAEF,MAAM,WAAW,GAAG;gBAClB,EAAE,EAAE,QAAQ;gBACZ,KAAK,EAAE,EAAE;aACV,CAAC;YAEF,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC,aAAoB,CAAC,CAAC;YAChF,qBAAqB,CAAC,QAAQ,CAAC,iBAAiB,CAAC,WAAkB,CAAC,CAAC;YAErE,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YAE9D,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,WAAW;QACxC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,qBAAqB,EAAE,GAAG,EAAE;QACnC,EAAE,CAAC,+CAA+C,EAAE,KAAK,IAAI,EAAE;YAC7D,MAAM,OAAO,GAAG;gBACd,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE,EAAE,EAAE;gBACrC,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,CAAC,EAAE;aACtC,CAAC;YAEF,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC,EAAE,QAAQ,EAAE,GAAG,EAAS,CAAC,CAAC;YACpF,uBAAuB,CAAC,MAAM,CAAC,iBAAiB,CAAC,EAAS,CAAC,CAAC;YAE5D,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC;YAEnE,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAC/B,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAChC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,sBAAsB,EAAE,GAAG,EAAE;QACpC,EAAE,CAAC,0CAA0C,EAAE,KAAK,IAAI,EAAE;YACxD,MAAM,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;YACvB,uBAAuB,CAAC,mBAAmB,CAAC,iBAAiB,CAAC;gBAC5D,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAE,IAAI,EAAE,IAAI,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE;gBAC1E,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAE,IAAI,EAAE,IAAI,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE;aACrE,CAAC,CAAC;YAEV,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC;gBACxD,QAAQ,EAAE,EAAE;aACN,CAAC,CAAC;YAEV,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,oBAAoB,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;YAEzE,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YAClC,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;QACjD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,oBAAoB,EAAE,GAAG,EAAE;QAClC,EAAE,CAAC,kDAAkD,EAAE,KAAK,IAAI,EAAE;YAChE,uBAAuB,CAAC,eAAe,CAAC,iBAAiB,CAAC;gBACxD,QAAQ,EAAE,EAAE;gBACZ,YAAY,EAAE,EAAE;aACV,CAAC,CAAC;YAEV,uBAAuB,CAAC,mBAAmB,CAAC,iBAAiB,CAAC;gBAC5D,EAAE,QAAQ,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE;gBAClE,EAAE,QAAQ,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE;gBACtE,EAAE,QAAQ,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,EAAE;aAChE,CAAC,CAAC;YAEV,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;YAEnE,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;YAChD,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,WAAW,EAAE,CAAC;QAC3C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,eAAe,EAAE,GAAG,EAAE;QAC7B,EAAE,CAAC,oDAAoD,EAAE,KAAK,IAAI,EAAE;YAClE,MAAM,WAAW,GAAG;gBAClB,SAAS,EAAE,QAAQ;gBACnB,YAAY,EAAE,aAAa;gBAC3B,UAAU,EAAE,aAAa;gBACzB,QAAQ,EAAE,EAAE;aACb,CAAC;YAEF,MAAM,gBAAgB,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;YAElD,MAAM,CAAC,uBAAuB,CAAC,gBAAgB,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC;QAC5E,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","names":[],"sources":["C:\\Adaptive_Testing\\src\\services\\inventory\\services\\inventory.service.spec.ts"],"sourcesContent":["/**\n * TDD: Inventory Management Service Tests\n *\n * Testing stock tracking, reservations, and inventory control\n */\n\nimport { InventoryService, AdjustInventoryDto, ReservationDto } from './inventory.service';\nimport { InventoryRepository } from '../repositories/inventory.repository';\nimport { ProductRepository } from '../../product-catalog/repositories/product.repository';\nimport { BadRequestError, ConflictError } from '@libs/errors';\n\ndescribe('InventoryService', () => {\n  let inventoryService: InventoryService;\n  let mockInventoryRepository: jest.Mocked<InventoryRepository>;\n  let mockProductRepository: jest.Mocked<ProductRepository>;\n\n  beforeEach(() => {\n    mockInventoryRepository = {\n      findByProductId: jest.fn(),\n      update: jest.fn(),\n      createReservation: jest.fn(),\n      releaseReservation: jest.fn(),\n      findReservation: jest.fn(),\n      findExpiredReservations: jest.fn(),\n      findLowStock: jest.fn(),\n      findOutOfStock: jest.fn(),\n      getInventoryHistory: jest.fn(),\n      recordAdjustment: jest.fn(),\n    } as any;\n\n    mockProductRepository = {\n      findById: jest.fn(),\n      updateInventory: jest.fn(),\n    } as any;\n\n    inventoryService = new InventoryService(mockInventoryRepository, mockProductRepository);\n  });\n\n  describe('getStock', () => {\n    it('should get current stock level for a product', async () => {\n      const mockInventory = {\n        productId: 'prod-1',\n        quantity: 100,\n        reserved: 10,\n        available: 90,\n      };\n\n      mockInventoryRepository.findByProductId.mockResolvedValue(mockInventory as any);\n\n      const result = await inventoryService.getStock('prod-1');\n\n      expect(result.quantity).toBe(100);\n      expect(result.available).toBe(90);\n    });\n\n    it('should calculate available stock (quantity - reserved)', async () => {\n      const mockInventory = {\n        productId: 'prod-1',\n        quantity: 50,\n        reserved: 15,\n      };\n\n      mockInventoryRepository.findByProductId.mockResolvedValue(mockInventory as any);\n\n      const result = await inventoryService.getStock('prod-1');\n\n      expect(result.available).toBe(35);\n    });\n  });\n\n  describe('adjustInventory', () => {\n    it('should increase inventory quantity', async () => {\n      const adjustDto: AdjustInventoryDto = {\n        productId: 'prod-1',\n        quantity: 50,\n        reason: 'restock',\n      };\n\n      const mockInventory = {\n        productId: 'prod-1',\n        quantity: 100,\n      };\n\n      mockInventoryRepository.findByProductId.mockResolvedValue(mockInventory as any);\n      mockInventoryRepository.update.mockResolvedValue({\n        ...mockInventory,\n        quantity: 150,\n      } as any);\n\n      const result = await inventoryService.adjustInventory(adjustDto);\n\n      expect(result.quantity).toBe(150);\n    });\n\n    it('should decrease inventory quantity', async () => {\n      const adjustDto: AdjustInventoryDto = {\n        productId: 'prod-1',\n        quantity: -20,\n        reason: 'damage',\n      };\n\n      const mockInventory = {\n        productId: 'prod-1',\n        quantity: 100,\n      };\n\n      mockInventoryRepository.findByProductId.mockResolvedValue(mockInventory as any);\n      mockInventoryRepository.update.mockResolvedValue({\n        ...mockInventory,\n        quantity: 80,\n      } as any);\n\n      const result = await inventoryService.adjustInventory(adjustDto);\n\n      expect(result.quantity).toBe(80);\n    });\n\n    it('should reject adjustment that would make quantity negative', async () => {\n      const adjustDto: AdjustInventoryDto = {\n        productId: 'prod-1',\n        quantity: -150,\n        reason: 'adjustment',\n      };\n\n      const mockInventory = {\n        productId: 'prod-1',\n        quantity: 100,\n      };\n\n      mockInventoryRepository.findByProductId.mockResolvedValue(mockInventory as any);\n\n      await expect(inventoryService.adjustInventory(adjustDto)).rejects.toThrow(BadRequestError);\n      await expect(inventoryService.adjustInventory(adjustDto)).rejects.toThrow('Insufficient inventory');\n    });\n\n    it('should record inventory adjustment in history', async () => {\n      const adjustDto: AdjustInventoryDto = {\n        productId: 'prod-1',\n        quantity: 50,\n        reason: 'restock',\n        userId: 'admin-1',\n      };\n\n      mockInventoryRepository.findByProductId.mockResolvedValue({ quantity: 100 } as any);\n      mockInventoryRepository.update.mockResolvedValue({ quantity: 150 } as any);\n      mockInventoryRepository.recordAdjustment.mockResolvedValue(undefined);\n\n      await inventoryService.adjustInventory(adjustDto);\n\n      expect(mockInventoryRepository.recordAdjustment).toHaveBeenCalledWith(\n        expect.objectContaining({\n          productId: 'prod-1',\n          quantity: 50,\n          reason: 'restock',\n        })\n      );\n    });\n  });\n\n  describe('reserveStock', () => {\n    it('should reserve stock for an order', async () => {\n      const reservationDto: ReservationDto = {\n        productId: 'prod-1',\n        quantity: 5,\n        orderId: 'order-1',\n      };\n\n      const mockInventory = {\n        productId: 'prod-1',\n        quantity: 100,\n        reserved: 10,\n        available: 90,\n      };\n\n      mockInventoryRepository.findByProductId.mockResolvedValue(mockInventory as any);\n      mockInventoryRepository.createReservation.mockResolvedValue({\n        id: 'reservation-1',\n        ...reservationDto,\n        expiresAt: new Date(Date.now() + 15 * 60 * 1000),\n      } as any);\n\n      const result = await inventoryService.reserveStock(reservationDto);\n\n      expect(result.quantity).toBe(5);\n      expect(result.expiresAt).toBeDefined();\n    });\n\n    it('should reject reservation if insufficient available stock', async () => {\n      const reservationDto: ReservationDto = {\n        productId: 'prod-1',\n        quantity: 100,\n        orderId: 'order-1',\n      };\n\n      const mockInventory = {\n        productId: 'prod-1',\n        quantity: 100,\n        reserved: 95,\n        available: 5,\n      };\n\n      mockInventoryRepository.findByProductId.mockResolvedValue(mockInventory as any);\n\n      await expect(inventoryService.reserveStock(reservationDto)).rejects.toThrow(ConflictError);\n      await expect(inventoryService.reserveStock(reservationDto)).rejects.toThrow('Insufficient stock available');\n    });\n\n    it('should set expiration time for reservation', async () => {\n      const reservationDto: ReservationDto = {\n        productId: 'prod-1',\n        quantity: 5,\n        orderId: 'order-1',\n        expirationMinutes: 30,\n      };\n\n      mockInventoryRepository.findByProductId.mockResolvedValue({\n        quantity: 100,\n        available: 100,\n      } as any);\n\n      mockInventoryRepository.createReservation.mockResolvedValue({\n        id: 'reservation-1',\n        expiresAt: new Date(Date.now() + 30 * 60 * 1000),\n      } as any);\n\n      const result = await inventoryService.reserveStock(reservationDto);\n\n      const expiresIn = result.expiresAt.getTime() - Date.now();\n      expect(expiresIn).toBeGreaterThan(29 * 60 * 1000);\n      expect(expiresIn).toBeLessThan(31 * 60 * 1000);\n    });\n  });\n\n  describe('releaseReservation', () => {\n    it('should release a stock reservation', async () => {\n      const mockReservation = {\n        id: 'reservation-1',\n        productId: 'prod-1',\n        quantity: 5,\n      };\n\n      mockInventoryRepository.findReservation.mockResolvedValue(mockReservation as any);\n      mockInventoryRepository.releaseReservation.mockResolvedValue(undefined);\n\n      await inventoryService.releaseReservation('reservation-1');\n\n      expect(mockInventoryRepository.releaseReservation).toHaveBeenCalledWith('reservation-1');\n    });\n\n    it('should update available quantity after releasing reservation', async () => {\n      const mockReservation = {\n        id: 'reservation-1',\n        productId: 'prod-1',\n        quantity: 5,\n      };\n\n      mockInventoryRepository.findReservation.mockResolvedValue(mockReservation as any);\n      mockInventoryRepository.releaseReservation.mockResolvedValue(undefined);\n\n      await inventoryService.releaseReservation('reservation-1');\n\n      // Verify that reserved quantity decreased\n      expect(mockInventoryRepository.releaseReservation).toHaveBeenCalled();\n    });\n  });\n\n  describe('confirmReservation', () => {\n    it('should convert reservation to actual inventory deduction', async () => {\n      const mockReservation = {\n        id: 'reservation-1',\n        productId: 'prod-1',\n        quantity: 5,\n        orderId: 'order-1',\n      };\n\n      const mockInventory = {\n        productId: 'prod-1',\n        quantity: 100,\n        reserved: 10,\n      };\n\n      mockInventoryRepository.findReservation.mockResolvedValue(mockReservation as any);\n      mockInventoryRepository.findByProductId.mockResolvedValue(mockInventory as any);\n      mockInventoryRepository.update.mockResolvedValue({\n        ...mockInventory,\n        quantity: 95,\n        reserved: 5,\n      } as any);\n\n      const result = await inventoryService.confirmReservation('reservation-1');\n\n      expect(result.quantity).toBe(95);\n    });\n  });\n\n  describe('checkAvailability', () => {\n    it('should check if quantity is available in stock', async () => {\n      mockInventoryRepository.findByProductId.mockResolvedValue({\n        quantity: 50,\n        reserved: 0,\n      } as any);\n\n      const result = await inventoryService.checkAvailability('prod-1', 30);\n\n      expect(result).toBe(true);\n    });\n\n    it('should return false if requested quantity exceeds available stock', async () => {\n      mockInventoryRepository.findByProductId.mockResolvedValue({\n        available: 50,\n      } as any);\n\n      const result = await inventoryService.checkAvailability('prod-1', 60);\n\n      expect(result).toBe(false);\n    });\n  });\n\n  describe('getLowStockProducts', () => {\n    it('should get products below minimum stock level', async () => {\n      const mockLowStock = [\n        { productId: 'prod-1', quantity: 5, minStockLevel: 10 },\n        { productId: 'prod-2', quantity: 2, minStockLevel: 20 },\n      ];\n\n      mockInventoryRepository.findLowStock.mockResolvedValue(mockLowStock as any);\n\n      const result = await inventoryService.getLowStockProducts();\n\n      expect(result).toHaveLength(2);\n      expect(result[0].quantity).toBeLessThan(result[0].minStockLevel);\n    });\n\n    it('should filter low stock by threshold percentage', async () => {\n      const mockLowStock = [\n        { productId: 'prod-1', quantity: 5, minStockLevel: 10 },\n      ];\n\n      mockInventoryRepository.findLowStock.mockResolvedValue(mockLowStock as any);\n\n      const result = await inventoryService.getLowStockProducts({ threshold: 50 });\n\n      expect(result[0].stockPercentage).toBeLessThanOrEqual(50);\n    });\n  });\n\n  describe('getOutOfStockProducts', () => {\n    it('should get products with zero stock', async () => {\n      const mockOutOfStock = [\n        { productId: 'prod-1', quantity: 0 },\n        { productId: 'prod-2', quantity: 0 },\n      ];\n\n      mockInventoryRepository.findOutOfStock.mockResolvedValue(mockOutOfStock as any);\n\n      const result = await inventoryService.getOutOfStockProducts();\n\n      expect(result.every(p => p.quantity === 0)).toBe(true);\n    });\n  });\n\n  describe('setMinStockLevel', () => {\n    it('should set minimum stock level for a product', async () => {\n      mockInventoryRepository.findByProductId.mockResolvedValue({\n        productId: 'prod-1',\n        quantity: 50,\n      } as any);\n\n      mockInventoryRepository.update.mockResolvedValue({\n        productId: 'prod-1',\n        minStockLevel: 20,\n      } as any);\n\n      const result = await inventoryService.setMinStockLevel('prod-1', 20);\n\n      expect(result.minStockLevel).toBe(20);\n    });\n\n    it('should reject negative minimum stock level', async () => {\n      await expect(\n        inventoryService.setMinStockLevel('prod-1', -10)\n      ).rejects.toThrow(BadRequestError);\n    });\n  });\n\n  describe('setReorderPoint', () => {\n    it('should set reorder point for automatic restocking', async () => {\n      mockInventoryRepository.findByProductId.mockResolvedValue({\n        productId: 'prod-1',\n      } as any);\n\n      mockInventoryRepository.update.mockResolvedValue({\n        productId: 'prod-1',\n        reorderPoint: 25,\n        reorderQuantity: 100,\n      } as any);\n\n      const result = await inventoryService.setReorderPoint('prod-1', 25, 100);\n\n      expect(result.reorderPoint).toBe(25);\n      expect(result.reorderQuantity).toBe(100);\n    });\n  });\n\n  describe('getInventoryHistory', () => {\n    it('should get inventory adjustment history', async () => {\n      const mockHistory = [\n        { id: '1', productId: 'prod-1', quantity: 50, reason: 'restock', date: new Date() },\n        { id: '2', productId: 'prod-1', quantity: -5, reason: 'sale', date: new Date() },\n      ];\n\n      mockInventoryRepository.getInventoryHistory.mockResolvedValue(mockHistory as any);\n\n      const result = await inventoryService.getInventoryHistory('prod-1');\n\n      expect(result).toHaveLength(2);\n    });\n\n    it('should filter history by date range', async () => {\n      const startDate = new Date('2025-01-01');\n      const endDate = new Date('2025-01-31');\n\n      mockInventoryRepository.getInventoryHistory.mockResolvedValue([] as any);\n\n      await inventoryService.getInventoryHistory('prod-1', { startDate, endDate });\n\n      expect(mockInventoryRepository.getInventoryHistory).toHaveBeenCalledWith(\n        'prod-1',\n        expect.objectContaining({ startDate, endDate })\n      );\n    });\n  });\n\n  describe('releaseExpiredReservations', () => {\n    it('should release all expired stock reservations', async () => {\n      const mockExpired = [\n        { id: 'res-1', productId: 'prod-1', quantity: 5 },\n        { id: 'res-2', productId: 'prod-2', quantity: 3 },\n      ];\n\n      mockInventoryRepository.findExpiredReservations.mockResolvedValue(mockExpired as any);\n      mockInventoryRepository.releaseReservation.mockResolvedValue(undefined);\n\n      const result = await inventoryService.releaseExpiredReservations();\n\n      expect(result.releasedCount).toBe(2);\n      expect(mockInventoryRepository.releaseReservation).toHaveBeenCalledTimes(2);\n    });\n  });\n\n  describe('getStockValue', () => {\n    it('should calculate total value of inventory', async () => {\n      const mockInventory = {\n        productId: 'prod-1',\n        quantity: 100,\n      };\n\n      const mockProduct = {\n        id: 'prod-1',\n        price: 50,\n      };\n\n      mockInventoryRepository.findByProductId.mockResolvedValue(mockInventory as any);\n      mockProductRepository.findById.mockResolvedValue(mockProduct as any);\n\n      const result = await inventoryService.getStockValue('prod-1');\n\n      expect(result).toBe(5000); // 100 * 50\n    });\n  });\n\n  describe('bulkUpdateInventory', () => {\n    it('should update inventory for multiple products', async () => {\n      const updates = [\n        { productId: 'prod-1', quantity: 10 },\n        { productId: 'prod-2', quantity: -5 },\n      ];\n\n      mockInventoryRepository.findByProductId.mockResolvedValue({ quantity: 100 } as any);\n      mockInventoryRepository.update.mockResolvedValue({} as any);\n\n      const result = await inventoryService.bulkUpdateInventory(updates);\n\n      expect(result.updated).toBe(2);\n      expect(result.failed).toBe(0);\n    });\n  });\n\n  describe('getInventoryTurnover', () => {\n    it('should calculate inventory turnover rate', async () => {\n      const now = new Date();\n      mockInventoryRepository.getInventoryHistory.mockResolvedValue([\n        { quantity: -10, date: new Date(now.getTime() - 5 * 24 * 60 * 60 * 1000) },\n        { quantity: -20, date: new Date(now.getTime() - 10 * 24 * 60 * 60 * 1000) },\n      ] as any);\n\n      mockInventoryRepository.findByProductId.mockResolvedValue({\n        quantity: 50,\n      } as any);\n\n      const result = await inventoryService.getInventoryTurnover('prod-1', 30);\n\n      expect(result.totalSold).toBe(30);\n      expect(result.turnoverRate).toBeGreaterThan(0);\n    });\n  });\n\n  describe('predictRestockDate', () => {\n    it('should predict when product will need restocking', async () => {\n      mockInventoryRepository.findByProductId.mockResolvedValue({\n        quantity: 50,\n        reorderPoint: 10,\n      } as any);\n\n      mockInventoryRepository.getInventoryHistory.mockResolvedValue([\n        { quantity: -2, date: new Date(Date.now() - 24 * 60 * 60 * 1000) },\n        { quantity: -2, date: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000) },\n        { quantity: -2, date: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000) },\n      ] as any);\n\n      const result = await inventoryService.predictRestockDate('prod-1');\n\n      expect(result.estimatedDays).toBeGreaterThan(0);\n      expect(result.restockDate).toBeDefined();\n    });\n  });\n\n  describe('transferStock', () => {\n    it('should transfer stock between warehouses/locations', async () => {\n      const transferDto = {\n        productId: 'prod-1',\n        fromLocation: 'warehouse-1',\n        toLocation: 'warehouse-2',\n        quantity: 20,\n      };\n\n      await inventoryService.transferStock(transferDto);\n\n      expect(mockInventoryRepository.recordAdjustment).toHaveBeenCalledTimes(2);\n    });\n  });\n});\n"],"version":3}