fcaa39af4709da2db7992d500e58e8e2
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Product = exports.ProductStatus = void 0;
const typeorm_1 = require("typeorm");
var ProductStatus;
(function (ProductStatus) {
    ProductStatus["DRAFT"] = "draft";
    ProductStatus["ACTIVE"] = "active";
    ProductStatus["OUT_OF_STOCK"] = "out_of_stock";
    ProductStatus["DISCONTINUED"] = "discontinued";
})(ProductStatus || (exports.ProductStatus = ProductStatus = {}));
let Product = class Product {
    id;
    name;
    description;
    sku;
    price;
    compareAtPrice;
    inventory;
    categoryId;
    status;
    images;
    metadata;
    rating;
    reviewCount;
    soldCount;
    createdAt;
    updatedAt;
    /**
     * Check if product is in stock
     */
    isInStock() {
        return this.inventory > 0 && this.status === ProductStatus.ACTIVE;
    }
    /**
     * Check if product is on sale
     */
    isOnSale() {
        return !!this.compareAtPrice && this.compareAtPrice > this.price;
    }
    /**
     * Calculate discount percentage
     */
    getDiscountPercentage() {
        if (!this.compareAtPrice || this.compareAtPrice <= this.price) {
            return 0;
        }
        return Math.round(((this.compareAtPrice - this.price) / this.compareAtPrice) * 100);
    }
};
exports.Product = Product;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Product.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    (0, typeorm_1.Index)(),
    __metadata("design:type", String)
], Product.prototype, "name", void 0);
__decorate([
    (0, typeorm_1.Column)('text'),
    __metadata("design:type", String)
], Product.prototype, "description", void 0);
__decorate([
    (0, typeorm_1.Column)({ unique: true }),
    (0, typeorm_1.Index)(),
    __metadata("design:type", String)
], Product.prototype, "sku", void 0);
__decorate([
    (0, typeorm_1.Column)('decimal', { precision: 10, scale: 2 }),
    __metadata("design:type", Number)
], Product.prototype, "price", void 0);
__decorate([
    (0, typeorm_1.Column)('decimal', { precision: 10, scale: 2, nullable: true }),
    __metadata("design:type", Number)
], Product.prototype, "compareAtPrice", void 0);
__decorate([
    (0, typeorm_1.Column)('int', { default: 0 }),
    __metadata("design:type", Number)
], Product.prototype, "inventory", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Product.prototype, "categoryId", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: ProductStatus,
        default: ProductStatus.DRAFT,
    }),
    __metadata("design:type", String)
], Product.prototype, "status", void 0);
__decorate([
    (0, typeorm_1.Column)('simple-array', { nullable: true }),
    __metadata("design:type", Array)
], Product.prototype, "images", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], Product.prototype, "metadata", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: 0 }),
    (0, typeorm_1.Index)(),
    __metadata("design:type", Number)
], Product.prototype, "rating", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: 0 }),
    __metadata("design:type", Number)
], Product.prototype, "reviewCount", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: 0 }),
    __metadata("design:type", Number)
], Product.prototype, "soldCount", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)(),
    __metadata("design:type", Date)
], Product.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)(),
    __metadata("design:type", Date)
], Product.prototype, "updatedAt", void 0);
exports.Product = Product = __decorate([
    (0, typeorm_1.Entity)('products')
], Product);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXEFkYXB0aXZlX1Rlc3RpbmdcXHNyY1xcc2VydmljZXNcXHByb2R1Y3QtY2F0YWxvZ1xcZW50aXRpZXNcXHByb2R1Y3QuZW50aXR5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBLHFDQU9pQjtBQUVqQixJQUFZLGFBS1g7QUFMRCxXQUFZLGFBQWE7SUFDdkIsZ0NBQWUsQ0FBQTtJQUNmLGtDQUFpQixDQUFBO0lBQ2pCLDhDQUE2QixDQUFBO0lBQzdCLDhDQUE2QixDQUFBO0FBQy9CLENBQUMsRUFMVyxhQUFhLDZCQUFiLGFBQWEsUUFLeEI7QUFHTSxJQUFNLE9BQU8sR0FBYixNQUFNLE9BQU87SUFFbEIsRUFBRSxDQUFVO0lBSVosSUFBSSxDQUFVO0lBR2QsV0FBVyxDQUFVO0lBSXJCLEdBQUcsQ0FBVTtJQUdiLEtBQUssQ0FBVTtJQUdmLGNBQWMsQ0FBVTtJQUd4QixTQUFTLENBQVU7SUFHbkIsVUFBVSxDQUFVO0lBT3BCLE1BQU0sQ0FBaUI7SUFHdkIsTUFBTSxDQUFZO0lBR2xCLFFBQVEsQ0FBMkI7SUFJbkMsTUFBTSxDQUFVO0lBR2hCLFdBQVcsQ0FBVTtJQUdyQixTQUFTLENBQVU7SUFHbkIsU0FBUyxDQUFRO0lBR2pCLFNBQVMsQ0FBUTtJQUVqQjs7T0FFRztJQUNILFNBQVM7UUFDUCxPQUFPLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxNQUFNLEtBQUssYUFBYSxDQUFDLE1BQU0sQ0FBQztJQUNwRSxDQUFDO0lBRUQ7O09BRUc7SUFDSCxRQUFRO1FBQ04sT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsSUFBSSxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDbkUsQ0FBQztJQUVEOztPQUVHO0lBQ0gscUJBQXFCO1FBQ25CLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxJQUFJLElBQUksQ0FBQyxjQUFjLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQzlELE9BQU8sQ0FBQyxDQUFDO1FBQ1gsQ0FBQztRQUNELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQ3RGLENBQUM7Q0FDRixDQUFBO0FBL0VZLDBCQUFPO0FBRWxCO0lBREMsSUFBQSxnQ0FBc0IsRUFBQyxNQUFNLENBQUM7O21DQUNuQjtBQUlaO0lBRkMsSUFBQSxnQkFBTSxHQUFFO0lBQ1IsSUFBQSxlQUFLLEdBQUU7O3FDQUNNO0FBR2Q7SUFEQyxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDOzs0Q0FDTTtBQUlyQjtJQUZDLElBQUEsZ0JBQU0sRUFBQyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQztJQUN4QixJQUFBLGVBQUssR0FBRTs7b0NBQ0s7QUFHYjtJQURDLElBQUEsZ0JBQU0sRUFBQyxTQUFTLEVBQUUsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQzs7c0NBQ2hDO0FBR2Y7SUFEQyxJQUFBLGdCQUFNLEVBQUMsU0FBUyxFQUFFLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQzs7K0NBQ3ZDO0FBR3hCO0lBREMsSUFBQSxnQkFBTSxFQUFDLEtBQUssRUFBRSxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQzs7MENBQ1g7QUFHbkI7SUFEQyxJQUFBLGdCQUFNLEVBQUMsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUM7OzJDQUNQO0FBT3BCO0lBTEMsSUFBQSxnQkFBTSxFQUFDO1FBQ04sSUFBSSxFQUFFLE1BQU07UUFDWixJQUFJLEVBQUUsYUFBYTtRQUNuQixPQUFPLEVBQUUsYUFBYSxDQUFDLEtBQUs7S0FDN0IsQ0FBQzs7dUNBQ3FCO0FBR3ZCO0lBREMsSUFBQSxnQkFBTSxFQUFDLGNBQWMsRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQzs7dUNBQ3pCO0FBR2xCO0lBREMsSUFBQSxnQkFBTSxFQUFDLE9BQU8sRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQzs7eUNBQ0Q7QUFJbkM7SUFGQyxJQUFBLGdCQUFNLEVBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDdEIsSUFBQSxlQUFLLEdBQUU7O3VDQUNRO0FBR2hCO0lBREMsSUFBQSxnQkFBTSxFQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDOzs0Q0FDRjtBQUdyQjtJQURDLElBQUEsZ0JBQU0sRUFBQyxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQzs7MENBQ0o7QUFHbkI7SUFEQyxJQUFBLDBCQUFnQixHQUFFOzhCQUNQLElBQUk7MENBQUM7QUFHakI7SUFEQyxJQUFBLDBCQUFnQixHQUFFOzhCQUNQLElBQUk7MENBQUM7a0JBdEROLE9BQU87SUFEbkIsSUFBQSxnQkFBTSxFQUFDLFVBQVUsQ0FBQztHQUNOLE9BQU8sQ0ErRW5CIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxBZGFwdGl2ZV9UZXN0aW5nXFxzcmNcXHNlcnZpY2VzXFxwcm9kdWN0LWNhdGFsb2dcXGVudGl0aWVzXFxwcm9kdWN0LmVudGl0eS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBFbnRpdHksXG4gIFByaW1hcnlHZW5lcmF0ZWRDb2x1bW4sXG4gIENvbHVtbixcbiAgQ3JlYXRlRGF0ZUNvbHVtbixcbiAgVXBkYXRlRGF0ZUNvbHVtbixcbiAgSW5kZXgsXG59IGZyb20gJ3R5cGVvcm0nO1xuXG5leHBvcnQgZW51bSBQcm9kdWN0U3RhdHVzIHtcbiAgRFJBRlQgPSAnZHJhZnQnLFxuICBBQ1RJVkUgPSAnYWN0aXZlJyxcbiAgT1VUX09GX1NUT0NLID0gJ291dF9vZl9zdG9jaycsXG4gIERJU0NPTlRJTlVFRCA9ICdkaXNjb250aW51ZWQnLFxufVxuXG5ARW50aXR5KCdwcm9kdWN0cycpXG5leHBvcnQgY2xhc3MgUHJvZHVjdCB7XG4gIEBQcmltYXJ5R2VuZXJhdGVkQ29sdW1uKCd1dWlkJylcbiAgaWQhOiBzdHJpbmc7XG5cbiAgQENvbHVtbigpXG4gIEBJbmRleCgpXG4gIG5hbWUhOiBzdHJpbmc7XG5cbiAgQENvbHVtbigndGV4dCcpXG4gIGRlc2NyaXB0aW9uITogc3RyaW5nO1xuXG4gIEBDb2x1bW4oeyB1bmlxdWU6IHRydWUgfSlcbiAgQEluZGV4KClcbiAgc2t1ITogc3RyaW5nO1xuXG4gIEBDb2x1bW4oJ2RlY2ltYWwnLCB7IHByZWNpc2lvbjogMTAsIHNjYWxlOiAyIH0pXG4gIHByaWNlITogbnVtYmVyO1xuXG4gIEBDb2x1bW4oJ2RlY2ltYWwnLCB7IHByZWNpc2lvbjogMTAsIHNjYWxlOiAyLCBudWxsYWJsZTogdHJ1ZSB9KVxuICBjb21wYXJlQXRQcmljZT86IG51bWJlcjtcblxuICBAQ29sdW1uKCdpbnQnLCB7IGRlZmF1bHQ6IDAgfSlcbiAgaW52ZW50b3J5ITogbnVtYmVyO1xuXG4gIEBDb2x1bW4oeyBudWxsYWJsZTogdHJ1ZSB9KVxuICBjYXRlZ29yeUlkPzogc3RyaW5nO1xuXG4gIEBDb2x1bW4oe1xuICAgIHR5cGU6ICdlbnVtJyxcbiAgICBlbnVtOiBQcm9kdWN0U3RhdHVzLFxuICAgIGRlZmF1bHQ6IFByb2R1Y3RTdGF0dXMuRFJBRlQsXG4gIH0pXG4gIHN0YXR1cyE6IFByb2R1Y3RTdGF0dXM7XG5cbiAgQENvbHVtbignc2ltcGxlLWFycmF5JywgeyBudWxsYWJsZTogdHJ1ZSB9KVxuICBpbWFnZXM/OiBzdHJpbmdbXTtcblxuICBAQ29sdW1uKCdqc29uYicsIHsgbnVsbGFibGU6IHRydWUgfSlcbiAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcblxuICBAQ29sdW1uKHsgZGVmYXVsdDogMCB9KVxuICBASW5kZXgoKVxuICByYXRpbmchOiBudW1iZXI7XG5cbiAgQENvbHVtbih7IGRlZmF1bHQ6IDAgfSlcbiAgcmV2aWV3Q291bnQhOiBudW1iZXI7XG5cbiAgQENvbHVtbih7IGRlZmF1bHQ6IDAgfSlcbiAgc29sZENvdW50ITogbnVtYmVyO1xuXG4gIEBDcmVhdGVEYXRlQ29sdW1uKClcbiAgY3JlYXRlZEF0ITogRGF0ZTtcblxuICBAVXBkYXRlRGF0ZUNvbHVtbigpXG4gIHVwZGF0ZWRBdCE6IERhdGU7XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHByb2R1Y3QgaXMgaW4gc3RvY2tcbiAgICovXG4gIGlzSW5TdG9jaygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pbnZlbnRvcnkgPiAwICYmIHRoaXMuc3RhdHVzID09PSBQcm9kdWN0U3RhdHVzLkFDVElWRTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBwcm9kdWN0IGlzIG9uIHNhbGVcbiAgICovXG4gIGlzT25TYWxlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIXRoaXMuY29tcGFyZUF0UHJpY2UgJiYgdGhpcy5jb21wYXJlQXRQcmljZSA+IHRoaXMucHJpY2U7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIGRpc2NvdW50IHBlcmNlbnRhZ2VcbiAgICovXG4gIGdldERpc2NvdW50UGVyY2VudGFnZSgpOiBudW1iZXIge1xuICAgIGlmICghdGhpcy5jb21wYXJlQXRQcmljZSB8fCB0aGlzLmNvbXBhcmVBdFByaWNlIDw9IHRoaXMucHJpY2UpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gTWF0aC5yb3VuZCgoKHRoaXMuY29tcGFyZUF0UHJpY2UgLSB0aGlzLnByaWNlKSAvIHRoaXMuY29tcGFyZUF0UHJpY2UpICogMTAwKTtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9