{"file":"C:\\Adaptive_Testing\\src\\app.ts","mappings":"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","names":[],"sources":["C:\\Adaptive_Testing\\src\\app.ts"],"sourcesContent":["/**\n * Express Application Setup\n *\n * Main application configuration for E2E and integration testing\n */\n\nimport express, { Express, Request, Response, NextFunction } from 'express';\nimport cors from 'cors';\nimport helmet from 'helmet';\nimport compression from 'compression';\nimport { BaseError } from './libs/errors';\n\n/**\n * Create and configure Express application\n */\nexport async function createApp(): Promise<Express> {\n  const app = express();\n\n  // Security middleware\n  app.use(helmet());\n  app.use(cors({\n    origin: process.env.CORS_ORIGIN || '*',\n    credentials: true,\n  }));\n\n  // Body parsing middleware\n  app.use(express.json({ limit: '10mb' }));\n  app.use(express.urlencoded({ extended: true, limit: '10mb' }));\n\n  // Compression middleware\n  app.use(compression());\n\n  // Health check endpoint\n  app.get('/health', (_req: Request, res: Response) => {\n    res.json({ status: 'ok', timestamp: new Date().toISOString() });\n  });\n\n  // API routes would be mounted here\n  // In a full implementation, these would import actual route handlers\n  // For testing purposes, we'll set up mock endpoints\n\n  // User routes\n  setupUserRoutes(app);\n\n  // Product routes\n  setupProductRoutes(app);\n\n  // Order routes\n  setupOrderRoutes(app);\n\n  // Cart routes\n  setupCartRoutes(app);\n\n  // Notification routes\n  setupNotificationRoutes(app);\n\n  // Analytics routes (admin only)\n  setupAnalyticsRoutes(app);\n\n  // GraphQL endpoint\n  setupGraphQL(app);\n\n  // Error handling middleware (must be last)\n  app.use((err: Error, _req: Request, res: Response, _next: NextFunction) => {\n    if (err instanceof BaseError) {\n      res.status(err.statusCode).json({\n        error: err.message,\n        statusCode: err.statusCode,\n        timestamp: err.timestamp,\n      });\n      return;\n    }\n\n    // Unknown error\n    console.error('Unexpected error:', err);\n    res.status(500).json({\n      error: 'Internal server error',\n      statusCode: 500,\n    });\n  });\n\n  // 404 handler\n  app.use((req: Request, res: Response) => {\n    res.status(404).json({\n      error: 'Not found',\n      statusCode: 404,\n      path: req.path,\n    });\n  });\n\n  return app;\n}\n\n/**\n * Setup user-related routes\n */\nfunction setupUserRoutes(app: Express): void {\n  app.post('/api/users/register', mockHandler);\n  app.post('/api/users/login', mockHandler);\n  app.get('/api/users/profile', mockHandler);\n  app.put('/api/users/profile', mockHandler);\n  app.post('/api/users/verify-email', mockHandler);\n  app.post('/api/users/forgot-password', mockHandler);\n  app.post('/api/users/reset-password', mockHandler);\n  app.post('/api/users/change-password', mockHandler);\n  app.get('/api/users', mockHandler); // Admin only\n  app.get('/api/users/:id', mockHandler); // Admin only\n  app.put('/api/users/:id', mockHandler); // Admin only\n  app.delete('/api/users/:id', mockHandler); // Admin only\n}\n\n/**\n * Setup product-related routes\n */\nfunction setupProductRoutes(app: Express): void {\n  app.get('/api/products', mockHandler);\n  app.get('/api/products/search', mockHandler);\n  app.get('/api/products/featured', mockHandler);\n  app.get('/api/products/top-selling', mockHandler);\n  app.get('/api/products/top-rated', mockHandler);\n  app.get('/api/products/on-sale', mockHandler);\n  app.get('/api/products/low-stock', mockHandler); // Admin only\n  app.get('/api/products/:id', mockHandler);\n  app.get('/api/products/:id/related', mockHandler);\n  app.get('/api/products/:id/reviews', mockHandler);\n  app.post('/api/products/:id/reviews', mockHandler);\n  app.post('/api/products/:id/images', mockHandler); // Admin only\n  app.get('/api/products/:id/variants', mockHandler);\n  app.post('/api/products', mockHandler); // Admin only\n  app.put('/api/products/:id', mockHandler); // Admin only\n  app.delete('/api/products/:id', mockHandler); // Admin only\n}\n\n/**\n * Setup order-related routes\n */\nfunction setupOrderRoutes(app: Express): void {\n  app.post('/api/orders', mockHandler);\n  app.get('/api/orders', mockHandler);\n  app.get('/api/orders/stats', mockHandler); // Admin only\n  app.get('/api/orders/recent', mockHandler); // Admin only\n  app.get('/api/orders/export', mockHandler); // Admin only\n  app.post('/api/orders/bulk-update', mockHandler); // Admin only\n  app.get('/api/orders/:id', mockHandler);\n  app.post('/api/orders/:id/cancel', mockHandler);\n  app.post('/api/orders/:id/payment', mockHandler);\n  app.post('/api/orders/:id/shipping', mockHandler); // Admin only\n  app.post('/api/orders/:id/ship', mockHandler); // Admin only\n  app.post('/api/orders/:id/delivered', mockHandler); // Admin only\n  app.post('/api/orders/:id/refund', mockHandler); // Admin only\n  app.get('/api/orders/:id/history', mockHandler);\n  app.get('/api/orders/:id/tracking', mockHandler);\n  app.post('/api/orders/:id/notes', mockHandler);\n  app.get('/api/orders/:id/notes', mockHandler);\n}\n\n/**\n * Setup cart-related routes\n */\nfunction setupCartRoutes(app: Express): void {\n  app.get('/api/cart', mockHandler);\n  app.post('/api/cart/items', mockHandler);\n  app.put('/api/cart/items/:productId', mockHandler);\n  app.delete('/api/cart/items/:productId', mockHandler);\n  app.delete('/api/cart', mockHandler);\n  app.post('/api/cart/apply-discount', mockHandler);\n}\n\n/**\n * Setup notification-related routes\n */\nfunction setupNotificationRoutes(app: Express): void {\n  app.post('/api/notifications/subscribe', mockHandler);\n  app.get('/api/notifications/preferences', mockHandler);\n  app.put('/api/notifications/preferences', mockHandler);\n}\n\n/**\n * Setup analytics routes\n */\nfunction setupAnalyticsRoutes(app: Express): void {\n  app.get('/api/analytics/dashboard', mockHandler); // Admin only\n  app.get('/api/analytics/sales', mockHandler); // Admin only\n  app.get('/api/analytics/users', mockHandler); // Admin only\n  app.get('/api/analytics/products', mockHandler); // Admin only\n}\n\n/**\n * Setup GraphQL endpoint\n */\nfunction setupGraphQL(app: Express): void {\n  app.post('/graphql', mockGraphQLHandler);\n  app.get('/graphql', mockGraphQLHandler);\n}\n\n/**\n * Mock request handler for testing\n * In production, this would be replaced with actual route handlers\n */\nfunction mockHandler(req: Request, res: Response, _next: NextFunction) {\n  // For testing, return appropriate mock responses based on the route\n  const method = req.method;\n  const path = req.path;\n\n  // Extract auth token if present\n  const authHeader = req.headers.authorization;\n  const hasAuth = !!authHeader;\n\n  // Check for admin role (simplified)\n  const isAdmin = authHeader?.includes('admin');\n\n  // Handle different routes\n  if (path === '/api/users/register' && method === 'POST') {\n    return res.status(201).json({\n      user: {\n        id: 'user-' + Date.now(),\n        email: req.body.email,\n        firstName: req.body.firstName,\n        lastName: req.body.lastName,\n        emailVerificationToken: 'mock-token',\n        status: 'pending',\n      },\n    });\n  }\n\n  if (path === '/api/users/login' && method === 'POST') {\n    return res.json({\n      user: {\n        id: 'user-123',\n        email: req.body.email,\n      },\n      token: 'mock-jwt-token',\n    });\n  }\n\n  if (path === '/api/users/profile' && method === 'GET') {\n    if (!hasAuth) return res.status(401).json({ error: 'Unauthorized' });\n    return res.json({\n      id: 'user-123',\n      email: 'test@test.com',\n      firstName: 'Test',\n      lastName: 'User',\n      role: 'customer',\n    });\n  }\n\n  if (path === '/api/products' && method === 'GET') {\n    return res.json({\n      items: [\n        { id: 'prod-1', name: 'Product 1', price: 99.99, inventory: 10 },\n        { id: 'prod-2', name: 'Product 2', price: 149.99, inventory: 5 },\n      ],\n      total: 2,\n      page: 1,\n      limit: 10,\n    });\n  }\n\n  if (path.startsWith('/api/products/') && method === 'GET') {\n    const productId = path.split('/')[3];\n    return res.json({\n      id: productId,\n      name: 'Test Product',\n      price: 99.99,\n      inventory: 10,\n      rating: 4.5,\n      reviewCount: 100,\n    });\n  }\n\n  if (path === '/api/cart' && method === 'GET') {\n    if (!hasAuth) return res.status(401).json({ error: 'Unauthorized' });\n    return res.json({\n      items: [],\n      subtotal: 0,\n      total: 0,\n    });\n  }\n\n  if (path === '/api/orders' && method === 'POST') {\n    if (!hasAuth) return res.status(401).json({ error: 'Unauthorized' });\n    return res.status(201).json({\n      id: 'order-' + Date.now(),\n      orderNumber: 'ORD-' + Date.now(),\n      status: 'pending',\n      items: [],\n      total: 0,\n    });\n  }\n\n  // Admin-only routes\n  if (path === '/api/users' && method === 'GET') {\n    if (!isAdmin) return res.status(403).json({ error: 'Forbidden - admin access required' });\n    return res.json({\n      users: [],\n      total: 0,\n      page: 1,\n      limit: 10,\n    });\n  }\n\n  // Default response\n  return res.json({\n    success: true,\n    message: 'Mock endpoint',\n    method,\n    path,\n  });\n}\n\n/**\n * Mock GraphQL handler\n */\nfunction mockGraphQLHandler(req: Request, res: Response) {\n  const query = req.body?.query || '';\n\n  // Simple GraphQL response mocking\n  if (query.includes('products')) {\n    return res.json({\n      data: {\n        products: {\n          items: [\n            { id: 'prod-1', name: 'Product 1', price: 99.99 },\n          ],\n          total: 1,\n        },\n      },\n    });\n  }\n\n  if (query.includes('me')) {\n    const authHeader = req.headers.authorization;\n    if (!authHeader) {\n      return res.json({\n        errors: [{ message: 'Authentication required' }],\n      });\n    }\n\n    return res.json({\n      data: {\n        me: {\n          id: 'user-123',\n          email: 'test@test.com',\n          firstName: 'Test',\n          lastName: 'User',\n        },\n      },\n    });\n  }\n\n  return res.json({\n    data: {},\n  });\n}\n"],"version":3}