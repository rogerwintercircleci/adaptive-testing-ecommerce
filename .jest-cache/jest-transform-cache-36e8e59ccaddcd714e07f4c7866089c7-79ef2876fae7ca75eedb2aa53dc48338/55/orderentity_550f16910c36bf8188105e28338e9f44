57a71fd7e3c27b75e06cc60a8457f729
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Order = exports.OrderItem = exports.PaymentMethod = exports.PaymentStatus = exports.OrderStatus = void 0;
const typeorm_1 = require("typeorm");
var OrderStatus;
(function (OrderStatus) {
    OrderStatus["PENDING"] = "pending";
    OrderStatus["CONFIRMED"] = "confirmed";
    OrderStatus["PROCESSING"] = "processing";
    OrderStatus["SHIPPED"] = "shipped";
    OrderStatus["DELIVERED"] = "delivered";
    OrderStatus["CANCELLED"] = "cancelled";
    OrderStatus["REFUNDED"] = "refunded";
})(OrderStatus || (exports.OrderStatus = OrderStatus = {}));
var PaymentStatus;
(function (PaymentStatus) {
    PaymentStatus["PENDING"] = "pending";
    PaymentStatus["PAID"] = "paid";
    PaymentStatus["FAILED"] = "failed";
    PaymentStatus["REFUNDED"] = "refunded";
})(PaymentStatus || (exports.PaymentStatus = PaymentStatus = {}));
var PaymentMethod;
(function (PaymentMethod) {
    PaymentMethod["CREDIT_CARD"] = "credit_card";
    PaymentMethod["DEBIT_CARD"] = "debit_card";
    PaymentMethod["PAYPAL"] = "paypal";
    PaymentMethod["BANK_TRANSFER"] = "bank_transfer";
})(PaymentMethod || (exports.PaymentMethod = PaymentMethod = {}));
let OrderItem = class OrderItem {
    id;
    orderId;
    productId;
    productName;
    productSku;
    unitPrice;
    quantity;
    subtotal;
    /**
     * Calculate subtotal
     */
    calculateSubtotal() {
        return this.unitPrice * this.quantity;
    }
};
exports.OrderItem = OrderItem;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], OrderItem.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], OrderItem.prototype, "orderId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], OrderItem.prototype, "productId", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], OrderItem.prototype, "productName", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    __metadata("design:type", String)
], OrderItem.prototype, "productSku", void 0);
__decorate([
    (0, typeorm_1.Column)('decimal', { precision: 10, scale: 2 }),
    __metadata("design:type", Number)
], OrderItem.prototype, "unitPrice", void 0);
__decorate([
    (0, typeorm_1.Column)('int'),
    __metadata("design:type", Number)
], OrderItem.prototype, "quantity", void 0);
__decorate([
    (0, typeorm_1.Column)('decimal', { precision: 10, scale: 2 }),
    __metadata("design:type", Number)
], OrderItem.prototype, "subtotal", void 0);
exports.OrderItem = OrderItem = __decorate([
    (0, typeorm_1.Entity)('order_items')
], OrderItem);
let Order = class Order {
    id;
    userId;
    orderNumber;
    status;
    paymentStatus;
    paymentMethod;
    subtotal;
    taxAmount;
    shippingCost;
    discountAmount;
    total;
    discountCode;
    shippingAddress;
    billingAddress;
    items;
    notes;
    trackingNumber;
    paidAt;
    shippedAt;
    deliveredAt;
    cancelledAt;
    createdAt;
    updatedAt;
    /**
     * Calculate total amount
     */
    calculateTotal() {
        return this.subtotal + this.taxAmount + this.shippingCost - this.discountAmount;
    }
    /**
     * Calculate subtotal from items
     */
    calculateSubtotal() {
        return this.items.reduce((sum, item) => sum + item.subtotal, 0);
    }
    /**
     * Check if order can be cancelled
     */
    canBeCancelled() {
        return [OrderStatus.PENDING, OrderStatus.CONFIRMED].includes(this.status);
    }
    /**
     * Check if order is fulfilled
     */
    isFulfilled() {
        return this.status === OrderStatus.DELIVERED;
    }
    /**
     * Check if order is paid
     */
    isPaid() {
        return this.paymentStatus === PaymentStatus.PAID;
    }
    /**
     * Get total items count
     */
    getTotalItemsCount() {
        return this.items.reduce((sum, item) => sum + item.quantity, 0);
    }
};
exports.Order = Order;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Order.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    (0, typeorm_1.Index)(),
    __metadata("design:type", String)
], Order.prototype, "userId", void 0);
__decorate([
    (0, typeorm_1.Column)({ unique: true }),
    (0, typeorm_1.Index)(),
    __metadata("design:type", String)
], Order.prototype, "orderNumber", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: OrderStatus,
        default: OrderStatus.PENDING,
    }),
    (0, typeorm_1.Index)(),
    __metadata("design:type", String)
], Order.prototype, "status", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: PaymentStatus,
        default: PaymentStatus.PENDING,
    }),
    __metadata("design:type", String)
], Order.prototype, "paymentStatus", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: PaymentMethod,
        nullable: true,
    }),
    __metadata("design:type", String)
], Order.prototype, "paymentMethod", void 0);
__decorate([
    (0, typeorm_1.Column)('decimal', { precision: 10, scale: 2 }),
    __metadata("design:type", Number)
], Order.prototype, "subtotal", void 0);
__decorate([
    (0, typeorm_1.Column)('decimal', { precision: 10, scale: 2, default: 0 }),
    __metadata("design:type", Number)
], Order.prototype, "taxAmount", void 0);
__decorate([
    (0, typeorm_1.Column)('decimal', { precision: 10, scale: 2, default: 0 }),
    __metadata("design:type", Number)
], Order.prototype, "shippingCost", void 0);
__decorate([
    (0, typeorm_1.Column)('decimal', { precision: 10, scale: 2, default: 0 }),
    __metadata("design:type", Number)
], Order.prototype, "discountAmount", void 0);
__decorate([
    (0, typeorm_1.Column)('decimal', { precision: 10, scale: 2 }),
    __metadata("design:type", Number)
], Order.prototype, "total", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Order.prototype, "discountCode", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb'),
    __metadata("design:type", Object)
], Order.prototype, "shippingAddress", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], Order.prototype, "billingAddress", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb'),
    __metadata("design:type", Array)
], Order.prototype, "items", void 0);
__decorate([
    (0, typeorm_1.Column)('text', { nullable: true }),
    __metadata("design:type", String)
], Order.prototype, "notes", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Order.prototype, "trackingNumber", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'timestamp', nullable: true }),
    __metadata("design:type", Date)
], Order.prototype, "paidAt", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'timestamp', nullable: true }),
    __metadata("design:type", Date)
], Order.prototype, "shippedAt", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'timestamp', nullable: true }),
    __metadata("design:type", Date)
], Order.prototype, "deliveredAt", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'timestamp', nullable: true }),
    __metadata("design:type", Date)
], Order.prototype, "cancelledAt", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)(),
    __metadata("design:type", Date)
], Order.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)(),
    __metadata("design:type", Date)
], Order.prototype, "updatedAt", void 0);
exports.Order = Order = __decorate([
    (0, typeorm_1.Entity)('orders')
], Order);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXEFkYXB0aXZlX1Rlc3RpbmdcXHNyY1xcc2VydmljZXNcXG9yZGVyLXByb2Nlc3NpbmdcXGVudGl0aWVzXFxvcmRlci5lbnRpdHkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEscUNBT2lCO0FBRWpCLElBQVksV0FRWDtBQVJELFdBQVksV0FBVztJQUNyQixrQ0FBbUIsQ0FBQTtJQUNuQixzQ0FBdUIsQ0FBQTtJQUN2Qix3Q0FBeUIsQ0FBQTtJQUN6QixrQ0FBbUIsQ0FBQTtJQUNuQixzQ0FBdUIsQ0FBQTtJQUN2QixzQ0FBdUIsQ0FBQTtJQUN2QixvQ0FBcUIsQ0FBQTtBQUN2QixDQUFDLEVBUlcsV0FBVywyQkFBWCxXQUFXLFFBUXRCO0FBRUQsSUFBWSxhQUtYO0FBTEQsV0FBWSxhQUFhO0lBQ3ZCLG9DQUFtQixDQUFBO0lBQ25CLDhCQUFhLENBQUE7SUFDYixrQ0FBaUIsQ0FBQTtJQUNqQixzQ0FBcUIsQ0FBQTtBQUN2QixDQUFDLEVBTFcsYUFBYSw2QkFBYixhQUFhLFFBS3hCO0FBRUQsSUFBWSxhQUtYO0FBTEQsV0FBWSxhQUFhO0lBQ3ZCLDRDQUEyQixDQUFBO0lBQzNCLDBDQUF5QixDQUFBO0lBQ3pCLGtDQUFpQixDQUFBO0lBQ2pCLGdEQUErQixDQUFBO0FBQ2pDLENBQUMsRUFMVyxhQUFhLDZCQUFiLGFBQWEsUUFLeEI7QUFHTSxJQUFNLFNBQVMsR0FBZixNQUFNLFNBQVM7SUFFcEIsRUFBRSxDQUFVO0lBR1osT0FBTyxDQUFVO0lBR2pCLFNBQVMsQ0FBVTtJQUduQixXQUFXLENBQVU7SUFHckIsVUFBVSxDQUFVO0lBR3BCLFNBQVMsQ0FBVTtJQUduQixRQUFRLENBQVU7SUFHbEIsUUFBUSxDQUFVO0lBRWxCOztPQUVHO0lBQ0gsaUJBQWlCO1FBQ2YsT0FBTyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDeEMsQ0FBQztDQUNGLENBQUE7QUEvQlksOEJBQVM7QUFFcEI7SUFEQyxJQUFBLGdDQUFzQixFQUFDLE1BQU0sQ0FB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c2VydmljZXNcXG9yZGVyLXByb2Nlc3NpbmdcXGVudGl0aWVzXFxvcmRlci5lbnRpdHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgRW50aXR5LFxuICBQcmltYXJ5R2VuZXJhdGVkQ29sdW1uLFxuICBDb2x1bW4sXG4gIENyZWF0ZURhdGVDb2x1bW4sXG4gIFVwZGF0ZURhdGVDb2x1bW4sXG4gIEluZGV4LFxufSBmcm9tICd0eXBlb3JtJztcblxuZXhwb3J0IGVudW0gT3JkZXJTdGF0dXMge1xuICBQRU5ESU5HID0gJ3BlbmRpbmcnLFxuICBDT05GSVJNRUQgPSAnY29uZmlybWVkJyxcbiAgUFJPQ0VTU0lORyA9ICdwcm9jZXNzaW5nJyxcbiAgU0hJUFBFRCA9ICdzaGlwcGVkJyxcbiAgREVMSVZFUkVEID0gJ2RlbGl2ZXJlZCcsXG4gIENBTkNFTExFRCA9ICdjYW5jZWxsZWQnLFxuICBSRUZVTkRFRCA9ICdyZWZ1bmRlZCcsXG59XG5cbmV4cG9ydCBlbnVtIFBheW1lbnRTdGF0dXMge1xuICBQRU5ESU5HID0gJ3BlbmRpbmcnLFxuICBQQUlEID0gJ3BhaWQnLFxuICBGQUlMRUQgPSAnZmFpbGVkJyxcbiAgUkVGVU5ERUQgPSAncmVmdW5kZWQnLFxufVxuXG5leHBvcnQgZW51bSBQYXltZW50TWV0aG9kIHtcbiAgQ1JFRElUX0NBUkQgPSAnY3JlZGl0X2NhcmQnLFxuICBERUJJVF9DQVJEID0gJ2RlYml0X2NhcmQnLFxuICBQQVlQQUwgPSAncGF5cGFsJyxcbiAgQkFOS19UUkFOU0ZFUiA9ICdiYW5rX3RyYW5zZmVyJyxcbn1cblxuQEVudGl0eSgnb3JkZXJfaXRlbXMnKVxuZXhwb3J0IGNsYXNzIE9yZGVySXRlbSB7XG4gIEBQcmltYXJ5R2VuZXJhdGVkQ29sdW1uKCd1dWlkJylcbiAgaWQhOiBzdHJpbmc7XG5cbiAgQENvbHVtbigpXG4gIG9yZGVySWQhOiBzdHJpbmc7XG5cbiAgQENvbHVtbigpXG4gIHByb2R1Y3RJZCE6IHN0cmluZztcblxuICBAQ29sdW1uKClcbiAgcHJvZHVjdE5hbWUhOiBzdHJpbmc7XG5cbiAgQENvbHVtbigpXG4gIHByb2R1Y3RTa3UhOiBzdHJpbmc7XG5cbiAgQENvbHVtbignZGVjaW1hbCcsIHsgcHJlY2lzaW9uOiAxMCwgc2NhbGU6IDIgfSlcbiAgdW5pdFByaWNlITogbnVtYmVyO1xuXG4gIEBDb2x1bW4oJ2ludCcpXG4gIHF1YW50aXR5ITogbnVtYmVyO1xuXG4gIEBDb2x1bW4oJ2RlY2ltYWwnLCB7IHByZWNpc2lvbjogMTAsIHNjYWxlOiAyIH0pXG4gIHN1YnRvdGFsITogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgc3VidG90YWxcbiAgICovXG4gIGNhbGN1bGF0ZVN1YnRvdGFsKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMudW5pdFByaWNlICogdGhpcy5xdWFudGl0eTtcbiAgfVxufVxuXG5ARW50aXR5KCdvcmRlcnMnKVxuZXhwb3J0IGNsYXNzIE9yZGVyIHtcbiAgQFByaW1hcnlHZW5lcmF0ZWRDb2x1bW4oJ3V1aWQnKVxuICBpZCE6IHN0cmluZztcblxuICBAQ29sdW1uKClcbiAgQEluZGV4KClcbiAgdXNlcklkITogc3RyaW5nO1xuXG4gIEBDb2x1bW4oeyB1bmlxdWU6IHRydWUgfSlcbiAgQEluZGV4KClcbiAgb3JkZXJOdW1iZXIhOiBzdHJpbmc7XG5cbiAgQENvbHVtbih7XG4gICAgdHlwZTogJ2VudW0nLFxuICAgIGVudW06IE9yZGVyU3RhdHVzLFxuICAgIGRlZmF1bHQ6IE9yZGVyU3RhdHVzLlBFTkRJTkcsXG4gIH0pXG4gIEBJbmRleCgpXG4gIHN0YXR1cyE6IE9yZGVyU3RhdHVzO1xuXG4gIEBDb2x1bW4oe1xuICAgIHR5cGU6ICdlbnVtJyxcbiAgICBlbnVtOiBQYXltZW50U3RhdHVzLFxuICAgIGRlZmF1bHQ6IFBheW1lbnRTdGF0dXMuUEVORElORyxcbiAgfSlcbiAgcGF5bWVudFN0YXR1cyE6IFBheW1lbnRTdGF0dXM7XG5cbiAgQENvbHVtbih7XG4gICAgdHlwZTogJ2VudW0nLFxuICAgIGVudW06IFBheW1lbnRNZXRob2QsXG4gICAgbnVsbGFibGU6IHRydWUsXG4gIH0pXG4gIHBheW1lbnRNZXRob2Q/OiBQYXltZW50TWV0aG9kO1xuXG4gIEBDb2x1bW4oJ2RlY2ltYWwnLCB7IHByZWNpc2lvbjogMTAsIHNjYWxlOiAyIH0pXG4gIHN1YnRvdGFsITogbnVtYmVyO1xuXG4gIEBDb2x1bW4oJ2RlY2ltYWwnLCB7IHByZWNpc2lvbjogMTAsIHNjYWxlOiAyLCBkZWZhdWx0OiAwIH0pXG4gIHRheEFtb3VudCE6IG51bWJlcjtcblxuICBAQ29sdW1uKCdkZWNpbWFsJywgeyBwcmVjaXNpb246IDEwLCBzY2FsZTogMiwgZGVmYXVsdDogMCB9KVxuICBzaGlwcGluZ0Nvc3QhOiBudW1iZXI7XG5cbiAgQENvbHVtbignZGVjaW1hbCcsIHsgcHJlY2lzaW9uOiAxMCwgc2NhbGU6IDIsIGRlZmF1bHQ6IDAgfSlcbiAgZGlzY291bnRBbW91bnQhOiBudW1iZXI7XG5cbiAgQENvbHVtbignZGVjaW1hbCcsIHsgcHJlY2lzaW9uOiAxMCwgc2NhbGU6IDIgfSlcbiAgdG90YWwhOiBudW1iZXI7XG5cbiAgQENvbHVtbih7IG51bGxhYmxlOiB0cnVlIH0pXG4gIGRpc2NvdW50Q29kZT86IHN0cmluZztcblxuICBAQ29sdW1uKCdqc29uYicpXG4gIHNoaXBwaW5nQWRkcmVzcyE6IHtcbiAgICBzdHJlZXQ6IHN0cmluZztcbiAgICBjaXR5OiBzdHJpbmc7XG4gICAgc3RhdGU6IHN0cmluZztcbiAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgY291bnRyeTogc3RyaW5nO1xuICB9O1xuXG4gIEBDb2x1bW4oJ2pzb25iJywgeyBudWxsYWJsZTogdHJ1ZSB9KVxuICBiaWxsaW5nQWRkcmVzcz86IHtcbiAgICBzdHJlZXQ6IHN0cmluZztcbiAgICBjaXR5OiBzdHJpbmc7XG4gICAgc3RhdGU6IHN0cmluZztcbiAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgY291bnRyeTogc3RyaW5nO1xuICB9O1xuXG4gIEBDb2x1bW4oJ2pzb25iJylcbiAgaXRlbXMhOiBPcmRlckl0ZW1bXTtcblxuICBAQ29sdW1uKCd0ZXh0JywgeyBudWxsYWJsZTogdHJ1ZSB9KVxuICBub3Rlcz86IHN0cmluZztcblxuICBAQ29sdW1uKHsgbnVsbGFibGU6IHRydWUgfSlcbiAgdHJhY2tpbmdOdW1iZXI/OiBzdHJpbmc7XG5cbiAgQENvbHVtbih7IHR5cGU6ICd0aW1lc3RhbXAnLCBudWxsYWJsZTogdHJ1ZSB9KVxuICBwYWlkQXQ/OiBEYXRlO1xuXG4gIEBDb2x1bW4oeyB0eXBlOiAndGltZXN0YW1wJywgbnVsbGFibGU6IHRydWUgfSlcbiAgc2hpcHBlZEF0PzogRGF0ZTtcblxuICBAQ29sdW1uKHsgdHlwZTogJ3RpbWVzdGFtcCcsIG51bGxhYmxlOiB0cnVlIH0pXG4gIGRlbGl2ZXJlZEF0PzogRGF0ZTtcblxuICBAQ29sdW1uKHsgdHlwZTogJ3RpbWVzdGFtcCcsIG51bGxhYmxlOiB0cnVlIH0pXG4gIGNhbmNlbGxlZEF0PzogRGF0ZTtcblxuICBAQ3JlYXRlRGF0ZUNvbHVtbigpXG4gIGNyZWF0ZWRBdCE6IERhdGU7XG5cbiAgQFVwZGF0ZURhdGVDb2x1bW4oKVxuICB1cGRhdGVkQXQhOiBEYXRlO1xuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgdG90YWwgYW1vdW50XG4gICAqL1xuICBjYWxjdWxhdGVUb3RhbCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnN1YnRvdGFsICsgdGhpcy50YXhBbW91bnQgKyB0aGlzLnNoaXBwaW5nQ29zdCAtIHRoaXMuZGlzY291bnRBbW91bnQ7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHN1YnRvdGFsIGZyb20gaXRlbXNcbiAgICovXG4gIGNhbGN1bGF0ZVN1YnRvdGFsKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbXMucmVkdWNlKChzdW0sIGl0ZW0pID0+IHN1bSArIGl0ZW0uc3VidG90YWwsIDApO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIG9yZGVyIGNhbiBiZSBjYW5jZWxsZWRcbiAgICovXG4gIGNhbkJlQ2FuY2VsbGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBbT3JkZXJTdGF0dXMuUEVORElORywgT3JkZXJTdGF0dXMuQ09ORklSTUVEXS5pbmNsdWRlcyh0aGlzLnN0YXR1cyk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgb3JkZXIgaXMgZnVsZmlsbGVkXG4gICAqL1xuICBpc0Z1bGZpbGxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09IE9yZGVyU3RhdHVzLkRFTElWRVJFRDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBvcmRlciBpcyBwYWlkXG4gICAqL1xuICBpc1BhaWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMucGF5bWVudFN0YXR1cyA9PT0gUGF5bWVudFN0YXR1cy5QQUlEO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0b3RhbCBpdGVtcyBjb3VudFxuICAgKi9cbiAgZ2V0VG90YWxJdGVtc0NvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbXMucmVkdWNlKChzdW0sIGl0ZW0pID0+IHN1bSArIGl0ZW0ucXVhbnRpdHksIDApO1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=