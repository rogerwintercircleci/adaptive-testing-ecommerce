{"file":"C:\\Adaptive_Testing\\src\\services\\user-management\\repositories\\user.repository.spec.ts","mappings":"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","names":[],"sources":["C:\\Adaptive_Testing\\src\\services\\user-management\\repositories\\user.repository.spec.ts"],"sourcesContent":["/**\n * TDD: User Repository Tests\n *\n * This file demonstrates strict Test-Driven Development:\n * 1. Write failing tests first\n * 2. Implement minimal code to pass\n * 3. Refactor if needed\n *\n * Testing Strategy:\n * - Test CRUD operations\n * - Test query methods\n * - Test edge cases (duplicates, not found, etc.)\n * - Test business logic methods\n */\n\nimport { Repository } from 'typeorm';\nimport { UserRepository } from './user.repository';\nimport { User, UserRole, UserStatus } from '../entities/user.entity';\nimport { NotFoundError, ConflictError } from '@libs/errors';\n\n// Mock TypeORM Repository\nconst mockRepository = {\n  find: jest.fn(),\n  findOne: jest.fn(),\n  create: jest.fn(),\n  save: jest.fn(),\n  remove: jest.fn(),\n  softDelete: jest.fn(),\n  count: jest.fn(),\n  merge: jest.fn(),\n  metadata: { name: 'User' },\n} as unknown as Repository<User>;\n\ndescribe('UserRepository', () => {\n  let userRepository: UserRepository;\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    userRepository = new UserRepository(mockRepository);\n  });\n\n  /**\n   * TDD Cycle 1: Test findByEmail\n   * RED: Write failing test\n   */\n  describe('findByEmail', () => {\n    it('should find user by email', async () => {\n      // Arrange\n      const mockUser = {\n        id: '123',\n        email: 'test@example.com',\n        firstName: 'Test',\n        lastName: 'User',\n      } as User;\n\n      (mockRepository.findOne as jest.Mock).mockResolvedValue(mockUser);\n\n      // Act\n      const result = await userRepository.findByEmail('test@example.com');\n\n      // Assert\n      expect(result).toEqual(mockUser);\n      expect(mockRepository.findOne).toHaveBeenCalledWith({\n        where: { email: 'test@example.com' },\n      });\n    });\n\n    it('should return null if user not found', async () => {\n      (mockRepository.findOne as jest.Mock).mockResolvedValue(null);\n\n      const result = await userRepository.findByEmail('nonexistent@example.com');\n\n      expect(result).toBeNull();\n    });\n\n    it('should be case-insensitive', async () => {\n      const mockUser = {\n        id: '123',\n        email: 'test@example.com',\n      } as User;\n\n      (mockRepository.findOne as jest.Mock).mockResolvedValue(mockUser);\n\n      const result = await userRepository.findByEmail('TEST@EXAMPLE.COM');\n\n      expect(result).toEqual(mockUser);\n    });\n  });\n\n  /**\n   * TDD Cycle 2: Test emailExists\n   */\n  describe('emailExists', () => {\n    it('should return true if email exists', async () => {\n      (mockRepository.count as jest.Mock).mockResolvedValue(1);\n\n      const result = await userRepository.emailExists('existing@example.com');\n\n      expect(result).toBe(true);\n    });\n\n    it('should return false if email does not exist', async () => {\n      (mockRepository.count as jest.Mock).mockResolvedValue(0);\n\n      const result = await userRepository.emailExists('new@example.com');\n\n      expect(result).toBe(false);\n    });\n\n    it('should be case-insensitive', async () => {\n      (mockRepository.count as jest.Mock).mockResolvedValue(1);\n\n      await userRepository.emailExists('EXISTING@EXAMPLE.COM');\n\n      expect(mockRepository.count).toHaveBeenCalled();\n    });\n  });\n\n  /**\n   * TDD Cycle 3: Test createUser (with duplicate check)\n   */\n  describe('createUser', () => {\n    it('should create a new user', async () => {\n      const userData = {\n        email: 'new@example.com',\n        password: 'hashedpassword',\n        firstName: 'New',\n        lastName: 'User',\n      };\n\n      const mockUser = { id: '456', ...userData } as User;\n\n      (mockRepository.count as jest.Mock).mockResolvedValue(0);\n      (mockRepository.create as jest.Mock).mockReturnValue(mockUser);\n      (mockRepository.save as jest.Mock).mockResolvedValue(mockUser);\n\n      const result = await userRepository.createUser(userData);\n\n      expect(result).toEqual(mockUser);\n      expect(mockRepository.create).toHaveBeenCalledWith(userData);\n      expect(mockRepository.save).toHaveBeenCalledWith(mockUser);\n    });\n\n    it('should throw ConflictError if email already exists', async () => {\n      const userData = {\n        email: 'existing@example.com',\n        password: 'hashedpassword',\n        firstName: 'Test',\n        lastName: 'User',\n      };\n\n      (mockRepository.count as jest.Mock).mockResolvedValue(1);\n\n      await expect(userRepository.createUser(userData)).rejects.toThrow(ConflictError);\n      await expect(userRepository.createUser(userData)).rejects.toThrow(\n        'User with this email already exists'\n      );\n    });\n\n    it('should normalize email to lowercase', async () => {\n      const userData = {\n        email: 'NEW@EXAMPLE.COM',\n        password: 'hashedpassword',\n        firstName: 'New',\n        lastName: 'User',\n      };\n\n      (mockRepository.count as jest.Mock).mockResolvedValue(0);\n      (mockRepository.create as jest.Mock).mockReturnValue(userData as User);\n      (mockRepository.save as jest.Mock).mockResolvedValue(userData as User);\n\n      await userRepository.createUser(userData);\n\n      expect(mockRepository.create).toHaveBeenCalledWith({\n        ...userData,\n        email: 'new@example.com',\n      });\n    });\n  });\n\n  /**\n   * TDD Cycle 4: Test findByRole\n   */\n  describe('findByRole', () => {\n    it('should find all users with specified role', async () => {\n      const mockUsers = [\n        { id: '1', role: UserRole.ADMIN },\n        { id: '2', role: UserRole.ADMIN },\n      ] as User[];\n\n      (mockRepository.find as jest.Mock).mockResolvedValue(mockUsers);\n\n      const result = await userRepository.findByRole(UserRole.ADMIN);\n\n      expect(result).toEqual(mockUsers);\n      expect(mockRepository.find).toHaveBeenCalledWith({\n        where: { role: UserRole.ADMIN },\n      });\n    });\n\n    it('should return empty array if no users with role', async () => {\n      (mockRepository.find as jest.Mock).mockResolvedValue([]);\n\n      const result = await userRepository.findByRole(UserRole.VENDOR);\n\n      expect(result).toEqual([]);\n    });\n  });\n\n  /**\n   * TDD Cycle 5: Test findByStatus\n   */\n  describe('findByStatus', () => {\n    it('should find all users with specified status', async () => {\n      const mockUsers = [\n        { id: '1', status: UserStatus.ACTIVE },\n        { id: '2', status: UserStatus.ACTIVE },\n      ] as User[];\n\n      (mockRepository.find as jest.Mock).mockResolvedValue(mockUsers);\n\n      const result = await userRepository.findByStatus(UserStatus.ACTIVE);\n\n      expect(result).toEqual(mockUsers);\n    });\n  });\n\n  /**\n   * TDD Cycle 6: Test updateLastLogin\n   */\n  describe('updateLastLogin', () => {\n    it('should update last login timestamp', async () => {\n      const userId = '123';\n      const mockUser = { id: userId, lastLoginAt: null } as unknown as User;\n      const updatedUser = { ...mockUser, lastLoginAt: expect.any(Date) };\n\n      (mockRepository.findOne as jest.Mock).mockResolvedValue(mockUser);\n      (mockRepository.merge as jest.Mock).mockReturnValue(updatedUser);\n      (mockRepository.save as jest.Mock).mockResolvedValue(updatedUser);\n\n      const result = await userRepository.updateLastLogin(userId);\n\n      expect(result.lastLoginAt).toBeInstanceOf(Date);\n      expect(mockRepository.save).toHaveBeenCalled();\n    });\n\n    it('should throw NotFoundError if user not found', async () => {\n      (mockRepository.findOne as jest.Mock).mockResolvedValue(null);\n\n      await expect(userRepository.updateLastLogin('nonexistent')).rejects.toThrow(\n        NotFoundError\n      );\n    });\n  });\n\n  /**\n   * TDD Cycle 7: Test incrementLoginAttempts\n   */\n  describe('incrementLoginAttempts', () => {\n    it('should increment login attempts', async () => {\n      const userId = '123';\n      const mockUser = { id: userId, loginAttempts: 0 } as User;\n\n      (mockRepository.findOne as jest.Mock).mockResolvedValue(mockUser);\n      (mockRepository.merge as jest.Mock).mockReturnValue({\n        ...mockUser,\n        loginAttempts: 1,\n      });\n      (mockRepository.save as jest.Mock).mockResolvedValue({\n        ...mockUser,\n        loginAttempts: 1,\n      });\n\n      const result = await userRepository.incrementLoginAttempts(userId);\n\n      expect(result.loginAttempts).toBe(1);\n    });\n\n    it('should lock account after 5 failed attempts', async () => {\n      const userId = '123';\n      const mockUser = { id: userId, loginAttempts: 4 } as User;\n\n      (mockRepository.findOne as jest.Mock).mockResolvedValue(mockUser);\n      (mockRepository.merge as jest.Mock).mockReturnValue({\n        ...mockUser,\n        loginAttempts: 5,\n        lockedUntil: expect.any(Date),\n      });\n      (mockRepository.save as jest.Mock).mockResolvedValue({\n        ...mockUser,\n        loginAttempts: 5,\n        lockedUntil: new Date(Date.now() + 30 * 60 * 1000),\n      });\n\n      const result = await userRepository.incrementLoginAttempts(userId);\n\n      expect(result.loginAttempts).toBe(5);\n      expect(result.lockedUntil).toBeDefined();\n    });\n  });\n\n  /**\n   * TDD Cycle 8: Test resetLoginAttempts\n   */\n  describe('resetLoginAttempts', () => {\n    it('should reset login attempts to zero', async () => {\n      const userId = '123';\n      const mockUser = { id: userId, loginAttempts: 3, lockedUntil: new Date() } as User;\n\n      (mockRepository.findOne as jest.Mock).mockResolvedValue(mockUser);\n      (mockRepository.merge as jest.Mock).mockReturnValue({\n        ...mockUser,\n        loginAttempts: 0,\n        lockedUntil: null,\n      });\n      (mockRepository.save as jest.Mock).mockResolvedValue({\n        ...mockUser,\n        loginAttempts: 0,\n        lockedUntil: null,\n      });\n\n      const result = await userRepository.resetLoginAttempts(userId);\n\n      expect(result.loginAttempts).toBe(0);\n      expect(result.lockedUntil).toBeNull();\n    });\n  });\n\n  /**\n   * TDD Cycle 9: Test setEmailVerificationToken\n   */\n  describe('setEmailVerificationToken', () => {\n    it('should set email verification token', async () => {\n      const userId = '123';\n      const token = 'verification-token';\n      const mockUser = { id: userId } as User;\n\n      (mockRepository.findOne as jest.Mock).mockResolvedValue(mockUser);\n      (mockRepository.merge as jest.Mock).mockReturnValue({\n        ...mockUser,\n        emailVerificationToken: token,\n      });\n      (mockRepository.save as jest.Mock).mockResolvedValue({\n        ...mockUser,\n        emailVerificationToken: token,\n      });\n\n      const result = await userRepository.setEmailVerificationToken(userId, token);\n\n      expect(result.emailVerificationToken).toBe(token);\n    });\n  });\n\n  /**\n   * TDD Cycle 10: Test verifyEmail\n   */\n  describe('verifyEmail', () => {\n    it('should verify email and clear token', async () => {\n      const token = 'valid-token';\n      const mockUser = { id: '123', emailVerificationToken: token } as User;\n\n      (mockRepository.findOne as jest.Mock).mockResolvedValue(mockUser);\n      (mockRepository.merge as jest.Mock).mockReturnValue({\n        ...mockUser,\n        emailVerificationToken: null,\n        emailVerifiedAt: expect.any(Date),\n        status: UserStatus.ACTIVE,\n      });\n      (mockRepository.save as jest.Mock).mockResolvedValue({\n        ...mockUser,\n        emailVerificationToken: null,\n        emailVerifiedAt: new Date(),\n        status: UserStatus.ACTIVE,\n      });\n\n      const result = await userRepository.verifyEmail(token);\n\n      expect(result.emailVerifiedAt).toBeDefined();\n      expect(result.emailVerificationToken).toBeNull();\n      expect(result.status).toBe(UserStatus.ACTIVE);\n    });\n\n    it('should throw NotFoundError for invalid token', async () => {\n      (mockRepository.findOne as jest.Mock).mockResolvedValue(null);\n\n      await expect(userRepository.verifyEmail('invalid-token')).rejects.toThrow(\n        NotFoundError\n      );\n    });\n  });\n\n  /**\n   * TDD Cycle 11: Test setPasswordResetToken\n   */\n  describe('setPasswordResetToken', () => {\n    it('should set password reset token with expiry', async () => {\n      const userId = '123';\n      const token = 'reset-token';\n      const mockUser = { id: userId } as User;\n\n      (mockRepository.findOne as jest.Mock).mockResolvedValue(mockUser);\n      (mockRepository.merge as jest.Mock).mockReturnValue({\n        ...mockUser,\n        passwordResetToken: token,\n        passwordResetExpires: expect.any(Date),\n      });\n      (mockRepository.save as jest.Mock).mockResolvedValue({\n        ...mockUser,\n        passwordResetToken: token,\n        passwordResetExpires: new Date(Date.now() + 3600000),\n      });\n\n      const result = await userRepository.setPasswordResetToken(userId, token);\n\n      expect(result.passwordResetToken).toBe(token);\n      expect(result.passwordResetExpires).toBeDefined();\n    });\n  });\n\n  /**\n   * TDD Cycle 12: Test resetPassword\n   */\n  describe('resetPassword', () => {\n    it('should reset password and clear token', async () => {\n      const token = 'valid-reset-token';\n      const newPassword = 'newhashedpassword';\n      const mockUser = {\n        id: '123',\n        passwordResetToken: token,\n        passwordResetExpires: new Date(Date.now() + 3600000),\n      } as User;\n\n      (mockRepository.findOne as jest.Mock).mockResolvedValue(mockUser);\n      (mockRepository.merge as jest.Mock).mockReturnValue({\n        ...mockUser,\n        password: newPassword,\n        passwordResetToken: null,\n        passwordResetExpires: null,\n      });\n      (mockRepository.save as jest.Mock).mockResolvedValue({\n        ...mockUser,\n        password: newPassword,\n        passwordResetToken: null,\n        passwordResetExpires: null,\n      });\n\n      const result = await userRepository.resetPassword(token, newPassword);\n\n      expect(result.password).toBe(newPassword);\n      expect(result.passwordResetToken).toBeNull();\n    });\n\n    it('should throw NotFoundError for invalid token', async () => {\n      (mockRepository.findOne as jest.Mock).mockResolvedValue(null);\n\n      await expect(\n        userRepository.resetPassword('invalid-token', 'newpassword')\n      ).rejects.toThrow(NotFoundError);\n    });\n\n    it('should throw error for expired token', async () => {\n      const token = 'expired-token';\n      const mockUser = {\n        id: '123',\n        passwordResetToken: token,\n        passwordResetExpires: new Date(Date.now() - 1000),\n      } as User;\n\n      (mockRepository.findOne as jest.Mock).mockResolvedValue(mockUser);\n\n      await expect(\n        userRepository.resetPassword(token, 'newpassword')\n      ).rejects.toThrow('Password reset token has expired');\n    });\n  });\n});\n"],"version":3}