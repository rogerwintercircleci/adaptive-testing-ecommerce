{"file":"C:\\Adaptive_Testing\\tests\\e2e\\api\\product-endpoints.e2e.test.ts","mappings":";AAAA;;;;GAIG;;;;;AAEH,0DAAgC;AAEhC,0CAA6C;AAC7C,gEAAiE;AAEjE,QAAQ,CAAC,4BAA4B,EAAE,GAAG,EAAE;IAC1C,IAAI,GAAY,CAAC;IACjB,IAAI,SAAiB,CAAC;IACtB,IAAI,UAAkB,CAAC;IAEvB,SAAS,CAAC,KAAK,IAAI,EAAE;QACnB,GAAG,GAAG,MAAM,IAAA,eAAS,GAAE,CAAC;QAExB,SAAS,GAAG,IAAA,yBAAa,EAAC;YACxB,MAAM,EAAE,UAAU;YAClB,KAAK,EAAE,mBAAmB;YAC1B,IAAI,EAAE,UAAU;SACjB,CAAC,CAAC;QAEH,UAAU,GAAG,IAAA,yBAAa,EAAC;YACzB,MAAM,EAAE,WAAW;YACnB,KAAK,EAAE,gBAAgB;YACvB,IAAI,EAAE,OAAO;SACd,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,mBAAmB,EAAE,GAAG,EAAE;QACjC,EAAE,CAAC,0BAA0B,EAAE,KAAK,IAAI,EAAE;YACxC,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAErE,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YAC9C,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACtD,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;QAChD,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,2BAA2B,EAAE,KAAK,IAAI,EAAE;YACzC,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,+BAA+B,CAAC;iBACpC,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACnC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YACrC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,mBAAmB,CAAC,EAAE,CAAC,CAAC;QAC7D,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,2BAA2B,EAAE,KAAK,IAAI,EAAE;YACzC,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,oCAAoC,CAAC;iBACzC,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,QAAQ,KAAK,aAAa,CAAC,CAAC,CAAC,IAAI,CAC9E,IAAI,CACL,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,8BAA8B,EAAE,KAAK,IAAI,EAAE;YAC5C,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,wCAAwC,CAAC;iBAC7C,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CACJ,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE,IAAI,CAAC,CAAC,KAAK,IAAI,GAAG,CAAC,CACvE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACf,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,gCAAgC,EAAE,KAAK,IAAI,EAAE;YAC9C,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,sCAAsC,CAAC;iBAC3C,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,MAAM,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;YAC5D,MAAM,MAAM,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACjD,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,iCAAiC,EAAE,KAAK,IAAI,EAAE;YAC/C,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,uCAAuC,CAAC;iBAC5C,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,MAAM,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;YAC5D,MAAM,MAAM,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACjD,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,yCAAyC,EAAE,KAAK,IAAI,EAAE;YACvD,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,4BAA4B,CAAC;iBACjC,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5E,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,0BAA0B,EAAE,GAAG,EAAE;QACxC,EAAE,CAAC,gCAAgC,EAAE,KAAK,IAAI,EAAE;YAC9C,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,+BAA+B,CAAC;iBACpC,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CACJ,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAM,EAAE,EAAE,CACnC,CAAC,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,CACxC,CACF,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACf,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,uCAAuC,EAAE,KAAK,IAAI,EAAE;YACrD,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,iCAAiC,CAAC;iBACtC,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC;QAC/D,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,4CAA4C,EAAE,KAAK,IAAI,EAAE;YAC1D,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,iDAAiD,CAAC;iBACtD,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YACxC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACtC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,uBAAuB,EAAE,GAAG,EAAE;QACrC,EAAE,CAAC,0BAA0B,EAAE,KAAK,IAAI,EAAE;YACxC,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAE9E,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YAC1C,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;YAC7C,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YAC9C,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;QACpD,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,4CAA4C,EAAE,KAAK,IAAI,EAAE;YAC1D,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAClE,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,4CAA4C,EAAE,KAAK,IAAI,EAAE;YAC1D,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAE9E,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;YAC/C,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;QACtD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,iCAAiC,EAAE,GAAG,EAAE;QAC/C,EAAE,CAAC,gCAAgC,EAAE,KAAK,IAAI,EAAE;YAC9C,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,IAAI,CAAC,eAAe,CAAC;iBACrB,GAAG,CAAC,eAAe,EAAE,UAAU,UAAU,EAAE,CAAC;iBAC5C,IAAI,CAAC;gBACJ,IAAI,EAAE,aAAa;gBACnB,WAAW,EAAE,qBAAqB;gBAClC,GAAG,EAAE,SAAS;gBACd,KAAK,EAAE,KAAK;gBACZ,SAAS,EAAE,EAAE;gBACb,QAAQ,EAAE,aAAa;aACxB,CAAC;iBACD,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;YAC/C,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC5C,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,uCAAuC,EAAE,KAAK,IAAI,EAAE;YACrD,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBACf,IAAI,CAAC,eAAe,CAAC;iBACrB,GAAG,CAAC,eAAe,EAAE,UAAU,SAAS,EAAE,CAAC;iBAC3C,IAAI,CAAC;gBACJ,IAAI,EAAE,sBAAsB;gBAC5B,GAAG,EAAE,YAAY;gBACjB,KAAK,EAAE,KAAK;aACb,CAAC;iBACD,MAAM,CAAC,GAAG,CAAC,CAAC;QACjB,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,iCAAiC,EAAE,KAAK,IAAI,EAAE;YAC/C,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,IAAI,CAAC,eAAe,CAAC;iBACrB,GAAG,CAAC,eAAe,EAAE,UAAU,UAAU,EAAE,CAAC;iBAC5C,IAAI,CAAC;gBACJ,IAAI,EAAE,oBAAoB;gBAC1B,0BAA0B;aAC3B,CAAC;iBACD,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;QAChD,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,sCAAsC,EAAE,KAAK,IAAI,EAAE;YACpD,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBACf,IAAI,CAAC,eAAe,CAAC;iBACrB,GAAG,CAAC,eAAe,EAAE,UAAU,UAAU,EAAE,CAAC;iBAC5C,IAAI,CAAC;gBACJ,IAAI,EAAE,WAAW;gBACjB,GAAG,EAAE,eAAe;gBACpB,KAAK,EAAE,KAAK;gBACZ,SAAS,EAAE,EAAE;aACd,CAAC;iBACD,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,IAAI,CAAC,eAAe,CAAC;iBACrB,GAAG,CAAC,eAAe,EAAE,UAAU,UAAU,EAAE,CAAC;iBAC5C,IAAI,CAAC;gBACJ,IAAI,EAAE,WAAW;gBACjB,GAAG,EAAE,eAAe;gBACpB,KAAK,EAAE,KAAK;gBACZ,SAAS,EAAE,EAAE;aACd,CAAC;iBACD,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAC/C,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,mCAAmC,EAAE,KAAK,IAAI,EAAE;YACjD,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,IAAI,CAAC,eAAe,CAAC;iBACrB,GAAG,CAAC,eAAe,EAAE,UAAU,UAAU,EAAE,CAAC;iBAC5C,IAAI,CAAC;gBACJ,IAAI,EAAE,uBAAuB;gBAC7B,GAAG,EAAE,eAAe;gBACpB,KAAK,EAAE,CAAC,KAAK;gBACb,SAAS,EAAE,CAAC;aACb,CAAC;iBACD,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;QACjD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,oCAAoC,EAAE,GAAG,EAAE;QAClD,EAAE,CAAC,uBAAuB,EAAE,KAAK,IAAI,EAAE;YACrC,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,6BAA6B,CAAC;iBAClC,GAAG,CAAC,eAAe,EAAE,UAAU,UAAU,EAAE,CAAC;iBAC5C,IAAI,CAAC;gBACJ,IAAI,EAAE,sBAAsB;gBAC5B,KAAK,EAAE,MAAM;aACd,CAAC;iBACD,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;YACxD,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC3C,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,yBAAyB,EAAE,KAAK,IAAI,EAAE;YACvC,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,6BAA6B,CAAC;iBAClC,GAAG,CAAC,eAAe,EAAE,UAAU,UAAU,EAAE,CAAC;iBAC5C,IAAI,CAAC;gBACJ,SAAS,EAAE,EAAE;aACd,CAAC;iBACD,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAC3C,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,uCAAuC,EAAE,KAAK,IAAI,EAAE;YACrD,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBACf,GAAG,CAAC,wBAAwB,CAAC;iBAC7B,GAAG,CAAC,eAAe,EAAE,UAAU,SAAS,EAAE,CAAC;iBAC3C,IAAI,CAAC;gBACJ,KAAK,EAAE,MAAM;aACd,CAAC;iBACD,MAAM,CAAC,GAAG,CAAC,CAAC;QACjB,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,4CAA4C,EAAE,KAAK,IAAI,EAAE;YAC1D,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBACf,GAAG,CAAC,2BAA2B,CAAC;iBAChC,GAAG,CAAC,eAAe,EAAE,UAAU,UAAU,EAAE,CAAC;iBAC5C,IAAI,CAAC;gBACJ,KAAK,EAAE,KAAK;aACb,CAAC;iBACD,MAAM,CAAC,GAAG,CAAC,CAAC;QACjB,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,uCAAuC,EAAE,GAAG,EAAE;QACrD,EAAE,CAAC,uBAAuB,EAAE,KAAK,IAAI,EAAE;YACrC,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBACf,MAAM,CAAC,6BAA6B,CAAC;iBACrC,GAAG,CAAC,eAAe,EAAE,UAAU,UAAU,EAAE,CAAC;iBAC5C,MAAM,CAAC,GAAG,CAAC,CAAC;QACjB,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,uCAAuC,EAAE,KAAK,IAAI,EAAE;YACrD,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBACf,MAAM,CAAC,wBAAwB,CAAC;iBAChC,GAAG,CAAC,eAAe,EAAE,UAAU,SAAS,EAAE,CAAC;iBAC3C,MAAM,CAAC,GAAG,CAAC,CAAC;QACjB,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,4CAA4C,EAAE,KAAK,IAAI,EAAE;YAC1D,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBACf,MAAM,CAAC,2BAA2B,CAAC;iBACnC,GAAG,CAAC,eAAe,EAAE,UAAU,UAAU,EAAE,CAAC;iBAC5C,MAAM,CAAC,GAAG,CAAC,CAAC;QACjB,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,4BAA4B,EAAE,GAAG,EAAE;QAC1C,EAAE,CAAC,8BAA8B,EAAE,KAAK,IAAI,EAAE;YAC5C,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAE9E,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAChD,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,QAAQ,KAAK,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1E,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,gCAAgC,EAAE,KAAK,IAAI,EAAE;YAC9C,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,gCAAgC,CAAC;iBACrC,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;QACtD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,+BAA+B,EAAE,GAAG,EAAE;QAC7C,EAAE,CAAC,iCAAiC,EAAE,KAAK,IAAI,EAAE;YAC/C,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,2BAA2B,CAAC;iBAChC,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAEhD,wCAAwC;YACxC,MAAM,UAAU,GAAG,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;YAC9D,MAAM,MAAM,GAAG,CAAC,GAAG,UAAU,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACrD,MAAM,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,6BAA6B,EAAE,GAAG,EAAE;QAC3C,EAAE,CAAC,+BAA+B,EAAE,KAAK,IAAI,EAAE;YAC7C,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAE/E,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAEhD,qCAAqC;YACrC,MAAM,OAAO,GAAG,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;YACxD,MAAM,MAAM,GAAG,CAAC,GAAG,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YAClD,MAAM,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAClC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,uCAAuC,EAAE,KAAK,IAAI,EAAE;YACrD,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,uCAAuC,CAAC;iBAC5C,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,WAAW,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1E,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,2BAA2B,EAAE,GAAG,EAAE;QACzC,EAAE,CAAC,6BAA6B,EAAE,KAAK,IAAI,EAAE;YAC3C,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAE7E,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAChD,MAAM,CACJ,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,cAAc,GAAG,CAAC,CAAC,KAAK,CAAC,CAC5D,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACf,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,oCAAoC,EAAE,KAAK,IAAI,EAAE;YAClD,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAE7E,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,kBAAkB,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/E,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,6BAA6B,EAAE,GAAG,EAAE;QAC3C,EAAE,CAAC,4CAA4C,EAAE,KAAK,IAAI,EAAE;YAC1D,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,yBAAyB,CAAC;iBAC9B,GAAG,CAAC,eAAe,EAAE,UAAU,UAAU,EAAE,CAAC;iBAC5C,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAChD,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,SAAS,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACxE,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,+BAA+B,EAAE,KAAK,IAAI,EAAE;YAC7C,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,sCAAsC,CAAC;iBAC3C,GAAG,CAAC,eAAe,EAAE,UAAU,UAAU,EAAE,CAAC;iBAC5C,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,SAAS,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACxE,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,uCAAuC,EAAE,KAAK,IAAI,EAAE;YACrD,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBACf,GAAG,CAAC,yBAAyB,CAAC;iBAC9B,GAAG,CAAC,eAAe,EAAE,UAAU,SAAS,EAAE,CAAC;iBAC3C,MAAM,CAAC,GAAG,CAAC,CAAC;QACjB,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,+BAA+B,EAAE,GAAG,EAAE;QAC7C,EAAE,CAAC,6BAA6B,EAAE,KAAK,IAAI,EAAE;YAC3C,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,gCAAgC,CAAC;iBACrC,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAChD,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1E,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,yCAAyC,EAAE,KAAK,IAAI,EAAE;YACvD,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,wCAAwC,CAAC;iBAC7C,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;QACtD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,gBAAgB,EAAE,GAAG,EAAE;QAC9B,EAAE,CAAC,+BAA+B,EAAE,KAAK,IAAI,EAAE;YAC7C,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAE9E,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;YAC/C,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACzD,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,0CAA0C,EAAE,KAAK,IAAI,EAAE;YACxD,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,IAAI,CAAC,+BAA+B,CAAC;iBACrC,GAAG,CAAC,eAAe,EAAE,UAAU,UAAU,EAAE,CAAC;iBAC5C,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,EAAE,aAAa,CAAC;iBAC9D,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QACnD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,iBAAiB,EAAE,GAAG,EAAE;QAC/B,EAAE,CAAC,4BAA4B,EAAE,KAAK,IAAI,EAAE;YAC1C,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,gCAAgC,CAAC;iBACrC,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;YAChD,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1D,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,4CAA4C,EAAE,KAAK,IAAI,EAAE;YAC1D,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,IAAI,CAAC,gCAAgC,CAAC;iBACtC,GAAG,CAAC,eAAe,EAAE,UAAU,SAAS,EAAE,CAAC;iBAC3C,IAAI,CAAC;gBACJ,MAAM,EAAE,CAAC;gBACT,KAAK,EAAE,oBAAoB;gBAC3B,OAAO,EAAE,oCAAoC;aAC9C,CAAC;iBACD,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACvC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,8BAA8B,EAAE,KAAK,IAAI,EAAE;YAC5C,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,IAAI,CAAC,gCAAgC,CAAC;iBACtC,GAAG,CAAC,eAAe,EAAE,UAAU,SAAS,EAAE,CAAC;iBAC3C,IAAI,CAAC;gBACJ,MAAM,EAAE,CAAC,EAAE,oBAAoB;gBAC/B,OAAO,EAAE,eAAe;aACzB,CAAC;iBACD,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;QAClD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,sBAAsB,EAAE,GAAG,EAAE;QACpC,EAAE,CAAC,wCAAwC,EAAE,KAAK,IAAI,EAAE;YACtD,MAAM,cAAc,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBACtC,GAAG,CAAC,8BAA8B,CAAC;iBACnC,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,eAAe,GAAG,cAAc,CAAC,IAAI,CAAC,SAAS,CAAC;YAEtD,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBACf,IAAI,CAAC,aAAa,CAAC;iBACnB,GAAG,CAAC,eAAe,EAAE,UAAU,SAAS,EAAE,CAAC;iBAC3C,IAAI,CAAC;gBACJ,KAAK,EAAE;oBACL;wBACE,SAAS,EAAE,gBAAgB;wBAC3B,QAAQ,EAAE,CAAC;qBACZ;iBACF;aACF,CAAC;iBACD,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,aAAa,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBACrC,GAAG,CAAC,8BAA8B,CAAC;iBACnC,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC,CAAC;QACjE,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,mCAAmC,EAAE,KAAK,IAAI,EAAE;YACjD,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,6BAA6B,CAAC;iBAClC,GAAG,CAAC,eAAe,EAAE,UAAU,UAAU,EAAE,CAAC;iBAC5C,IAAI,CAAC;gBACJ,SAAS,EAAE,CAAC,CAAC;aACd,CAAC;iBACD,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;QACrD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,kBAAkB,EAAE,GAAG,EAAE;QAChC,EAAE,CAAC,6BAA6B,EAAE,KAAK,IAAI,EAAE;YAC3C,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,sCAAsC,CAAC;iBAC3C,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAClD,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,kCAAkC,EAAE,KAAK,IAAI,EAAE;YAChD,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,sDAAsD,CAAC;iBAC3D,MAAM,CAAC,GAAG,CAAC,CAAC;YAEf,MAAM,CACJ,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,GAAG,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,CAAC,CACtE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACf,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","names":[],"sources":["C:\\Adaptive_Testing\\tests\\e2e\\api\\product-endpoints.e2e.test.ts"],"sourcesContent":["/**\n * E2E Tests: Product Catalog REST API Endpoints\n *\n * Testing complete product API workflows\n */\n\nimport request from 'supertest';\nimport { Express } from 'express';\nimport { createApp } from '../../../src/app';\nimport { generateToken } from '../../../src/libs/auth/jwt.utils';\n\ndescribe('Product REST API E2E Tests', () => {\n  let app: Express;\n  let authToken: string;\n  let adminToken: string;\n\n  beforeAll(async () => {\n    app = await createApp();\n\n    authToken = generateToken({\n      userId: 'user-123',\n      email: 'customer@test.com',\n      role: 'customer',\n    });\n\n    adminToken = generateToken({\n      userId: 'admin-123',\n      email: 'admin@test.com',\n      role: 'admin',\n    });\n  });\n\n  describe('GET /api/products', () => {\n    it('should list all products', async () => {\n      const response = await request(app).get('/api/products').expect(200);\n\n      expect(response.body).toHaveProperty('items');\n      expect(Array.isArray(response.body.items)).toBe(true);\n      expect(response.body).toHaveProperty('total');\n    });\n\n    it('should support pagination', async () => {\n      const response = await request(app)\n        .get('/api/products?page=1&limit=10')\n        .expect(200);\n\n      expect(response.body.page).toBe(1);\n      expect(response.body.limit).toBe(10);\n      expect(response.body.items.length).toBeLessThanOrEqual(10);\n    });\n\n    it('should filter by category', async () => {\n      const response = await request(app)\n        .get('/api/products?category=electronics')\n        .expect(200);\n\n      expect(response.body.items.every((p: any) => p.category === 'electronics')).toBe(\n        true\n      );\n    });\n\n    it('should filter by price range', async () => {\n      const response = await request(app)\n        .get('/api/products?minPrice=50&maxPrice=100')\n        .expect(200);\n\n      expect(\n        response.body.items.every((p: any) => p.price >= 50 && p.price <= 100)\n      ).toBe(true);\n    });\n\n    it('should sort by price ascending', async () => {\n      const response = await request(app)\n        .get('/api/products?sortBy=price&order=asc')\n        .expect(200);\n\n      const prices = response.body.items.map((p: any) => p.price);\n      const sorted = [...prices].sort((a, b) => a - b);\n      expect(prices).toEqual(sorted);\n    });\n\n    it('should sort by price descending', async () => {\n      const response = await request(app)\n        .get('/api/products?sortBy=price&order=desc')\n        .expect(200);\n\n      const prices = response.body.items.map((p: any) => p.price);\n      const sorted = [...prices].sort((a, b) => b - a);\n      expect(prices).toEqual(sorted);\n    });\n\n    it('should filter by in-stock products only', async () => {\n      const response = await request(app)\n        .get('/api/products?inStock=true')\n        .expect(200);\n\n      expect(response.body.items.every((p: any) => p.inventory > 0)).toBe(true);\n    });\n  });\n\n  describe('GET /api/products/search', () => {\n    it('should search products by name', async () => {\n      const response = await request(app)\n        .get('/api/products/search?q=laptop')\n        .expect(200);\n\n      expect(\n        response.body.items.every((p: any) =>\n          p.name.toLowerCase().includes('laptop')\n        )\n      ).toBe(true);\n    });\n\n    it('should search products by description', async () => {\n      const response = await request(app)\n        .get('/api/products/search?q=wireless')\n        .expect(200);\n\n      expect(response.body.items.length).toBeGreaterThanOrEqual(0);\n    });\n\n    it('should return empty results for no matches', async () => {\n      const response = await request(app)\n        .get('/api/products/search?q=nonexistentproduct123456')\n        .expect(200);\n\n      expect(response.body.items).toEqual([]);\n      expect(response.body.total).toBe(0);\n    });\n  });\n\n  describe('GET /api/products/:id', () => {\n    it('should get product by ID', async () => {\n      const response = await request(app).get('/api/products/prod-123').expect(200);\n\n      expect(response.body.id).toBe('prod-123');\n      expect(response.body).toHaveProperty('name');\n      expect(response.body).toHaveProperty('price');\n      expect(response.body).toHaveProperty('inventory');\n    });\n\n    it('should return 404 for non-existent product', async () => {\n      await request(app).get('/api/products/nonexistent').expect(404);\n    });\n\n    it('should include product ratings and reviews', async () => {\n      const response = await request(app).get('/api/products/prod-456').expect(200);\n\n      expect(response.body).toHaveProperty('rating');\n      expect(response.body).toHaveProperty('reviewCount');\n    });\n  });\n\n  describe('POST /api/products (Admin Only)', () => {\n    it('should create product as admin', async () => {\n      const response = await request(app)\n        .post('/api/products')\n        .set('Authorization', `Bearer ${adminToken}`)\n        .send({\n          name: 'New Product',\n          description: 'A great new product',\n          sku: 'NEW-001',\n          price: 99.99,\n          inventory: 50,\n          category: 'electronics',\n        })\n        .expect(201);\n\n      expect(response.body.name).toBe('New Product');\n      expect(response.body.sku).toBe('NEW-001');\n    });\n\n    it('should return 403 for non-admin users', async () => {\n      await request(app)\n        .post('/api/products')\n        .set('Authorization', `Bearer ${authToken}`)\n        .send({\n          name: 'Unauthorized Product',\n          sku: 'UNAUTH-001',\n          price: 50.00,\n        })\n        .expect(403);\n    });\n\n    it('should validate required fields', async () => {\n      const response = await request(app)\n        .post('/api/products')\n        .set('Authorization', `Bearer ${adminToken}`)\n        .send({\n          name: 'Incomplete Product',\n          // Missing required fields\n        })\n        .expect(400);\n\n      expect(response.body).toHaveProperty('error');\n    });\n\n    it('should enforce unique SKU constraint', async () => {\n      await request(app)\n        .post('/api/products')\n        .set('Authorization', `Bearer ${adminToken}`)\n        .send({\n          name: 'Product 1',\n          sku: 'DUPLICATE-SKU',\n          price: 50.00,\n          inventory: 10,\n        })\n        .expect(201);\n\n      const response = await request(app)\n        .post('/api/products')\n        .set('Authorization', `Bearer ${adminToken}`)\n        .send({\n          name: 'Product 2',\n          sku: 'DUPLICATE-SKU',\n          price: 60.00,\n          inventory: 20,\n        })\n        .expect(409);\n\n      expect(response.body.error).toContain('SKU');\n    });\n\n    it('should validate price is positive', async () => {\n      const response = await request(app)\n        .post('/api/products')\n        .set('Authorization', `Bearer ${adminToken}`)\n        .send({\n          name: 'Invalid Price Product',\n          sku: 'INVALID-PRICE',\n          price: -10.00,\n          inventory: 5,\n        })\n        .expect(400);\n\n      expect(response.body.error).toContain('price');\n    });\n  });\n\n  describe('PUT /api/products/:id (Admin Only)', () => {\n    it('should update product', async () => {\n      const response = await request(app)\n        .put('/api/products/prod-update-1')\n        .set('Authorization', `Bearer ${adminToken}`)\n        .send({\n          name: 'Updated Product Name',\n          price: 149.99,\n        })\n        .expect(200);\n\n      expect(response.body.name).toBe('Updated Product Name');\n      expect(response.body.price).toBe(149.99);\n    });\n\n    it('should update inventory', async () => {\n      const response = await request(app)\n        .put('/api/products/prod-update-2')\n        .set('Authorization', `Bearer ${adminToken}`)\n        .send({\n          inventory: 75,\n        })\n        .expect(200);\n\n      expect(response.body.inventory).toBe(75);\n    });\n\n    it('should return 403 for non-admin users', async () => {\n      await request(app)\n        .put('/api/products/prod-123')\n        .set('Authorization', `Bearer ${authToken}`)\n        .send({\n          price: 999.99,\n        })\n        .expect(403);\n    });\n\n    it('should return 404 for non-existent product', async () => {\n      await request(app)\n        .put('/api/products/nonexistent')\n        .set('Authorization', `Bearer ${adminToken}`)\n        .send({\n          price: 50.00,\n        })\n        .expect(404);\n    });\n  });\n\n  describe('DELETE /api/products/:id (Admin Only)', () => {\n    it('should delete product', async () => {\n      await request(app)\n        .delete('/api/products/prod-delete-1')\n        .set('Authorization', `Bearer ${adminToken}`)\n        .expect(200);\n    });\n\n    it('should return 403 for non-admin users', async () => {\n      await request(app)\n        .delete('/api/products/prod-123')\n        .set('Authorization', `Bearer ${authToken}`)\n        .expect(403);\n    });\n\n    it('should return 404 for non-existent product', async () => {\n      await request(app)\n        .delete('/api/products/nonexistent')\n        .set('Authorization', `Bearer ${adminToken}`)\n        .expect(404);\n    });\n  });\n\n  describe('GET /api/products/featured', () => {\n    it('should get featured products', async () => {\n      const response = await request(app).get('/api/products/featured').expect(200);\n\n      expect(Array.isArray(response.body)).toBe(true);\n      expect(response.body.every((p: any) => p.featured === true)).toBe(true);\n    });\n\n    it('should limit featured products', async () => {\n      const response = await request(app)\n        .get('/api/products/featured?limit=5')\n        .expect(200);\n\n      expect(response.body.length).toBeLessThanOrEqual(5);\n    });\n  });\n\n  describe('GET /api/products/top-selling', () => {\n    it('should get top selling products', async () => {\n      const response = await request(app)\n        .get('/api/products/top-selling')\n        .expect(200);\n\n      expect(Array.isArray(response.body)).toBe(true);\n\n      // Verify sorted by soldCount descending\n      const soldCounts = response.body.map((p: any) => p.soldCount);\n      const sorted = [...soldCounts].sort((a, b) => b - a);\n      expect(soldCounts).toEqual(sorted);\n    });\n  });\n\n  describe('GET /api/products/top-rated', () => {\n    it('should get top rated products', async () => {\n      const response = await request(app).get('/api/products/top-rated').expect(200);\n\n      expect(Array.isArray(response.body)).toBe(true);\n\n      // Verify sorted by rating descending\n      const ratings = response.body.map((p: any) => p.rating);\n      const sorted = [...ratings].sort((a, b) => b - a);\n      expect(ratings).toEqual(sorted);\n    });\n\n    it('should filter by minimum review count', async () => {\n      const response = await request(app)\n        .get('/api/products/top-rated?minReviews=10')\n        .expect(200);\n\n      expect(response.body.every((p: any) => p.reviewCount >= 10)).toBe(true);\n    });\n  });\n\n  describe('GET /api/products/on-sale', () => {\n    it('should get products on sale', async () => {\n      const response = await request(app).get('/api/products/on-sale').expect(200);\n\n      expect(Array.isArray(response.body)).toBe(true);\n      expect(\n        response.body.every((p: any) => p.compareAtPrice > p.price)\n      ).toBe(true);\n    });\n\n    it('should include discount percentage', async () => {\n      const response = await request(app).get('/api/products/on-sale').expect(200);\n\n      expect(response.body.every((p: any) => p.discountPercentage > 0)).toBe(true);\n    });\n  });\n\n  describe('GET /api/products/low-stock', () => {\n    it('should get low stock products (admin only)', async () => {\n      const response = await request(app)\n        .get('/api/products/low-stock')\n        .set('Authorization', `Bearer ${adminToken}`)\n        .expect(200);\n\n      expect(Array.isArray(response.body)).toBe(true);\n      expect(response.body.every((p: any) => p.inventory <= 10)).toBe(true);\n    });\n\n    it('should allow custom threshold', async () => {\n      const response = await request(app)\n        .get('/api/products/low-stock?threshold=20')\n        .set('Authorization', `Bearer ${adminToken}`)\n        .expect(200);\n\n      expect(response.body.every((p: any) => p.inventory <= 20)).toBe(true);\n    });\n\n    it('should return 403 for non-admin users', async () => {\n      await request(app)\n        .get('/api/products/low-stock')\n        .set('Authorization', `Bearer ${authToken}`)\n        .expect(403);\n    });\n  });\n\n  describe('GET /api/products/:id/related', () => {\n    it('should get related products', async () => {\n      const response = await request(app)\n        .get('/api/products/prod-123/related')\n        .expect(200);\n\n      expect(Array.isArray(response.body)).toBe(true);\n      expect(response.body.every((p: any) => p.id !== 'prod-123')).toBe(true);\n    });\n\n    it('should limit number of related products', async () => {\n      const response = await request(app)\n        .get('/api/products/prod-456/related?limit=4')\n        .expect(200);\n\n      expect(response.body.length).toBeLessThanOrEqual(4);\n    });\n  });\n\n  describe('Product Images', () => {\n    it('should include product images', async () => {\n      const response = await request(app).get('/api/products/prod-789').expect(200);\n\n      expect(response.body).toHaveProperty('images');\n      expect(Array.isArray(response.body.images)).toBe(true);\n    });\n\n    it('should upload product image (admin only)', async () => {\n      const response = await request(app)\n        .post('/api/products/prod-123/images')\n        .set('Authorization', `Bearer ${adminToken}`)\n        .attach('image', Buffer.from('fake-image-data'), 'product.jpg')\n        .expect(201);\n\n      expect(response.body).toHaveProperty('imageUrl');\n    });\n  });\n\n  describe('Product Reviews', () => {\n    it('should get product reviews', async () => {\n      const response = await request(app)\n        .get('/api/products/prod-123/reviews')\n        .expect(200);\n\n      expect(response.body).toHaveProperty('reviews');\n      expect(Array.isArray(response.body.reviews)).toBe(true);\n    });\n\n    it('should post product review (authenticated)', async () => {\n      const response = await request(app)\n        .post('/api/products/prod-456/reviews')\n        .set('Authorization', `Bearer ${authToken}`)\n        .send({\n          rating: 5,\n          title: 'Excellent product!',\n          comment: 'Very satisfied with this purchase.',\n        })\n        .expect(201);\n\n      expect(response.body.rating).toBe(5);\n    });\n\n    it('should validate rating range', async () => {\n      const response = await request(app)\n        .post('/api/products/prod-789/reviews')\n        .set('Authorization', `Bearer ${authToken}`)\n        .send({\n          rating: 6, // Invalid, max is 5\n          comment: 'Great product',\n        })\n        .expect(400);\n\n      expect(response.body.error).toContain('rating');\n    });\n  });\n\n  describe('Inventory Management', () => {\n    it('should decrement inventory on purchase', async () => {\n      const beforeResponse = await request(app)\n        .get('/api/products/prod-inventory')\n        .expect(200);\n\n      const beforeInventory = beforeResponse.body.inventory;\n\n      await request(app)\n        .post('/api/orders')\n        .set('Authorization', `Bearer ${authToken}`)\n        .send({\n          items: [\n            {\n              productId: 'prod-inventory',\n              quantity: 2,\n            },\n          ],\n        })\n        .expect(201);\n\n      const afterResponse = await request(app)\n        .get('/api/products/prod-inventory')\n        .expect(200);\n\n      expect(afterResponse.body.inventory).toBe(beforeInventory - 2);\n    });\n\n    it('should prevent negative inventory', async () => {\n      const response = await request(app)\n        .put('/api/products/prod-negative')\n        .set('Authorization', `Bearer ${adminToken}`)\n        .send({\n          inventory: -5,\n        })\n        .expect(400);\n\n      expect(response.body.error).toContain('inventory');\n    });\n  });\n\n  describe('Product Variants', () => {\n    it('should get product variants', async () => {\n      const response = await request(app)\n        .get('/api/products/prod-variants/variants')\n        .expect(200);\n\n      expect(Array.isArray(response.body)).toBe(true);\n    });\n\n    it('should filter by variant options', async () => {\n      const response = await request(app)\n        .get('/api/products/prod-tshirt/variants?size=L&color=blue')\n        .expect(200);\n\n      expect(\n        response.body.every((v: any) => v.size === 'L' && v.color === 'blue')\n      ).toBe(true);\n    });\n  });\n});\n"],"version":3}