faced10b85d1d73423234fcd49ffcd42
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ServiceUnavailableError = exports.InternalServerError = exports.RateLimitError = exports.ValidationError = exports.ConflictError = exports.NotFoundError = exports.ForbiddenError = exports.UnauthorizedError = exports.BadRequestError = exports.BaseError = void 0;
/**
 * Base Error Class
 * All custom errors extend from this base class
 */
class BaseError extends Error {
    statusCode;
    isOperational;
    timestamp;
    constructor(message, statusCode, isOperational = true) {
        super(message);
        this.statusCode = statusCode;
        this.isOperational = isOperational;
        this.timestamp = new Date();
        // Maintains proper stack trace for where our error was thrown (only available on V8)
        Error.captureStackTrace(this, this.constructor);
        Object.setPrototypeOf(this, new.target.prototype);
    }
    toJSON() {
        return {
            error: this.constructor.name,
            message: this.message,
            statusCode: this.statusCode,
            timestamp: this.timestamp.toISOString(),
        };
    }
}
exports.BaseError = BaseError;
/**
 * 400 Bad Request - Client sent invalid data
 */
class BadRequestError extends BaseError {
    constructor(message = 'Bad Request') {
        super(message, 400);
    }
}
exports.BadRequestError = BadRequestError;
/**
 * 401 Unauthorized - Authentication required
 */
class UnauthorizedError extends BaseError {
    constructor(message = 'Unauthorized') {
        super(message, 401);
    }
}
exports.UnauthorizedError = UnauthorizedError;
/**
 * 403 Forbidden - Insufficient permissions
 */
class ForbiddenError extends BaseError {
    constructor(message = 'Forbidden') {
        super(message, 403);
    }
}
exports.ForbiddenError = ForbiddenError;
/**
 * 404 Not Found - Resource doesn't exist
 */
class NotFoundError extends BaseError {
    constructor(message = 'Resource not found') {
        super(message, 404);
    }
}
exports.NotFoundError = NotFoundError;
/**
 * 409 Conflict - Resource already exists or conflict with current state
 */
class ConflictError extends BaseError {
    constructor(message = 'Conflict') {
        super(message, 409);
    }
}
exports.ConflictError = ConflictError;
/**
 * 422 Unprocessable Entity - Validation failed
 */
class ValidationError extends BaseError {
    errors;
    constructor(message = 'Validation failed', errors = {}) {
        super(message, 422);
        this.errors = errors;
    }
    toJSON() {
        return {
            ...super.toJSON(),
            errors: this.errors,
        };
    }
}
exports.ValidationError = ValidationError;
/**
 * 429 Too Many Requests - Rate limit exceeded
 */
class RateLimitError extends BaseError {
    constructor(message = 'Too many requests') {
        super(message, 429);
    }
}
exports.RateLimitError = RateLimitError;
/**
 * 500 Internal Server Error - Unexpected server error
 */
class InternalServerError extends BaseError {
    constructor(message = 'Internal server error') {
        super(message, 500, false); // Not operational - indicates a bug
    }
}
exports.InternalServerError = InternalServerError;
/**
 * 503 Service Unavailable - Service temporarily unavailable
 */
class ServiceUnavailableError extends BaseError {
    constructor(message = 'Service unavailable') {
        super(message, 503);
    }
}
exports.ServiceUnavailableError = ServiceUnavailableError;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXEFkYXB0aXZlX1Rlc3RpbmdcXHNyY1xcbGlic1xcZXJyb3JzXFxiYXNlLmVycm9yLnRzIiwibWFwcGluZ3MiOiI7OztBQUFBOzs7R0FHRztBQUNILE1BQXNCLFNBQVUsU0FBUSxLQUFLO0lBQzNCLFVBQVUsQ0FBUztJQUNuQixhQUFhLENBQVU7SUFDdkIsU0FBUyxDQUFPO0lBRWhDLFlBQVksT0FBZSxFQUFFLFVBQWtCLEVBQUUsZ0JBQXlCLElBQUk7UUFDNUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2YsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7UUFDN0IsSUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7UUFDbkMsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1FBRTVCLHFGQUFxRjtRQUNyRixLQUFLLENBQUMsaUJBQWlCLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNoRCxNQUFNLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ3BELENBQUM7SUFFTSxNQUFNO1FBQ1gsT0FBTztZQUNMLEtBQUssRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUk7WUFDNUIsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPO1lBQ3JCLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVTtZQUMzQixTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLEVBQUU7U0FDeEMsQ0FBQztJQUNKLENBQUM7Q0FDRjtBQXhCRCw4QkF3QkM7QUFFRDs7R0FFRztBQUNILE1BQWEsZUFBZ0IsU0FBUSxTQUFTO0lBQzVDLFlBQVksVUFBa0IsYUFBYTtRQUN6QyxLQUFLLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ3RCLENBQUM7Q0FDRjtBQUpELDBDQUlDO0FBRUQ7O0dBRUc7QUFDSCxNQUFhLGlCQUFrQixTQUFRLFNBQVM7SUFDOUMsWUFBWSxVQUFrQixjQUFjO1FBQzFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDdEIsQ0FBQztDQUNGO0FBSkQsOENBSUM7QUFFRDs7R0FFRztBQUNILE1BQWEsY0FBZSxTQUFRLFNBQVM7SUFDM0MsWUFBWSxVQUFrQixXQUFXO1FBQ3ZDLEtBQUssQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDdEIsQ0FBQztDQUNGO0FBSkQsd0NBSUM7QUFFRDs7R0FFRztBQUNILE1BQWEsYUFBYyxTQUFRLFNBQVM7SUFDMUMsWUFBWSxVQUFrQixvQkFBb0I7UUFDaEQsS0FBSyxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQztJQUN0QixDQUFDO0NBQ0Y7QUFKRCxzQ0FJQztBQUVEOztHQUVHO0FBQ0gsTUFBYSxhQUFjLFNBQVEsU0FBUztJQUMxQyxZQUFZLFVBQWtCLFVBQVU7UUFDdEMsS0FBSyxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQztJQUN0QixDQUFDO0NBQ0Y7QUFKRCxzQ0FJQztBQUVEOztHQUVHO0FBQ0gsTUFBYSxlQUFnQixTQUFRLFNBQVM7SUFDNUIsTUFBTSxDQUEyQjtJQUVqRCxZQUFZLFVBQWtCLG1CQUFtQixFQUFFLFNBQW1DLEVBQUU7UUFDdEYsS0FBSyxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQztRQUNwQixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztJQUN2QixDQUFDO0lBRU0sTUFBTTtRQUNYLE9BQU87WUFDTCxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUU7WUFDakIsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNO1NBQ3BCLENBQUM7SUFDSixDQUFDO0NBQ0Y7QUFkRCwwQ0FjQztBQUVEOztHQUVHO0FBQ0gsTUFBYSxjQUFlLFNBQVEsU0FBUztJQUMzQyxZQUFZLFVBQWtCLG1CQUFtQjtRQUMvQyxLQUFLLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ3RCLENBQUM7Q0FDRjtBQUpELHdDQUlDO0FBRUQ7O0dBRUc7QUFDSCxNQUFhLG1CQUFvQixTQUFRLFNBQVM7SUFDaEQsWUFBWSxVQUFrQix1QkFBdUI7UUFDbkQsS0FBSyxDQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxvQ0FBb0M7SUFDbEUsQ0FBQztDQUNGO0FBSkQsa0RBSUM7QUFFRDs7R0FFRztBQUNILE1BQWEsdUJBQXdCLFNBQVEsU0FBUztJQUNwRCxZQUFZLFVBQWtCLHFCQUFxQjtRQUNqRCxLQUFLLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ3RCLENBQUM7Q0FDRjtBQUpELDBEQUlDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxBZGFwdGl2ZV9UZXN0aW5nXFxzcmNcXGxpYnNcXGVycm9yc1xcYmFzZS5lcnJvci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEJhc2UgRXJyb3IgQ2xhc3NcbiAqIEFsbCBjdXN0b20gZXJyb3JzIGV4dGVuZCBmcm9tIHRoaXMgYmFzZSBjbGFzc1xuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmFzZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBwdWJsaWMgcmVhZG9ubHkgc3RhdHVzQ29kZTogbnVtYmVyO1xuICBwdWJsaWMgcmVhZG9ubHkgaXNPcGVyYXRpb25hbDogYm9vbGVhbjtcbiAgcHVibGljIHJlYWRvbmx5IHRpbWVzdGFtcDogRGF0ZTtcblxuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIHN0YXR1c0NvZGU6IG51bWJlciwgaXNPcGVyYXRpb25hbDogYm9vbGVhbiA9IHRydWUpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xuICAgIHRoaXMuaXNPcGVyYXRpb25hbCA9IGlzT3BlcmF0aW9uYWw7XG4gICAgdGhpcy50aW1lc3RhbXAgPSBuZXcgRGF0ZSgpO1xuXG4gICAgLy8gTWFpbnRhaW5zIHByb3BlciBzdGFjayB0cmFjZSBmb3Igd2hlcmUgb3VyIGVycm9yIHdhcyB0aHJvd24gKG9ubHkgYXZhaWxhYmxlIG9uIFY4KVxuICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBuZXcudGFyZ2V0LnByb3RvdHlwZSk7XG4gIH1cblxuICBwdWJsaWMgdG9KU09OKCk6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHRoaXMuY29uc3RydWN0b3IubmFtZSxcbiAgICAgIG1lc3NhZ2U6IHRoaXMubWVzc2FnZSxcbiAgICAgIHN0YXR1c0NvZGU6IHRoaXMuc3RhdHVzQ29kZSxcbiAgICAgIHRpbWVzdGFtcDogdGhpcy50aW1lc3RhbXAudG9JU09TdHJpbmcoKSxcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogNDAwIEJhZCBSZXF1ZXN0IC0gQ2xpZW50IHNlbnQgaW52YWxpZCBkYXRhXG4gKi9cbmV4cG9ydCBjbGFzcyBCYWRSZXF1ZXN0RXJyb3IgZXh0ZW5kcyBCYXNlRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSAnQmFkIFJlcXVlc3QnKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgNDAwKTtcbiAgfVxufVxuXG4vKipcbiAqIDQwMSBVbmF1dGhvcml6ZWQgLSBBdXRoZW50aWNhdGlvbiByZXF1aXJlZFxuICovXG5leHBvcnQgY2xhc3MgVW5hdXRob3JpemVkRXJyb3IgZXh0ZW5kcyBCYXNlRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSAnVW5hdXRob3JpemVkJykge1xuICAgIHN1cGVyKG1lc3NhZ2UsIDQwMSk7XG4gIH1cbn1cblxuLyoqXG4gKiA0MDMgRm9yYmlkZGVuIC0gSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBGb3JiaWRkZW5FcnJvciBleHRlbmRzIEJhc2VFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9ICdGb3JiaWRkZW4nKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgNDAzKTtcbiAgfVxufVxuXG4vKipcbiAqIDQwNCBOb3QgRm91bmQgLSBSZXNvdXJjZSBkb2Vzbid0IGV4aXN0XG4gKi9cbmV4cG9ydCBjbGFzcyBOb3RGb3VuZEVycm9yIGV4dGVuZHMgQmFzZUVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nID0gJ1Jlc291cmNlIG5vdCBmb3VuZCcpIHtcbiAgICBzdXBlcihtZXNzYWdlLCA0MDQpO1xuICB9XG59XG5cbi8qKlxuICogNDA5IENvbmZsaWN0IC0gUmVzb3VyY2UgYWxyZWFkeSBleGlzdHMgb3IgY29uZmxpY3Qgd2l0aCBjdXJyZW50IHN0YXRlXG4gKi9cbmV4cG9ydCBjbGFzcyBDb25mbGljdEVycm9yIGV4dGVuZHMgQmFzZUVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nID0gJ0NvbmZsaWN0Jykge1xuICAgIHN1cGVyKG1lc3NhZ2UsIDQwOSk7XG4gIH1cbn1cblxuLyoqXG4gKiA0MjIgVW5wcm9jZXNzYWJsZSBFbnRpdHkgLSBWYWxpZGF0aW9uIGZhaWxlZFxuICovXG5leHBvcnQgY2xhc3MgVmFsaWRhdGlvbkVycm9yIGV4dGVuZHMgQmFzZUVycm9yIHtcbiAgcHVibGljIHJlYWRvbmx5IGVycm9yczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+O1xuXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9ICdWYWxpZGF0aW9uIGZhaWxlZCcsIGVycm9yczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0ge30pIHtcbiAgICBzdXBlcihtZXNzYWdlLCA0MjIpO1xuICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xuICB9XG5cbiAgcHVibGljIHRvSlNPTigpOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgZXJyb3JzOiB0aGlzLmVycm9ycyxcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogNDI5IFRvbyBNYW55IFJlcXVlc3RzIC0gUmF0ZSBsaW1pdCBleGNlZWRlZFxuICovXG5leHBvcnQgY2xhc3MgUmF0ZUxpbWl0RXJyb3IgZXh0ZW5kcyBCYXNlRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSAnVG9vIG1hbnkgcmVxdWVzdHMnKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgNDI5KTtcbiAgfVxufVxuXG4vKipcbiAqIDUwMCBJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IgLSBVbmV4cGVjdGVkIHNlcnZlciBlcnJvclxuICovXG5leHBvcnQgY2xhc3MgSW50ZXJuYWxTZXJ2ZXJFcnJvciBleHRlbmRzIEJhc2VFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgNTAwLCBmYWxzZSk7IC8vIE5vdCBvcGVyYXRpb25hbCAtIGluZGljYXRlcyBhIGJ1Z1xuICB9XG59XG5cbi8qKlxuICogNTAzIFNlcnZpY2UgVW5hdmFpbGFibGUgLSBTZXJ2aWNlIHRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlXG4gKi9cbmV4cG9ydCBjbGFzcyBTZXJ2aWNlVW5hdmFpbGFibGVFcnJvciBleHRlbmRzIEJhc2VFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9ICdTZXJ2aWNlIHVuYXZhaWxhYmxlJykge1xuICAgIHN1cGVyKG1lc3NhZ2UsIDUwMyk7XG4gIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==