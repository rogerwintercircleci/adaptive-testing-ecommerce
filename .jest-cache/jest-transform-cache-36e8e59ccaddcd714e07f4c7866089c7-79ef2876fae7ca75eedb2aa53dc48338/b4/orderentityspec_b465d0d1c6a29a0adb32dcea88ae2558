7ec15eaabe318309c2b78beabfaebe5d
"use strict";
/**
 * Unit Tests: Order Entity
 *
 * Testing order entity business logic methods
 */
Object.defineProperty(exports, "__esModule", { value: true });
const order_entity_1 = require("./order.entity");
describe('Order Entity', () => {
    let order;
    let items;
    beforeEach(() => {
        items = [
            {
                id: 'item-1',
                orderId: 'order-123',
                productId: 'prod-1',
                productName: 'Product 1',
                productSku: 'SKU-001',
                unitPrice: 50.00,
                quantity: 2,
                subtotal: 100.00,
                calculateSubtotal: function () { return this.unitPrice * this.quantity; },
            },
            {
                id: 'item-2',
                orderId: 'order-123',
                productId: 'prod-2',
                productName: 'Product 2',
                productSku: 'SKU-002',
                unitPrice: 75.00,
                quantity: 1,
                subtotal: 75.00,
                calculateSubtotal: function () { return this.unitPrice * this.quantity; },
            },
        ];
        order = new order_entity_1.Order();
        order.id = 'order-123';
        order.userId = 'user-456';
        order.orderNumber = 'ORD-2024-001';
        order.status = order_entity_1.OrderStatus.PENDING;
        order.paymentStatus = order_entity_1.PaymentStatus.PENDING;
        order.subtotal = 175.00;
        order.taxAmount = 17.50;
        order.shippingCost = 10.00;
        order.discountAmount = 0;
        order.total = 202.50;
        order.items = items;
        order.shippingAddress = {
            street: '123 Main St',
            city: 'New York',
            state: 'NY',
            postalCode: '10001',
            country: 'USA',
        };
        order.createdAt = new Date();
        order.updatedAt = new Date();
    });
    describe('calculateTotal', () => {
        it('should calculate total correctly', () => {
            const total = order.calculateTotal();
            expect(total).toBe(202.50);
        });
        it('should include tax in total', () => {
            order.subtotal = 100.00;
            order.taxAmount = 10.00;
            order.shippingCost = 0;
            order.discountAmount = 0;
            expect(order.calculateTotal()).toBe(110.00);
        });
        it('should include shipping cost in total', () => {
            order.subtotal = 100.00;
            order.taxAmount = 0;
            order.shippingCost = 15.00;
            order.discountAmount = 0;
            expect(order.calculateTotal()).toBe(115.00);
        });
        it('should subtract discount from total', () => {
            order.subtotal = 100.00;
            order.taxAmount = 0;
            order.shippingCost = 0;
            order.discountAmount = 20.00;
            expect(order.calculateTotal()).toBe(80.00);
        });
        it('should handle all components together', () => {
            order.subtotal = 100.00;
            order.taxAmount = 10.00;
            order.shippingCost = 15.00;
            order.discountAmount = 25.00;
            expect(order.calculateTotal()).toBe(100.00);
        });
        it('should handle zero amounts', () => {
            order.subtotal = 100.00;
            order.taxAmount = 0;
            order.shippingCost = 0;
            order.discountAmount = 0;
            expect(order.calculateTotal()).toBe(100.00);
        });
    });
    describe('calculateSubtotal', () => {
        it('should calculate subtotal from items', () => {
            const subtotal = order.calculateSubtotal();
            expect(subtotal).toBe(175.00);
        });
        it('should handle single item', () => {
            order.items = [items[0]];
            expect(order.calculateSubtotal()).toBe(100.00);
        });
        it('should handle empty items', () => {
            order.items = [];
            expect(order.calculateSubtotal()).toBe(0);
        });
        it('should handle multiple items correctly', () => {
            order.items = [
                { ...items[0], unitPrice: 10.00, quantity: 3, subtotal: 30.00 },
                { ...items[1], unitPrice: 20.00, quantity: 2, subtotal: 40.00 },
            ];
            expect(order.calculateSubtotal()).toBe(70.00);
        });
    });
    describe('canBeCancelled', () => {
        it('should allow cancellation for pending orders', () => {
            order.status = order_entity_1.OrderStatus.PENDING;
            expect(order.canBeCancelled()).toBe(true);
        });
        it('should allow cancellation for confirmed orders', () => {
            order.status = order_entity_1.OrderStatus.CONFIRMED;
            expect(order.canBeCancelled()).toBe(true);
        });
        it('should not allow cancellation for processing orders', () => {
            order.status = order_entity_1.OrderStatus.PROCESSING;
            expect(order.canBeCancelled()).toBe(false);
        });
        it('should not allow cancellation for shipped orders', () => {
            order.status = order_entity_1.OrderStatus.SHIPPED;
            expect(order.canBeCancelled()).toBe(false);
        });
        it('should not allow cancellation for delivered orders', () => {
            order.status = order_entity_1.OrderStatus.DELIVERED;
            expect(order.canBeCancelled()).toBe(false);
        });
        it('should not allow cancellation for already cancelled orders', () => {
            order.status = order_entity_1.OrderStatus.CANCELLED;
            expect(order.canBeCancelled()).toBe(false);
        });
        it('should not allow cancellation for refunded orders', () => {
            order.status = order_entity_1.OrderStatus.REFUNDED;
            expect(order.canBeCancelled()).toBe(false);
        });
    });
    describe('isFulfilled', () => {
        it('should return true when order is delivered', () => {
            order.status = order_entity_1.OrderStatus.DELIVERED;
            expect(order.isFulfilled()).toBe(true);
        });
        it('should return false when order is pending', () => {
            order.status = order_entity_1.OrderStatus.PENDING;
            expect(order.isFulfilled()).toBe(false);
        });
        it('should return false when order is shipped but not delivered', () => {
            order.status = order_entity_1.OrderStatus.SHIPPED;
            expect(order.isFulfilled()).toBe(false);
        });
        it('should return false when order is cancelled', () => {
            order.status = order_entity_1.OrderStatus.CANCELLED;
            expect(order.isFulfilled()).toBe(false);
        });
    });
    describe('isPaid', () => {
        it('should return true when payment is complete', () => {
            order.paymentStatus = order_entity_1.PaymentStatus.PAID;
            expect(order.isPaid()).toBe(true);
        });
        it('should return false when payment is pending', () => {
            order.paymentStatus = order_entity_1.PaymentStatus.PENDING;
            expect(order.isPaid()).toBe(false);
        });
        it('should return false when payment failed', () => {
            order.paymentStatus = order_entity_1.PaymentStatus.FAILED;
            expect(order.isPaid()).toBe(false);
        });
        it('should return false when payment is refunded', () => {
            order.paymentStatus = order_entity_1.PaymentStatus.REFUNDED;
            expect(order.isPaid()).toBe(false);
        });
    });
    describe('getTotalItemsCount', () => {
        it('should count total items across all line items', () => {
            const count = order.getTotalItemsCount();
            expect(count).toBe(3); // 2 + 1
        });
        it('should handle single item', () => {
            order.items = [{ ...items[0], quantity: 5 }];
            expect(order.getTotalItemsCount()).toBe(5);
        });
        it('should handle empty items', () => {
            order.items = [];
            expect(order.getTotalItemsCount()).toBe(0);
        });
        it('should sum quantities correctly', () => {
            order.items = [
                { ...items[0], quantity: 10 },
                { ...items[1], quantity: 20 },
            ];
            expect(order.getTotalItemsCount()).toBe(30);
        });
    });
    describe('OrderItem', () => {
        describe('calculateSubtotal', () => {
            it('should calculate subtotal correctly', () => {
                const item = items[0];
                expect(item.calculateSubtotal()).toBe(100.00);
            });
            it('should handle different quantities', () => {
                const item = { ...items[0], unitPrice: 25.00, quantity: 4 };
                item.calculateSubtotal = function () { return this.unitPrice * this.quantity; };
                expect(item.calculateSubtotal()).toBe(100.00);
            });
            it('should handle single quantity', () => {
                const item = { ...items[0], unitPrice: 50.00, quantity: 1 };
                item.calculateSubtotal = function () { return this.unitPrice * this.quantity; };
                expect(item.calculateSubtotal()).toBe(50.00);
            });
            it('should handle decimal prices', () => {
                const item = { ...items[0], unitPrice: 19.99, quantity: 3 };
                item.calculateSubtotal = function () { return this.unitPrice * this.quantity; };
                expect(item.calculateSubtotal()).toBe(59.97);
            });
        });
    });
    describe('Order Properties', () => {
        it('should have required order number', () => {
            expect(order.orderNumber).toBe('ORD-2024-001');
        });
        it('should have shipping address', () => {
            expect(order.shippingAddress).toBeDefined();
            expect(order.shippingAddress.city).toBe('New York');
        });
        it('should support optional billing address', () => {
            order.billingAddress = {
                street: '456 Other St',
                city: 'Boston',
                state: 'MA',
                postalCode: '02101',
                country: 'USA',
            };
            expect(order.billingAddress.city).toBe('Boston');
        });
        it('should support payment method', () => {
            order.paymentMethod = order_entity_1.PaymentMethod.CREDIT_CARD;
            expect(order.paymentMethod).toBe(order_entity_1.PaymentMethod.CREDIT_CARD);
        });
        it('should support tracking number', () => {
            order.trackingNumber = 'TRACK123456';
            expect(order.trackingNumber).toBe('TRACK123456');
        });
        it('should support discount code', () => {
            order.discountCode = 'SAVE20';
            expect(order.discountCode).toBe('SAVE20');
        });
        it('should support order notes', () => {
            order.notes = 'Please leave at door';
            expect(order.notes).toBe('Please leave at door');
        });
    });
    describe('Order Status Transitions', () => {
        it('should track pending status', () => {
            order.status = order_entity_1.OrderStatus.PENDING;
            expect(order.status).toBe(order_entity_1.OrderStatus.PENDING);
        });
        it('should track confirmed status', () => {
            order.status = order_entity_1.OrderStatus.CONFIRMED;
            expect(order.status).toBe(order_entity_1.OrderStatus.CONFIRMED);
        });
        it('should track processing status', () => {
            order.status = order_entity_1.OrderStatus.PROCESSING;
            expect(order.status).toBe(order_entity_1.OrderStatus.PROCESSING);
        });
        it('should track shipped status', () => {
            order.status = order_entity_1.OrderStatus.SHIPPED;
            expect(order.status).toBe(order_entity_1.OrderStatus.SHIPPED);
        });
        it('should track delivered status', () => {
            order.status = order_entity_1.OrderStatus.DELIVERED;
            expect(order.status).toBe(order_entity_1.OrderStatus.DELIVERED);
        });
    });
    describe('Timestamps', () => {
        it('should track payment timestamp', () => {
            order.paidAt = new Date();
            expect(order.paidAt).toBeInstanceOf(Date);
        });
        it('should track shipping timestamp', () => {
            order.shippedAt = new Date();
            expect(order.shippedAt).toBeInstanceOf(Date);
        });
        it('should track delivery timestamp', () => {
            order.deliveredAt = new Date();
            expect(order.deliveredAt).toBeInstanceOf(Date);
        });
        it('should track cancellation timestamp', () => {
            order.cancelledAt = new Date();
            expect(order.cancelledAt).toBeInstanceOf(Date);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXEFkYXB0aXZlX1Rlc3RpbmdcXHNyY1xcc2VydmljZXNcXG9yZGVyLXByb2Nlc3NpbmdcXGVudGl0aWVzXFxvcmRlci5lbnRpdHkuc3BlYy50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7R0FJRzs7QUFFSCxpREFBNkY7QUFFN0YsUUFBUSxDQUFDLGNBQWMsRUFBRSxHQUFHLEVBQUU7SUFDNUIsSUFBSSxLQUFZLENBQUM7SUFDakIsSUFBSSxLQUFrQixDQUFDO0lBRXZCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxLQUFLLEdBQUc7WUFDTjtnQkFDRSxFQUFFLEVBQUUsUUFBUTtnQkFDWixPQUFPLEVBQUUsV0FBVztnQkFDcEIsU0FBUyxFQUFFLFFBQVE7Z0JBQ25CLFdBQVcsRUFBRSxXQUFXO2dCQUN4QixVQUFVLEVBQUUsU0FBUztnQkFDckIsU0FBUyxFQUFFLEtBQUs7Z0JBQ2hCLFFBQVEsRUFBRSxDQUFDO2dCQUNYLFFBQVEsRUFBRSxNQUFNO2dCQUNoQixpQkFBaUIsRUFBRSxjQUFhLE9BQU8sSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQzthQUN6RTtZQUNEO2dCQUNFLEVBQUUsRUFBRSxRQUFRO2dCQUNaLE9BQU8sRUFBRSxXQUFXO2dCQUNwQixTQUFTLEVBQUUsUUFBUTtnQkFDbkIsV0FBVyxFQUFFLFdBQVc7Z0JBQ3hCLFVBQVUsRUFBRSxTQUFTO2dCQUNyQixTQUFTLEVBQUUsS0FBSztnQkFDaEIsUUFBUSxFQUFFLENBQUM7Z0JBQ1gsUUFBUSxFQUFFLEtBQUs7Z0JBQ2YsaUJBQWlCLEVBQUUsY0FBYSxPQUFPLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7YUFDekU7U0FDRixDQUFDO1FBRUYsS0FBSyxHQUFHLElBQUksb0JBQUssRUFBRSxDQUFDO1FBQ3BCLEtBQUssQ0FBQyxFQUFFLEdBQUcsV0FBVyxDQUFDO1FBQ3ZCLEtBQUssQ0FBQyxNQUFNLEdBQUcsVUFBVSxDQUFDO1FBQzFCLEtBQUssQ0FBQyxXQUFXLEdBQUcsY0FBYyxDQUFDO1FBQ25DLEtBQUssQ0FBQyxNQUFNLEdBQUcsMEJBQVcsQ0FBQyxPQUFPLENBQUM7UUFDbkMsS0FBSyxDQUFDLGFBQWEsR0FBRyw0QkFBYSxDQUFDLE9BQU8sQ0FBQztRQUM1QyxLQUFLLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQztRQUN4QixLQUFLLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztRQUN4QixLQUFLLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztRQUMzQixLQUFLLENBQUMsY0FBYyxHQUFHLENBQUMsQ0FBQztRQUN6QixLQUFLLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQztRQUNyQixLQUFLLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNwQixLQUFLLENBQUMsZUFBZSxHQUFHO1lBQ3RCLE1BQU0sRUFBRSxhQUFhO1lBQ3JCLElBQUksRUFBRSxVQUFVO1lBQ2hCLEtBQUssRUFBRSxJQUFJO1lBQ1gsVUFBVSxFQUFFLE9BQU87WUFDbkIsT0FBTyxFQUFFLEtBQUs7U0FDZixDQUFDO1FBQ0YsS0FBSyxDQUFDLFNBQVMsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQzdCLEtBQUssQ0FBQyxTQUFTLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztJQUMvQixDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxHQUFHLEVBQUU7UUFDOUIsRUFBRSxDQUFDLGtDQUFrQyxFQUFFLEdBQUcsRUFBRTtZQUMxQyxNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsY0FBYyxFQUFFLENBQUM7WUFFckMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM3QixDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyw2QkFBNkIsRUFBRSxHQUFHLEVBQUU7WUFDckMsS0FBSyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUM7WUFDeEIsS0FBSyxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7WUFDeEIsS0FBSyxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUM7WUFDdkIsS0FBSyxDQUFDLGNBQWMsR0FBRyxDQUFDLENBQUM7WUFFekIsTUFBTSxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM5QyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx1Q0FBdUMsRUFBRSxHQUFHLEVBQUU7WUFDL0MsS0FBSyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUM7WUFDeEIsS0FBSyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUM7WUFDcEIsS0FBSyxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7WUFDM0IsS0FBSyxDQUFDLGNBQWMsR0FBRyxDQUFDLENBQUM7WUFFekIsTUFBTSxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM5QyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxxQ0FBcUMsRUFBRSxHQUFHLEVBQUU7WUFDN0MsS0FBSyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUM7WUFDeEIsS0FBSyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUM7WUFDcEIsS0FBSyxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUM7WUFDdkIsS0FBSyxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7WUFFN0IsTUFBTSxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM3QyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx1Q0FBdUMsRUFBRSxHQUFHLEVBQUU7WUFDL0MsS0FBSyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUM7WUFDeEIsS0FBSyxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7WUFDeEIsS0FBSyxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7WUFDM0IsS0FBSyxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7WUFFN0Is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QUMsaUNBQWlDLEVBQUUsR0FBRyxFQUFFO1lBQ3pDLEtBQUssQ0FBQyxXQUFXLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztZQUUvQixNQUFNLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNqRCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxxQ0FBcUMsRUFBRSxHQUFHLEVBQUU7WUFDN0MsS0FBSyxDQUFDLFdBQVcsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1lBRS9CLE1BQU0sQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2pELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcQWRhcHRpdmVfVGVzdGluZ1xcc3JjXFxzZXJ2aWNlc1xcb3JkZXItcHJvY2Vzc2luZ1xcZW50aXRpZXNcXG9yZGVyLmVudGl0eS5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5pdCBUZXN0czogT3JkZXIgRW50aXR5XG4gKlxuICogVGVzdGluZyBvcmRlciBlbnRpdHkgYnVzaW5lc3MgbG9naWMgbWV0aG9kc1xuICovXG5cbmltcG9ydCB7IE9yZGVyLCBPcmRlclN0YXR1cywgUGF5bWVudFN0YXR1cywgUGF5bWVudE1ldGhvZCwgT3JkZXJJdGVtIH0gZnJvbSAnLi9vcmRlci5lbnRpdHknO1xuXG5kZXNjcmliZSgnT3JkZXIgRW50aXR5JywgKCkgPT4ge1xuICBsZXQgb3JkZXI6IE9yZGVyO1xuICBsZXQgaXRlbXM6IE9yZGVySXRlbVtdO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGl0ZW1zID0gW1xuICAgICAge1xuICAgICAgICBpZDogJ2l0ZW0tMScsXG4gICAgICAgIG9yZGVySWQ6ICdvcmRlci0xMjMnLFxuICAgICAgICBwcm9kdWN0SWQ6ICdwcm9kLTEnLFxuICAgICAgICBwcm9kdWN0TmFtZTogJ1Byb2R1Y3QgMScsXG4gICAgICAgIHByb2R1Y3RTa3U6ICdTS1UtMDAxJyxcbiAgICAgICAgdW5pdFByaWNlOiA1MC4wMCxcbiAgICAgICAgcXVhbnRpdHk6IDIsXG4gICAgICAgIHN1YnRvdGFsOiAxMDAuMDAsXG4gICAgICAgIGNhbGN1bGF0ZVN1YnRvdGFsOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMudW5pdFByaWNlICogdGhpcy5xdWFudGl0eTsgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAnaXRlbS0yJyxcbiAgICAgICAgb3JkZXJJZDogJ29yZGVyLTEyMycsXG4gICAgICAgIHByb2R1Y3RJZDogJ3Byb2QtMicsXG4gICAgICAgIHByb2R1Y3ROYW1lOiAnUHJvZHVjdCAyJyxcbiAgICAgICAgcHJvZHVjdFNrdTogJ1NLVS0wMDInLFxuICAgICAgICB1bml0UHJpY2U6IDc1LjAwLFxuICAgICAgICBxdWFudGl0eTogMSxcbiAgICAgICAgc3VidG90YWw6IDc1LjAwLFxuICAgICAgICBjYWxjdWxhdGVTdWJ0b3RhbDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnVuaXRQcmljZSAqIHRoaXMucXVhbnRpdHk7IH0sXG4gICAgICB9LFxuICAgIF07XG5cbiAgICBvcmRlciA9IG5ldyBPcmRlcigpO1xuICAgIG9yZGVyLmlkID0gJ29yZGVyLTEyMyc7XG4gICAgb3JkZXIudXNlcklkID0gJ3VzZXItNDU2JztcbiAgICBvcmRlci5vcmRlck51bWJlciA9ICdPUkQtMjAyNC0wMDEnO1xuICAgIG9yZGVyLnN0YXR1cyA9IE9yZGVyU3RhdHVzLlBFTkRJTkc7XG4gICAgb3JkZXIucGF5bWVudFN0YXR1cyA9IFBheW1lbnRTdGF0dXMuUEVORElORztcbiAgICBvcmRlci5zdWJ0b3RhbCA9IDE3NS4wMDtcbiAgICBvcmRlci50YXhBbW91bnQgPSAxNy41MDtcbiAgICBvcmRlci5zaGlwcGluZ0Nvc3QgPSAxMC4wMDtcbiAgICBvcmRlci5kaXNjb3VudEFtb3VudCA9IDA7XG4gICAgb3JkZXIudG90YWwgPSAyMDIuNTA7XG4gICAgb3JkZXIuaXRlbXMgPSBpdGVtcztcbiAgICBvcmRlci5zaGlwcGluZ0FkZHJlc3MgPSB7XG4gICAgICBzdHJlZXQ6ICcxMjMgTWFpbiBTdCcsXG4gICAgICBjaXR5OiAnTmV3IFlvcmsnLFxuICAgICAgc3RhdGU6ICdOWScsXG4gICAgICBwb3N0YWxDb2RlOiAnMTAwMDEnLFxuICAgICAgY291bnRyeTogJ1VTQScsXG4gICAgfTtcbiAgICBvcmRlci5jcmVhdGVkQXQgPSBuZXcgRGF0ZSgpO1xuICAgIG9yZGVyLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjYWxjdWxhdGVUb3RhbCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSB0b3RhbCBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCB0b3RhbCA9IG9yZGVyLmNhbGN1bGF0ZVRvdGFsKCk7XG5cbiAgICAgIGV4cGVjdCh0b3RhbCkudG9CZSgyMDIuNTApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIHRheCBpbiB0b3RhbCcsICgpID0+IHtcbiAgICAgIG9yZGVyLnN1YnRvdGFsID0gMTAwLjAwO1xuICAgICAgb3JkZXIudGF4QW1vdW50ID0gMTAuMDA7XG4gICAgICBvcmRlci5zaGlwcGluZ0Nvc3QgPSAwO1xuICAgICAgb3JkZXIuZGlzY291bnRBbW91bnQgPSAwO1xuXG4gICAgICBleHBlY3Qob3JkZXIuY2FsY3VsYXRlVG90YWwoKSkudG9CZSgxMTAuMDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIHNoaXBwaW5nIGNvc3QgaW4gdG90YWwnLCAoKSA9PiB7XG4gICAgICBvcmRlci5zdWJ0b3RhbCA9IDEwMC4wMDtcbiAgICAgIG9yZGVyLnRheEFtb3VudCA9IDA7XG4gICAgICBvcmRlci5zaGlwcGluZ0Nvc3QgPSAxNS4wMDtcbiAgICAgIG9yZGVyLmRpc2NvdW50QW1vdW50ID0gMDtcblxuICAgICAgZXhwZWN0KG9yZGVyLmNhbGN1bGF0ZVRvdGFsKCkpLnRvQmUoMTE1LjAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc3VidHJhY3QgZGlzY291bnQgZnJvbSB0b3RhbCcsICgpID0+IHtcbiAgICAgIG9yZGVyLnN1YnRvdGFsID0gMTAwLjAwO1xuICAgICAgb3JkZXIudGF4QW1vdW50ID0gMDtcbiAgICAgIG9yZGVyLnNoaXBwaW5nQ29zdCA9IDA7XG4gICAgICBvcmRlci5kaXNjb3VudEFtb3VudCA9IDIwLjAwO1xuXG4gICAgICBleHBlY3Qob3JkZXIuY2FsY3VsYXRlVG90YWwoKSkudG9CZSg4MC4wMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBhbGwgY29tcG9uZW50cyB0b2dldGhlcicsICgpID0+IHtcbiAgICAgIG9yZGVyLnN1YnRvdGFsID0gMTAwLjAwO1xuICAgICAgb3JkZXIudGF4QW1vdW50ID0gMTAuMDA7XG4gICAgICBvcmRlci5zaGlwcGluZ0Nvc3QgPSAxNS4wMDtcbiAgICAgIG9yZGVyLmRpc2NvdW50QW1vdW50ID0gMjUuMDA7XG5cbiAgICAgIGV4cGVjdChvcmRlci5jYWxjdWxhdGVUb3RhbCgpKS50b0JlKDEwMC4wMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB6ZXJvIGFtb3VudHMnLCAoKSA9PiB7XG4gICAgICBvcmRlci5zdWJ0b3RhbCA9IDEwMC4wMDtcbiAgICAgIG9yZGVyLnRheEFtb3VudCA9IDA7XG4gICAgICBvcmRlci5zaGlwcGluZ0Nvc3QgPSAwO1xuICAgICAgb3JkZXIuZGlzY291bnRBbW91bnQgPSAwO1xuXG4gICAgICBleHBlY3Qob3JkZXIuY2FsY3VsYXRlVG90YWwoKSkudG9CZSgxMDAuMDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY2FsY3VsYXRlU3VidG90YWwnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgc3VidG90YWwgZnJvbSBpdGVtcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHN1YnRvdGFsID0gb3JkZXIuY2FsY3VsYXRlU3VidG90YWwoKTtcblxuICAgICAgZXhwZWN0KHN1YnRvdGFsKS50b0JlKDE3NS4wMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzaW5nbGUgaXRlbScsICgpID0+IHtcbiAgICAgIG9yZGVyLml0ZW1zID0gW2l0ZW1zWzBdXTtcblxuICAgICAgZXhwZWN0KG9yZGVyLmNhbGN1bGF0ZVN1YnRvdGFsKCkpLnRvQmUoMTAwLjAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IGl0ZW1zJywgKCkgPT4ge1xuICAgICAgb3JkZXIuaXRlbXMgPSBbXTtcblxuICAgICAgZXhwZWN0KG9yZGVyLmNhbGN1bGF0ZVN1YnRvdGFsKCkpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtdWx0aXBsZSBpdGVtcyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBvcmRlci5pdGVtcyA9IFtcbiAgICAgICAgeyAuLi5pdGVtc1swXSwgdW5pdFByaWNlOiAxMC4wMCwgcXVhbnRpdHk6IDMsIHN1YnRvdGFsOiAzMC4wMCB9IGFzIE9yZGVySXRlbSxcbiAgICAgICAgeyAuLi5pdGVtc1sxXSwgdW5pdFByaWNlOiAyMC4wMCwgcXVhbnRpdHk6IDIsIHN1YnRvdGFsOiA0MC4wMCB9IGFzIE9yZGVySXRlbSxcbiAgICAgIF07XG5cbiAgICAgIGV4cGVjdChvcmRlci5jYWxjdWxhdGVTdWJ0b3RhbCgpKS50b0JlKDcwLjAwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NhbkJlQ2FuY2VsbGVkJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYWxsb3cgY2FuY2VsbGF0aW9uIGZvciBwZW5kaW5nIG9yZGVycycsICgpID0+IHtcbiAgICAgIG9yZGVyLnN0YXR1cyA9IE9yZGVyU3RhdHVzLlBFTkRJTkc7XG5cbiAgICAgIGV4cGVjdChvcmRlci5jYW5CZUNhbmNlbGxlZCgpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBjYW5jZWxsYXRpb24gZm9yIGNvbmZpcm1lZCBvcmRlcnMnLCAoKSA9PiB7XG4gICAgICBvcmRlci5zdGF0dXMgPSBPcmRlclN0YXR1cy5DT05GSVJNRUQ7XG5cbiAgICAgIGV4cGVjdChvcmRlci5jYW5CZUNhbmNlbGxlZCgpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgYWxsb3cgY2FuY2VsbGF0aW9uIGZvciBwcm9jZXNzaW5nIG9yZGVycycsICgpID0+IHtcbiAgICAgIG9yZGVyLnN0YXR1cyA9IE9yZGVyU3RhdHVzLlBST0NFU1NJTkc7XG5cbiAgICAgIGV4cGVjdChvcmRlci5jYW5CZUNhbmNlbGxlZCgpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IGFsbG93IGNhbmNlbGxhdGlvbiBmb3Igc2hpcHBlZCBvcmRlcnMnLCAoKSA9PiB7XG4gICAgICBvcmRlci5zdGF0dXMgPSBPcmRlclN0YXR1cy5TSElQUEVEO1xuXG4gICAgICBleHBlY3Qob3JkZXIuY2FuQmVDYW5jZWxsZWQoKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCBhbGxvdyBjYW5jZWxsYXRpb24gZm9yIGRlbGl2ZXJlZCBvcmRlcnMnLCAoKSA9PiB7XG4gICAgICBvcmRlci5zdGF0dXMgPSBPcmRlclN0YXR1cy5ERUxJVkVSRUQ7XG5cbiAgICAgIGV4cGVjdChvcmRlci5jYW5CZUNhbmNlbGxlZCgpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IGFsbG93IGNhbmNlbGxhdGlvbiBmb3IgYWxyZWFkeSBjYW5jZWxsZWQgb3JkZXJzJywgKCkgPT4ge1xuICAgICAgb3JkZXIuc3RhdHVzID0gT3JkZXJTdGF0dXMuQ0FOQ0VMTEVEO1xuXG4gICAgICBleHBlY3Qob3JkZXIuY2FuQmVDYW5jZWxsZWQoKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCBhbGxvdyBjYW5jZWxsYXRpb24gZm9yIHJlZnVuZGVkIG9yZGVycycsICgpID0+IHtcbiAgICAgIG9yZGVyLnN0YXR1cyA9IE9yZGVyU3RhdHVzLlJFRlVOREVEO1xuXG4gICAgICBleHBlY3Qob3JkZXIuY2FuQmVDYW5jZWxsZWQoKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdpc0Z1bGZpbGxlZCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB0cnVlIHdoZW4gb3JkZXIgaXMgZGVsaXZlcmVkJywgKCkgPT4ge1xuICAgICAgb3JkZXIuc3RhdHVzID0gT3JkZXJTdGF0dXMuREVMSVZFUkVEO1xuXG4gICAgICBleHBlY3Qob3JkZXIuaXNGdWxmaWxsZWQoKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIHdoZW4gb3JkZXIgaXMgcGVuZGluZycsICgpID0+IHtcbiAgICAgIG9yZGVyLnN0YXR1cyA9IE9yZGVyU3RhdHVzLlBFTkRJTkc7XG5cbiAgICAgIGV4cGVjdChvcmRlci5pc0Z1bGZpbGxlZCgpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIHdoZW4gb3JkZXIgaXMgc2hpcHBlZCBidXQgbm90IGRlbGl2ZXJlZCcsICgpID0+IHtcbiAgICAgIG9yZGVyLnN0YXR1cyA9IE9yZGVyU3RhdHVzLlNISVBQRUQ7XG5cbiAgICAgIGV4cGVjdChvcmRlci5pc0Z1bGZpbGxlZCgpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIHdoZW4gb3JkZXIgaXMgY2FuY2VsbGVkJywgKCkgPT4ge1xuICAgICAgb3JkZXIuc3RhdHVzID0gT3JkZXJTdGF0dXMuQ0FOQ0VMTEVEO1xuXG4gICAgICBleHBlY3Qob3JkZXIuaXNGdWxmaWxsZWQoKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdpc1BhaWQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdHJ1ZSB3aGVuIHBheW1lbnQgaXMgY29tcGxldGUnLCAoKSA9PiB7XG4gICAgICBvcmRlci5wYXltZW50U3RhdHVzID0gUGF5bWVudFN0YXR1cy5QQUlEO1xuXG4gICAgICBleHBlY3Qob3JkZXIuaXNQYWlkKCkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSB3aGVuIHBheW1lbnQgaXMgcGVuZGluZycsICgpID0+IHtcbiAgICAgIG9yZGVyLnBheW1lbnRTdGF0dXMgPSBQYXltZW50U3RhdHVzLlBFTkRJTkc7XG5cbiAgICAgIGV4cGVjdChvcmRlci5pc1BhaWQoKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSB3aGVuIHBheW1lbnQgZmFpbGVkJywgKCkgPT4ge1xuICAgICAgb3JkZXIucGF5bWVudFN0YXR1cyA9IFBheW1lbnRTdGF0dXMuRkFJTEVEO1xuXG4gICAgICBleHBlY3Qob3JkZXIuaXNQYWlkKCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZmFsc2Ugd2hlbiBwYXltZW50IGlzIHJlZnVuZGVkJywgKCkgPT4ge1xuICAgICAgb3JkZXIucGF5bWVudFN0YXR1cyA9IFBheW1lbnRTdGF0dXMuUkVGVU5ERUQ7XG5cbiAgICAgIGV4cGVjdChvcmRlci5pc1BhaWQoKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRUb3RhbEl0ZW1zQ291bnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjb3VudCB0b3RhbCBpdGVtcyBhY3Jvc3MgYWxsIGxpbmUgaXRlbXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb3VudCA9IG9yZGVyLmdldFRvdGFsSXRlbXNDb3VudCgpO1xuXG4gICAgICBleHBlY3QoY291bnQpLnRvQmUoMyk7IC8vIDIgKyAxXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzaW5nbGUgaXRlbScsICgpID0+IHtcbiAgICAgIG9yZGVyLml0ZW1zID0gW3sgLi4uaXRlbXNbMF0sIHF1YW50aXR5OiA1IH0gYXMgT3JkZXJJdGVtXTtcblxuICAgICAgZXhwZWN0KG9yZGVyLmdldFRvdGFsSXRlbXNDb3VudCgpKS50b0JlKDUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgaXRlbXMnLCAoKSA9PiB7XG4gICAgICBvcmRlci5pdGVtcyA9IFtdO1xuXG4gICAgICBleHBlY3Qob3JkZXIuZ2V0VG90YWxJdGVtc0NvdW50KCkpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN1bSBxdWFudGl0aWVzIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIG9yZGVyLml0ZW1zID0gW1xuICAgICAgICB7IC4uLml0ZW1zWzBdLCBxdWFudGl0eTogMTAgfSBhcyBPcmRlckl0ZW0sXG4gICAgICAgIHsgLi4uaXRlbXNbMV0sIHF1YW50aXR5OiAyMCB9IGFzIE9yZGVySXRlbSxcbiAgICAgIF07XG5cbiAgICAgIGV4cGVjdChvcmRlci5nZXRUb3RhbEl0ZW1zQ291bnQoKSkudG9CZSgzMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdPcmRlckl0ZW0nLCAoKSA9PiB7XG4gICAgZGVzY3JpYmUoJ2NhbGN1bGF0ZVN1YnRvdGFsJywgKCkgPT4ge1xuICAgICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgc3VidG90YWwgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgICBjb25zdCBpdGVtID0gaXRlbXNbMF07XG5cbiAgICAgICAgZXhwZWN0KGl0ZW0uY2FsY3VsYXRlU3VidG90YWwoKSkudG9CZSgxMDAuMDApO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGRpZmZlcmVudCBxdWFudGl0aWVzJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBpdGVtID0geyAuLi5pdGVtc1swXSwgdW5pdFByaWNlOiAyNS4wMCwgcXVhbnRpdHk6IDQgfSBhcyBPcmRlckl0ZW07XG4gICAgICAgIGl0ZW0uY2FsY3VsYXRlU3VidG90YWwgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMudW5pdFByaWNlICogdGhpcy5xdWFudGl0eTsgfTtcblxuICAgICAgICBleHBlY3QoaXRlbS5jYWxjdWxhdGVTdWJ0b3RhbCgpKS50b0JlKDEwMC4wMCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2luZ2xlIHF1YW50aXR5JywgKCkgPT4ge1xuICAgICAgICBjb25zdCBpdGVtID0geyAuLi5pdGVtc1swXSwgdW5pdFByaWNlOiA1MC4wMCwgcXVhbnRpdHk6IDEgfSBhcyBPcmRlckl0ZW07XG4gICAgICAgIGl0ZW0uY2FsY3VsYXRlU3VidG90YWwgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMudW5pdFByaWNlICogdGhpcy5xdWFudGl0eTsgfTtcblxuICAgICAgICBleHBlY3QoaXRlbS5jYWxjdWxhdGVTdWJ0b3RhbCgpKS50b0JlKDUwLjAwKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSBkZWNpbWFsIHByaWNlcycsICgpID0+IHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHsgLi4uaXRlbXNbMF0sIHVuaXRQcmljZTogMTkuOTksIHF1YW50aXR5OiAzIH0gYXMgT3JkZXJJdGVtO1xuICAgICAgICBpdGVtLmNhbGN1bGF0ZVN1YnRvdGFsID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnVuaXRQcmljZSAqIHRoaXMucXVhbnRpdHk7IH07XG5cbiAgICAgICAgZXhwZWN0KGl0ZW0uY2FsY3VsYXRlU3VidG90YWwoKSkudG9CZSg1OS45Nyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ09yZGVyIFByb3BlcnRpZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYXZlIHJlcXVpcmVkIG9yZGVyIG51bWJlcicsICgpID0+IHtcbiAgICAgIGV4cGVjdChvcmRlci5vcmRlck51bWJlcikudG9CZSgnT1JELTIwMjQtMDAxJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgc2hpcHBpbmcgYWRkcmVzcycsICgpID0+IHtcbiAgICAgIGV4cGVjdChvcmRlci5zaGlwcGluZ0FkZHJlc3MpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3Qob3JkZXIuc2hpcHBpbmdBZGRyZXNzLmNpdHkpLnRvQmUoJ05ldyBZb3JrJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgb3B0aW9uYWwgYmlsbGluZyBhZGRyZXNzJywgKCkgPT4ge1xuICAgICAgb3JkZXIuYmlsbGluZ0FkZHJlc3MgPSB7XG4gICAgICAgIHN0cmVldDogJzQ1NiBPdGhlciBTdCcsXG4gICAgICAgIGNpdHk6ICdCb3N0b24nLFxuICAgICAgICBzdGF0ZTogJ01BJyxcbiAgICAgICAgcG9zdGFsQ29kZTogJzAyMTAxJyxcbiAgICAgICAgY291bnRyeTogJ1VTQScsXG4gICAgICB9O1xuXG4gICAgICBleHBlY3Qob3JkZXIuYmlsbGluZ0FkZHJlc3MuY2l0eSkudG9CZSgnQm9zdG9uJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgcGF5bWVudCBtZXRob2QnLCAoKSA9PiB7XG4gICAgICBvcmRlci5wYXltZW50TWV0aG9kID0gUGF5bWVudE1ldGhvZC5DUkVESVRfQ0FSRDtcblxuICAgICAgZXhwZWN0KG9yZGVyLnBheW1lbnRNZXRob2QpLnRvQmUoUGF5bWVudE1ldGhvZC5DUkVESVRfQ0FSRCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgdHJhY2tpbmcgbnVtYmVyJywgKCkgPT4ge1xuICAgICAgb3JkZXIudHJhY2tpbmdOdW1iZXIgPSAnVFJBQ0sxMjM0NTYnO1xuXG4gICAgICBleHBlY3Qob3JkZXIudHJhY2tpbmdOdW1iZXIpLnRvQmUoJ1RSQUNLMTIzNDU2Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgZGlzY291bnQgY29kZScsICgpID0+IHtcbiAgICAgIG9yZGVyLmRpc2NvdW50Q29kZSA9ICdTQVZFMjAnO1xuXG4gICAgICBleHBlY3Qob3JkZXIuZGlzY291bnRDb2RlKS50b0JlKCdTQVZFMjAnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc3VwcG9ydCBvcmRlciBub3RlcycsICgpID0+IHtcbiAgICAgIG9yZGVyLm5vdGVzID0gJ1BsZWFzZSBsZWF2ZSBhdCBkb29yJztcblxuICAgICAgZXhwZWN0KG9yZGVyLm5vdGVzKS50b0JlKCdQbGVhc2UgbGVhdmUgYXQgZG9vcicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnT3JkZXIgU3RhdHVzIFRyYW5zaXRpb25zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdHJhY2sgcGVuZGluZyBzdGF0dXMnLCAoKSA9PiB7XG4gICAgICBvcmRlci5zdGF0dXMgPSBPcmRlclN0YXR1cy5QRU5ESU5HO1xuXG4gICAgICBleHBlY3Qob3JkZXIuc3RhdHVzKS50b0JlKE9yZGVyU3RhdHVzLlBFTkRJTkcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0cmFjayBjb25maXJtZWQgc3RhdHVzJywgKCkgPT4ge1xuICAgICAgb3JkZXIuc3RhdHVzID0gT3JkZXJTdGF0dXMuQ09ORklSTUVEO1xuXG4gICAgICBleHBlY3Qob3JkZXIuc3RhdHVzKS50b0JlKE9yZGVyU3RhdHVzLkNPTkZJUk1FRCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRyYWNrIHByb2Nlc3Npbmcgc3RhdHVzJywgKCkgPT4ge1xuICAgICAgb3JkZXIuc3RhdHVzID0gT3JkZXJTdGF0dXMuUFJPQ0VTU0lORztcblxuICAgICAgZXhwZWN0KG9yZGVyLnN0YXR1cykudG9CZShPcmRlclN0YXR1cy5QUk9DRVNTSU5HKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdHJhY2sgc2hpcHBlZCBzdGF0dXMnLCAoKSA9PiB7XG4gICAgICBvcmRlci5zdGF0dXMgPSBPcmRlclN0YXR1cy5TSElQUEVEO1xuXG4gICAgICBleHBlY3Qob3JkZXIuc3RhdHVzKS50b0JlKE9yZGVyU3RhdHVzLlNISVBQRUQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0cmFjayBkZWxpdmVyZWQgc3RhdHVzJywgKCkgPT4ge1xuICAgICAgb3JkZXIuc3RhdHVzID0gT3JkZXJTdGF0dXMuREVMSVZFUkVEO1xuXG4gICAgICBleHBlY3Qob3JkZXIuc3RhdHVzKS50b0JlKE9yZGVyU3RhdHVzLkRFTElWRVJFRCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUaW1lc3RhbXBzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdHJhY2sgcGF5bWVudCB0aW1lc3RhbXAnLCAoKSA9PiB7XG4gICAgICBvcmRlci5wYWlkQXQgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICBleHBlY3Qob3JkZXIucGFpZEF0KS50b0JlSW5zdGFuY2VPZihEYXRlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdHJhY2sgc2hpcHBpbmcgdGltZXN0YW1wJywgKCkgPT4ge1xuICAgICAgb3JkZXIuc2hpcHBlZEF0ID0gbmV3IERhdGUoKTtcblxuICAgICAgZXhwZWN0KG9yZGVyLnNoaXBwZWRBdCkudG9CZUluc3RhbmNlT2YoRGF0ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRyYWNrIGRlbGl2ZXJ5IHRpbWVzdGFtcCcsICgpID0+IHtcbiAgICAgIG9yZGVyLmRlbGl2ZXJlZEF0ID0gbmV3IERhdGUoKTtcblxuICAgICAgZXhwZWN0KG9yZGVyLmRlbGl2ZXJlZEF0KS50b0JlSW5zdGFuY2VPZihEYXRlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdHJhY2sgY2FuY2VsbGF0aW9uIHRpbWVzdGFtcCcsICgpID0+IHtcbiAgICAgIG9yZGVyLmNhbmNlbGxlZEF0ID0gbmV3IERhdGUoKTtcblxuICAgICAgZXhwZWN0KG9yZGVyLmNhbmNlbGxlZEF0KS50b0JlSW5zdGFuY2VPZihEYXRlKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==