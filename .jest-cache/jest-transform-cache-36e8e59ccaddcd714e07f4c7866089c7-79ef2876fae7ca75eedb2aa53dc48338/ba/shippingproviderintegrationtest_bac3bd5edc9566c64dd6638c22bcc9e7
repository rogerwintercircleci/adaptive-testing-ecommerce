997195ac814cbe0ce518db8cf68f9427
"use strict";
/**
 * Integration Tests: Shipping Provider API
 *
 * Testing integration with shipping carriers (UPS, FedEx, USPS, DHL)
 */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
jest.mock('axios');
const axios_1 = __importDefault(require("axios"));
const shipping_provider_service_1 = require("../../../src/services/order-processing/services/shipping-provider.service");
const errors_1 = require("../../../src/libs/errors");
const mockedAxios = axios_1.default;
describe('Shipping Provider Integration Tests', () => {
    let shippingService;
    beforeEach(() => {
        jest.clearAllMocks();
        shippingService = new shipping_provider_service_1.ShippingProviderService({
            upsApiKey: 'ups-test-key',
            fedexApiKey: 'fedex-test-key',
            uspsApiKey: 'usps-test-key',
            dhlApiKey: 'dhl-test-key',
        });
    });
    describe('Calculate Shipping Rates', () => {
        it('should get shipping rates from UPS', async () => {
            const shipment = {
                origin: {
                    address: '123 Main St',
                    city: 'New York',
                    state: 'NY',
                    zip: '10001',
                    country: 'US',
                },
                destination: {
                    address: '456 Oak Ave',
                    city: 'Los Angeles',
                    state: 'CA',
                    zip: '90001',
                    country: 'US',
                },
                packages: [
                    {
                        weight: 5,
                        length: 10,
                        width: 8,
                        height: 6,
                        units: 'lb',
                    },
                ],
            };
            mockedAxios.post.mockResolvedValue({
                status: 200,
                data: {
                    rates: [
                        {
                            service: 'UPS Ground',
                            cost: 12.50,
                            estimatedDays: 5,
                        },
                        {
                            service: 'UPS 2nd Day Air',
                            cost: 25.00,
                            estimatedDays: 2,
                        },
                        {
                            service: 'UPS Next Day Air',
                            cost: 45.00,
                            estimatedDays: 1,
                        },
                    ],
                },
            });
            const rates = await shippingService.getRates('UPS', shipment);
            expect(rates.length).toBe(3);
            expect(rates[0].service).toBe('UPS Ground');
            expect(rates[0].cost).toBe(12.50);
        });
        it('should get shipping rates from multiple carriers', async () => {
            const shipment = {
                origin: {
                    zip: '10001',
                    country: 'US',
                },
                destination: {
                    zip: '90001',
                    country: 'US',
                },
                packages: [
                    {
                        weight: 2,
                        length: 12,
                        width: 10,
                        height: 4,
                    },
                ],
            };
            mockedAxios.post
                .mockResolvedValueOnce({
                status: 200,
                data: { rates: [{ service: 'UPS Ground', cost: 8.50 }] },
            })
                .mockResolvedValueOnce({
                status: 200,
                data: { rates: [{ service: 'FedEx Ground', cost: 7.99 }] },
            })
                .mockResolvedValueOnce({
                status: 200,
                data: { rates: [{ service: 'USPS Priority', cost: 9.25 }] },
            });
            const allRates = await shippingService.compareRates(shipment);
            expect(allRates.UPS.length).toBeGreaterThan(0);
            expect(allRates.FedEx.length).toBeGreaterThan(0);
            expect(allRates.USPS.length).toBeGreaterThan(0);
        });
        it('should find cheapest shipping option', async () => {
            const shipment = {
                origin: { zip: '10001', country: 'US' },
                destination: { zip: '90001', country: 'US' },
                packages: [{ weight: 3 }],
            };
            mockedAxios.post
                .mockResolvedValueOnce({
                status: 200,
                data: { rates: [{ service: 'UPS Ground', cost: 10.00 }] },
            })
                .mockResolvedValueOnce({
                status: 200,
                data: { rates: [{ service: 'FedEx Ground', cost: 8.50 }] },
            })
                .mockResolvedValueOnce({
                status: 200,
                data: { rates: [{ service: 'USPS Priority', cost: 12.00 }] },
            });
            const cheapest = await shippingService.getCheapestRate(shipment);
            expect(cheapest.carrier).toBe('FedEx');
            expect(cheapest.cost).toBe(8.50);
        });
    });
    describe('Create Shipping Labels', () => {
        it('should create shipping label with UPS', async () => {
            const labelRequest = {
                carrier: 'UPS',
                service: 'UPS Ground',
                shipment: {
                    origin: {
                        name: 'Warehouse A',
                        address: '123 Main St',
                        city: 'New York',
                        state: 'NY',
                        zip: '10001',
                        country: 'US',
                    },
                    destination: {
                        name: 'John Doe',
                        address: '456 Oak Ave',
                        city: 'Los Angeles',
                        state: 'CA',
                        zip: '90001',
                        country: 'US',
                    },
                    packages: [
                        {
                            weight: 5,
                            length: 10,
                            width: 8,
                            height: 6,
                        },
                    ],
                },
            };
            mockedAxios.post.mockResolvedValue({
                status: 200,
                data: {
                    success: true,
                    trackingNumber: '1Z999AA10123456784',
                    labelUrl: 'https://labels.ups.com/label/1Z999AA10123456784.pdf',
                    cost: 12.50,
                    carrier: 'UPS',
                },
            });
            const label = await shippingService.createLabel(labelRequest);
            expect(label.success).toBe(true);
            expect(label.trackingNumber).toBe('1Z999AA10123456784');
            expect(label.labelUrl).toBeDefined();
        });
        it('should create label with customer reference', async () => {
            const labelRequest = {
                carrier: 'FedEx',
                service: 'FedEx Ground',
                shipment: {
                    origin: { zip: '10001', country: 'US' },
                    destination: { zip: '90001', country: 'US' },
                    packages: [{ weight: 3 }],
                },
                reference: 'ORDER-12345',
            };
            mockedAxios.post.mockResolvedValue({
                status: 200,
                data: {
                    success: true,
                    trackingNumber: '773123456789',
                    labelUrl: 'https://labels.fedex.com/label/773123456789.pdf',
                    reference: 'ORDER-12345',
                },
            });
            const label = await shippingService.createLabel(labelRequest);
            expect(label.reference).toBe('ORDER-12345');
        });
        it('should handle address validation errors', async () => {
            const labelRequest = {
                carrier: 'UPS',
                service: 'UPS Ground',
                shipment: {
                    origin: { zip: '10001', country: 'US' },
                    destination: { address: 'Invalid Address', zip: '00000', country: 'US' },
                    packages: [{ weight: 2 }],
                },
            };
            mockedAxios.post.mockRejectedValue({
                response: {
                    status: 400,
                    data: {
                        error: 'invalid_address',
                        message: 'Destination address could not be validated',
                    },
                },
            });
            await expect(shippingService.createLabel(labelRequest)).rejects.toThrow(errors_1.BadRequestError);
        });
    });
    describe('Track Shipments', () => {
        it('should track UPS shipment', async () => {
            const trackingNumber = '1Z999AA10123456784';
            mockedAxios.get.mockResolvedValue({
                status: 200,
                data: {
                    trackingNumber,
                    carrier: 'UPS',
                    status: 'in_transit',
                    estimatedDelivery: '2024-01-20',
                    events: [
                        {
                            timestamp: '2024-01-15T08:00:00Z',
                            location: 'New York, NY',
                            status: 'picked_up',
                            description: 'Package picked up',
                        },
                        {
                            timestamp: '2024-01-16T14:30:00Z',
                            location: 'Chicago, IL',
                            status: 'in_transit',
                            description: 'In transit',
                        },
                    ],
                },
            });
            const tracking = await shippingService.trackShipment(trackingNumber);
            expect(tracking.trackingNumber).toBe(trackingNumber);
            expect(tracking.status).toBe('in_transit');
            expect(tracking.events.length).toBe(2);
        });
        it('should track FedEx shipment with detailed events', async () => {
            const trackingNumber = '773123456789';
            mockedAxios.get.mockResolvedValue({
                status: 200,
                data: {
                    trackingNumber,
                    carrier: 'FedEx',
                    status: 'delivered',
                    deliveredAt: '2024-01-18T16:45:00Z',
                    signedBy: 'J. DOE',
                    events: [
                        {
                            timestamp: '2024-01-15T10:00:00Z',
                            status: 'picked_up',
                        },
                        {
                            timestamp: '2024-01-18T16:45:00Z',
                            status: 'delivered',
                            signedBy: 'J. DOE',
                        },
                    ],
                },
            });
            const tracking = await shippingService.trackShipment(trackingNumber);
            expect(tracking.status).toBe('delivered');
            expect(tracking.signedBy).toBe('J. DOE');
        });
        it('should handle invalid tracking number', async () => {
            mockedAxios.get.mockRejectedValue({
                response: {
                    status: 404,
                    data: {
                        error: 'tracking_not_found',
                    },
                },
            });
            await expect(shippingService.trackShipment('INVALID123')).rejects.toThrow(errors_1.NotFoundError);
        });
    });
    describe('International Shipping', () => {
        it('should calculate customs duties', async () => {
            const shipment = {
                origin: { country: 'US', zip: '10001' },
                destination: { country: 'GB', zip: 'SW1A 1AA' },
                packages: [
                    {
                        weight: 10,
                        declaredValue: 500.00,
                        contents: [
                            {
                                description: 'Electronics',
                                quantity: 2,
                                value: 250.00,
                                hsCode: '8471.30',
                            },
                        ],
                    },
                ],
            };
            mockedAxios.post.mockResolvedValue({
                status: 200,
                data: {
                    duties: 45.00,
                    taxes: 100.00,
                    totalCustoms: 145.00,
                    currency: 'GBP',
                },
            });
            const customs = await shippingService.calculateCustoms(shipment);
            expect(customs.totalCustoms).toBe(145.00);
            expect(customs.currency).toBe('GBP');
        });
        it('should create international shipping label with customs forms', async () => {
            const labelRequest = {
                carrier: 'DHL',
                service: 'DHL Express',
                shipment: {
                    origin: { country: 'US' },
                    destination: { country: 'DE' },
                    packages: [
                        {
                            weight: 5,
                            declaredValue: 300.00,
                            contents: [
                                {
                                    description: 'Books',
                                    quantity: 3,
                                    value: 100.00,
                                },
                            ],
                        },
                    ],
                },
            };
            mockedAxios.post.mockResolvedValue({
                status: 200,
                data: {
                    success: true,
                    trackingNumber: 'DHL123456789',
                    labelUrl: 'https://labels.dhl.com/label.pdf',
                    customsFormUrl: 'https://labels.dhl.com/customs.pdf',
                },
            });
            const label = await shippingService.createLabel(labelRequest);
            expect(label.customsFormUrl).toBeDefined();
        });
        it('should validate prohibited items for international shipping', async () => {
            const shipment = {
                origin: { country: 'US' },
                destination: { country: 'AU' },
                packages: [
                    {
                        contents: [
                            {
                                description: 'Batteries', // Restricted item
                                quantity: 10,
                            },
                        ],
                    },
                ],
            };
            mockedAxios.post.mockRejectedValue({
                response: {
                    status: 400,
                    data: {
                        error: 'prohibited_item',
                        message: 'Batteries are restricted for shipping to Australia',
                    },
                },
            });
            await expect(shippingService.validateInternationalShipment(shipment)).rejects.toThrow(errors_1.BadRequestError);
        });
    });
    describe('Pickup Scheduling', () => {
        it('should schedule package pickup', async () => {
            const pickupRequest = {
                carrier: 'UPS',
                date: '2024-01-20',
                timeWindow: {
                    start: '09:00',
                    end: '17:00',
                },
                location: {
                    name: 'Warehouse A',
                    address: '123 Main St',
                    city: 'New York',
                    state: 'NY',
                    zip: '10001',
                },
                packages: 3,
                totalWeight: 25,
            };
            mockedAxios.post.mockResolvedValue({
                status: 200,
                data: {
                    success: true,
                    confirmationNumber: 'PKP123456',
                    scheduledDate: '2024-01-20',
                    estimatedTime: '10:00-12:00',
                },
            });
            const pickup = await shippingService.schedulePickup(pickupRequest);
            expect(pickup.success).toBe(true);
            expect(pickup.confirmationNumber).toBe('PKP123456');
        });
        it('should cancel scheduled pickup', async () => {
            mockedAxios.delete.mockResolvedValue({
                status: 200,
                data: {
                    success: true,
                    message: 'Pickup cancelled',
                },
            });
            const result = await shippingService.cancelPickup('PKP123456');
            expect(result.success).toBe(true);
        });
    });
    describe('Address Validation', () => {
        it('should validate and standardize address', async () => {
            const address = {
                address: '123 main st',
                city: 'new york',
                state: 'ny',
                zip: '10001',
                country: 'US',
            };
            mockedAxios.post.mockResolvedValue({
                status: 200,
                data: {
                    valid: true,
                    standardized: {
                        address: '123 Main St',
                        city: 'New York',
                        state: 'NY',
                        zip: '10001-0001',
                        country: 'US',
                    },
                    residential: false,
                },
            });
            const validated = await shippingService.validateAddress(address);
            expect(validated.valid).toBe(true);
            expect(validated.standardized.address).toBe('123 Main St');
            expect(validated.residential).toBe(false);
        });
        it('should suggest corrections for invalid address', async () => {
            const address = {
                address: '123 Main Street',
                city: 'Nowhere',
                state: 'XX',
                zip: '00000',
            };
            mockedAxios.post.mockResolvedValue({
                status: 200,
                data: {
                    valid: false,
                    suggestions: [
                        {
                            address: '123 Main St',
                            city: 'Springfield',
                            state: 'IL',
                            zip: '62701',
                        },
                    ],
                },
            });
            const validated = await shippingService.validateAddress(address);
            expect(validated.valid).toBe(false);
            expect(validated.suggestions.length).toBeGreaterThan(0);
        });
    });
    describe('Shipping Insurance', () => {
        it('should calculate insurance cost', async () => {
            const declaredValue = 1000.00;
            const insuranceCost = await shippingService.calculateInsurance('UPS', declaredValue);
            expect(insuranceCost).toBeGreaterThan(0);
            expect(insuranceCost).toBe(declaredValue * 0.01); // 1% of value
        });
        it('should create label with insurance', async () => {
            const labelRequest = {
                carrier: 'FedEx',
                service: 'FedEx Ground',
                shipment: {
                    origin: { zip: '10001', country: 'US' },
                    destination: { zip: '90001', country: 'US' },
                    packages: [
                        {
                            weight: 5,
                            declaredValue: 500.00,
                            insurance: true,
                        },
                    ],
                },
            };
            mockedAxios.post.mockResolvedValue({
                status: 200,
                data: {
                    success: true,
                    trackingNumber: 'FDX789456123',
                    insuranceCost: 5.00,
                    totalCost: 17.50,
                },
            });
            const label = await shippingService.createLabel(labelRequest);
            expect(label.insuranceCost).toBe(5.00);
        });
    });
    describe('Return Labels', () => {
        it('should create return shipping label', async () => {
            const returnRequest = {
                carrier: 'UPS',
                originalTracking: '1Z999AA10123456784',
                returnAddress: {
                    name: 'Returns Department',
                    address: '123 Warehouse Rd',
                    city: 'New York',
                    state: 'NY',
                    zip: '10001',
                },
            };
            mockedAxios.post.mockResolvedValue({
                status: 200,
                data: {
                    success: true,
                    trackingNumber: '1Z999AA10987654321',
                    labelUrl: 'https://labels.ups.com/return/label.pdf',
                    qrCode: 'https://labels.ups.com/return/qr.png',
                },
            });
            const returnLabel = await shippingService.createReturnLabel(returnRequest);
            expect(returnLabel.success).toBe(true);
            expect(returnLabel.trackingNumber).toBeDefined();
            expect(returnLabel.qrCode).toBeDefined();
        });
        it('should create prepaid return label', async () => {
            const returnRequest = {
                carrier: 'FedEx',
                service: 'FedEx Ground',
                prepaid: true,
                returnAddress: {
                    zip: '10001',
                    country: 'US',
                },
            };
            mockedAxios.post.mockResolvedValue({
                status: 200,
                data: {
                    success: true,
                    trackingNumber: 'FDX987654321',
                    prepaid: true,
                },
            });
            const label = await shippingService.createReturnLabel(returnRequest);
            expect(label.prepaid).toBe(true);
        });
    });
    describe('Batch Operations', () => {
        it('should create multiple labels in batch', async () => {
            const batchRequest = {
                carrier: 'UPS',
                shipments: [
                    {
                        destination: { zip: '90001', country: 'US' },
                        packages: [{ weight: 2 }],
                    },
                    {
                        destination: { zip: '60601', country: 'US' },
                        packages: [{ weight: 3 }],
                    },
                    {
                        destination: { zip: '75201', country: 'US' },
                        packages: [{ weight: 1 }],
                    },
                ],
            };
            mockedAxios.post.mockResolvedValue({
                status: 200,
                data: {
                    success: true,
                    labels: [
                        { trackingNumber: '1Z001', labelUrl: 'url1' },
                        { trackingNumber: '1Z002', labelUrl: 'url2' },
                        { trackingNumber: '1Z003', labelUrl: 'url3' },
                    ],
                },
            });
            const batch = await shippingService.createBatchLabels(batchRequest);
            expect(batch.labels.length).toBe(3);
            expect(batch.success).toBe(true);
        });
        it('should handle partial batch failures', async () => {
            mockedAxios.post.mockResolvedValue({
                status: 200,
                data: {
                    success: false,
                    labels: [
                        { trackingNumber: '1Z001', success: true },
                        { success: false, error: 'Invalid address' },
                        { trackingNumber: '1Z003', success: true },
                    ],
                },
            });
            const batch = await shippingService.createBatchLabels({
                carrier: 'UPS',
                shipments: [{}, {}, {}],
            });
            const successCount = batch.labels.filter((l) => l.success).length;
            expect(successCount).toBe(2);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXEFkYXB0aXZlX1Rlc3RpbmdcXHRlc3RzXFxpbnRlZ3JhdGlvblxcZXh0ZXJuYWxcXHNoaXBwaW5nLXByb3ZpZGVyLmludGVncmF0aW9uLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7O0dBSUc7Ozs7O0FBTUgsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUpuQixrREFBMEI7QUFDMUIseUhBQW9IO0FBQ3BILHFEQUEwRTtBQUcxRSxNQUFNLFdBQVcsR0FBRyxlQUFrQyxDQUFDO0FBRXZELFFBQVEsQ0FBQyxxQ0FBcUMsRUFBRSxHQUFHLEVBQUU7SUFDbkQsSUFBSSxlQUF3QyxDQUFDO0lBRTdDLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDckIsZUFBZSxHQUFHLElBQUksbURBQXVCLENBQUM7WUFDNUMsU0FBUyxFQUFFLGNBQWM7WUFDekIsV0FBVyxFQUFFLGdCQUFnQjtZQUM3QixVQUFVLEVBQUUsZUFBZTtZQUMzQixTQUFTLEVBQUUsY0FBYztTQUMxQixDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQywwQkFBMEIsRUFBRSxHQUFHLEVBQUU7UUFDeEMsRUFBRSxDQUFDLG9DQUFvQyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ2xELE1BQU0sUUFBUSxHQUFHO2dCQUNmLE1BQU0sRUFBRTtvQkFDTixPQUFPLEVBQUUsYUFBYTtvQkFDdEIsSUFBSSxFQUFFLFVBQVU7b0JBQ2hCLEtBQUssRUFBRSxJQUFJO29CQUNYLEdBQUcsRUFBRSxPQUFPO29CQUNaLE9BQU8sRUFBRSxJQUFJO2lCQUNkO2dCQUNELFdBQVcsRUFBRTtvQkFDWCxPQUFPLEVBQUUsYUFBYTtvQkFDdEIsSUFBSSxFQUFFLGFBQWE7b0JBQ25CLEtBQUssRUFBRSxJQUFJO29CQUNYLEdBQUcsRUFBRSxPQUFPO29CQUNaLE9BQU8sRUFBRSxJQUFJO2lCQUNkO2dCQUNELFFBQVEsRUFBRTtvQkFDUjt3QkFDRSxN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LEVBQUUsY0FBYyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFO3FCQUMzQztpQkFDRjthQUNGLENBQUMsQ0FBQztZQUVILE1BQU0sS0FBSyxHQUFHLE1BQU0sZUFBZSxDQUFDLGlCQUFpQixDQUFDO2dCQUNwRCxPQUFPLEVBQUUsS0FBSztnQkFDZCxTQUFTLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQzthQUNqQixDQUFDLENBQUM7WUFFVixNQUFNLFlBQVksR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQztZQUN2RSxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9CLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcQWRhcHRpdmVfVGVzdGluZ1xcdGVzdHNcXGludGVncmF0aW9uXFxleHRlcm5hbFxcc2hpcHBpbmctcHJvdmlkZXIuaW50ZWdyYXRpb24udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEludGVncmF0aW9uIFRlc3RzOiBTaGlwcGluZyBQcm92aWRlciBBUElcbiAqXG4gKiBUZXN0aW5nIGludGVncmF0aW9uIHdpdGggc2hpcHBpbmcgY2FycmllcnMgKFVQUywgRmVkRXgsIFVTUFMsIERITClcbiAqL1xuXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHsgU2hpcHBpbmdQcm92aWRlclNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZXMvb3JkZXItcHJvY2Vzc2luZy9zZXJ2aWNlcy9zaGlwcGluZy1wcm92aWRlci5zZXJ2aWNlJztcbmltcG9ydCB7IEJhZFJlcXVlc3RFcnJvciwgTm90Rm91bmRFcnJvciB9IGZyb20gJy4uLy4uLy4uL3NyYy9saWJzL2Vycm9ycyc7XG5cbmplc3QubW9jaygnYXhpb3MnKTtcbmNvbnN0IG1vY2tlZEF4aW9zID0gYXhpb3MgYXMgamVzdC5Nb2NrZWQ8dHlwZW9mIGF4aW9zPjtcblxuZGVzY3JpYmUoJ1NoaXBwaW5nIFByb3ZpZGVyIEludGVncmF0aW9uIFRlc3RzJywgKCkgPT4ge1xuICBsZXQgc2hpcHBpbmdTZXJ2aWNlOiBTaGlwcGluZ1Byb3ZpZGVyU2VydmljZTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBzaGlwcGluZ1NlcnZpY2UgPSBuZXcgU2hpcHBpbmdQcm92aWRlclNlcnZpY2Uoe1xuICAgICAgdXBzQXBpS2V5OiAndXBzLXRlc3Qta2V5JyxcbiAgICAgIGZlZGV4QXBpS2V5OiAnZmVkZXgtdGVzdC1rZXknLFxuICAgICAgdXNwc0FwaUtleTogJ3VzcHMtdGVzdC1rZXknLFxuICAgICAgZGhsQXBpS2V5OiAnZGhsLXRlc3Qta2V5JyxcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NhbGN1bGF0ZSBTaGlwcGluZyBSYXRlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdldCBzaGlwcGluZyByYXRlcyBmcm9tIFVQUycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNoaXBtZW50ID0ge1xuICAgICAgICBvcmlnaW46IHtcbiAgICAgICAgICBhZGRyZXNzOiAnMTIzIE1haW4gU3QnLFxuICAgICAgICAgIGNpdHk6ICdOZXcgWW9yaycsXG4gICAgICAgICAgc3RhdGU6ICdOWScsXG4gICAgICAgICAgemlwOiAnMTAwMDEnLFxuICAgICAgICAgIGNvdW50cnk6ICdVUycsXG4gICAgICAgIH0sXG4gICAgICAgIGRlc3RpbmF0aW9uOiB7XG4gICAgICAgICAgYWRkcmVzczogJzQ1NiBPYWsgQXZlJyxcbiAgICAgICAgICBjaXR5OiAnTG9zIEFuZ2VsZXMnLFxuICAgICAgICAgIHN0YXRlOiAnQ0EnLFxuICAgICAgICAgIHppcDogJzkwMDAxJyxcbiAgICAgICAgICBjb3VudHJ5OiAnVVMnLFxuICAgICAgICB9LFxuICAgICAgICBwYWNrYWdlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHdlaWdodDogNSxcbiAgICAgICAgICAgIGxlbmd0aDogMTAsXG4gICAgICAgICAgICB3aWR0aDogOCxcbiAgICAgICAgICAgIGhlaWdodDogNixcbiAgICAgICAgICAgIHVuaXRzOiAnbGInLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuXG4gICAgICBtb2NrZWRBeGlvcy5wb3N0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICByYXRlczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzZXJ2aWNlOiAnVVBTIEdyb3VuZCcsXG4gICAgICAgICAgICAgIGNvc3Q6IDEyLjUwLFxuICAgICAgICAgICAgICBlc3RpbWF0ZWREYXlzOiA1LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2VydmljZTogJ1VQUyAybmQgRGF5IEFpcicsXG4gICAgICAgICAgICAgIGNvc3Q6IDI1LjAwLFxuICAgICAgICAgICAgICBlc3RpbWF0ZWREYXlzOiAyLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2VydmljZTogJ1VQUyBOZXh0IERheSBBaXInLFxuICAgICAgICAgICAgICBjb3N0OiA0NS4wMCxcbiAgICAgICAgICAgICAgZXN0aW1hdGVkRGF5czogMSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByYXRlcyA9IGF3YWl0IHNoaXBwaW5nU2VydmljZS5nZXRSYXRlcygnVVBTJywgc2hpcG1lbnQpO1xuXG4gICAgICBleHBlY3QocmF0ZXMubGVuZ3RoKS50b0JlKDMpO1xuICAgICAgZXhwZWN0KHJhdGVzWzBdLnNlcnZpY2UpLnRvQmUoJ1VQUyBHcm91bmQnKTtcbiAgICAgIGV4cGVjdChyYXRlc1swXS5jb3N0KS50b0JlKDEyLjUwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2V0IHNoaXBwaW5nIHJhdGVzIGZyb20gbXVsdGlwbGUgY2FycmllcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzaGlwbWVudCA9IHtcbiAgICAgICAgb3JpZ2luOiB7XG4gICAgICAgICAgemlwOiAnMTAwMDEnLFxuICAgICAgICAgIGNvdW50cnk6ICdVUycsXG4gICAgICAgIH0sXG4gICAgICAgIGRlc3RpbmF0aW9uOiB7XG4gICAgICAgICAgemlwOiAnOTAwMDEnLFxuICAgICAgICAgIGNvdW50cnk6ICdVUycsXG4gICAgICAgIH0sXG4gICAgICAgIHBhY2thZ2VzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgd2VpZ2h0OiAyLFxuICAgICAgICAgICAgbGVuZ3RoOiAxMixcbiAgICAgICAgICAgIHdpZHRoOiAxMCxcbiAgICAgICAgICAgIGhlaWdodDogNCxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfTtcblxuICAgICAgbW9ja2VkQXhpb3MucG9zdFxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICBkYXRhOiB7IHJhdGVzOiBbeyBzZXJ2aWNlOiAnVVBTIEdyb3VuZCcsIGNvc3Q6IDguNTAgfV0gfSxcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgZGF0YTogeyByYXRlczogW3sgc2VydmljZTogJ0ZlZEV4IEdyb3VuZCcsIGNvc3Q6IDcuOTkgfV0gfSxcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgZGF0YTogeyByYXRlczogW3sgc2VydmljZTogJ1VTUFMgUHJpb3JpdHknLCBjb3N0OiA5LjI1IH1dIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICBjb25zdCBhbGxSYXRlcyA9IGF3YWl0IHNoaXBwaW5nU2VydmljZS5jb21wYXJlUmF0ZXMoc2hpcG1lbnQpO1xuXG4gICAgICBleHBlY3QoYWxsUmF0ZXMuVVBTLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KGFsbFJhdGVzLkZlZEV4Lmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KGFsbFJhdGVzLlVTUFMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpbmQgY2hlYXBlc3Qgc2hpcHBpbmcgb3B0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2hpcG1lbnQgPSB7XG4gICAgICAgIG9yaWdpbjogeyB6aXA6ICcxMDAwMScsIGNvdW50cnk6ICdVUycgfSxcbiAgICAgICAgZGVzdGluYXRpb246IHsgemlwOiAnOTAwMDEnLCBjb3VudHJ5OiAnVVMnIH0sXG4gICAgICAgIHBhY2thZ2VzOiBbeyB3ZWlnaHQ6IDMgfV0sXG4gICAgICB9O1xuXG4gICAgICBtb2NrZWRBeGlvcy5wb3N0XG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgIGRhdGE6IHsgcmF0ZXM6IFt7IHNlcnZpY2U6ICdVUFMgR3JvdW5kJywgY29zdDogMTAuMDAgfV0gfSxcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgZGF0YTogeyByYXRlczogW3sgc2VydmljZTogJ0ZlZEV4IEdyb3VuZCcsIGNvc3Q6IDguNTAgfV0gfSxcbiAgICAgICAgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgZGF0YTogeyByYXRlczogW3sgc2VydmljZTogJ1VTUFMgUHJpb3JpdHknLCBjb3N0OiAxMi4wMCB9XSB9LFxuICAgICAgICB9KTtcblxuICAgICAgY29uc3QgY2hlYXBlc3QgPSBhd2FpdCBzaGlwcGluZ1NlcnZpY2UuZ2V0Q2hlYXBlc3RSYXRlKHNoaXBtZW50KTtcblxuICAgICAgZXhwZWN0KGNoZWFwZXN0LmNhcnJpZXIpLnRvQmUoJ0ZlZEV4Jyk7XG4gICAgICBleHBlY3QoY2hlYXBlc3QuY29zdCkudG9CZSg4LjUwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NyZWF0ZSBTaGlwcGluZyBMYWJlbHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgc2hpcHBpbmcgbGFiZWwgd2l0aCBVUFMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBsYWJlbFJlcXVlc3QgPSB7XG4gICAgICAgIGNhcnJpZXI6ICdVUFMnLFxuICAgICAgICBzZXJ2aWNlOiAnVVBTIEdyb3VuZCcsXG4gICAgICAgIHNoaXBtZW50OiB7XG4gICAgICAgICAgb3JpZ2luOiB7XG4gICAgICAgICAgICBuYW1lOiAnV2FyZWhvdXNlIEEnLFxuICAgICAgICAgICAgYWRkcmVzczogJzEyMyBNYWluIFN0JyxcbiAgICAgICAgICAgIGNpdHk6ICdOZXcgWW9yaycsXG4gICAgICAgICAgICBzdGF0ZTogJ05ZJyxcbiAgICAgICAgICAgIHppcDogJzEwMDAxJyxcbiAgICAgICAgICAgIGNvdW50cnk6ICdVUycsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZXN0aW5hdGlvbjoge1xuICAgICAgICAgICAgbmFtZTogJ0pvaG4gRG9lJyxcbiAgICAgICAgICAgIGFkZHJlc3M6ICc0NTYgT2FrIEF2ZScsXG4gICAgICAgICAgICBjaXR5OiAnTG9zIEFuZ2VsZXMnLFxuICAgICAgICAgICAgc3RhdGU6ICdDQScsXG4gICAgICAgICAgICB6aXA6ICc5MDAwMScsXG4gICAgICAgICAgICBjb3VudHJ5OiAnVVMnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcGFja2FnZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgd2VpZ2h0OiA1LFxuICAgICAgICAgICAgICBsZW5ndGg6IDEwLFxuICAgICAgICAgICAgICB3aWR0aDogOCxcbiAgICAgICAgICAgICAgaGVpZ2h0OiA2LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgbW9ja2VkQXhpb3MucG9zdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICB0cmFja2luZ051bWJlcjogJzFaOTk5QUExMDEyMzQ1Njc4NCcsXG4gICAgICAgICAgbGFiZWxVcmw6ICdodHRwczovL2xhYmVscy51cHMuY29tL2xhYmVsLzFaOTk5QUExMDEyMzQ1Njc4NC5wZGYnLFxuICAgICAgICAgIGNvc3Q6IDEyLjUwLFxuICAgICAgICAgIGNhcnJpZXI6ICdVUFMnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGxhYmVsID0gYXdhaXQgc2hpcHBpbmdTZXJ2aWNlLmNyZWF0ZUxhYmVsKGxhYmVsUmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChsYWJlbC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGxhYmVsLnRyYWNraW5nTnVtYmVyKS50b0JlKCcxWjk5OUFBMTAxMjM0NTY3ODQnKTtcbiAgICAgIGV4cGVjdChsYWJlbC5sYWJlbFVybCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY3JlYXRlIGxhYmVsIHdpdGggY3VzdG9tZXIgcmVmZXJlbmNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbGFiZWxSZXF1ZXN0ID0ge1xuICAgICAgICBjYXJyaWVyOiAnRmVkRXgnLFxuICAgICAgICBzZXJ2aWNlOiAnRmVkRXggR3JvdW5kJyxcbiAgICAgICAgc2hpcG1lbnQ6IHtcbiAgICAgICAgICBvcmlnaW46IHsgemlwOiAnMTAwMDEnLCBjb3VudHJ5OiAnVVMnIH0sXG4gICAgICAgICAgZGVzdGluYXRpb246IHsgemlwOiAnOTAwMDEnLCBjb3VudHJ5OiAnVVMnIH0sXG4gICAgICAgICAgcGFja2FnZXM6IFt7IHdlaWdodDogMyB9XSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVmZXJlbmNlOiAnT1JERVItMTIzNDUnLFxuICAgICAgfTtcblxuICAgICAgbW9ja2VkQXhpb3MucG9zdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICB0cmFja2luZ051bWJlcjogJzc3MzEyMzQ1Njc4OScsXG4gICAgICAgICAgbGFiZWxVcmw6ICdodHRwczovL2xhYmVscy5mZWRleC5jb20vbGFiZWwvNzczMTIzNDU2Nzg5LnBkZicsXG4gICAgICAgICAgcmVmZXJlbmNlOiAnT1JERVItMTIzNDUnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGxhYmVsID0gYXdhaXQgc2hpcHBpbmdTZXJ2aWNlLmNyZWF0ZUxhYmVsKGxhYmVsUmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChsYWJlbC5yZWZlcmVuY2UpLnRvQmUoJ09SREVSLTEyMzQ1Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBhZGRyZXNzIHZhbGlkYXRpb24gZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbGFiZWxSZXF1ZXN0ID0ge1xuICAgICAgICBjYXJyaWVyOiAnVVBTJyxcbiAgICAgICAgc2VydmljZTogJ1VQUyBHcm91bmQnLFxuICAgICAgICBzaGlwbWVudDoge1xuICAgICAgICAgIG9yaWdpbjogeyB6aXA6ICcxMDAwMScsIGNvdW50cnk6ICdVUycgfSxcbiAgICAgICAgICBkZXN0aW5hdGlvbjogeyBhZGRyZXNzOiAnSW52YWxpZCBBZGRyZXNzJywgemlwOiAnMDAwMDAnLCBjb3VudHJ5OiAnVVMnIH0sXG4gICAgICAgICAgcGFja2FnZXM6IFt7IHdlaWdodDogMiB9XSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tlZEF4aW9zLnBvc3QubW9ja1JlamVjdGVkVmFsdWUoe1xuICAgICAgICByZXNwb25zZToge1xuICAgICAgICAgIHN0YXR1czogNDAwLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGVycm9yOiAnaW52YWxpZF9hZGRyZXNzJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdEZXN0aW5hdGlvbiBhZGRyZXNzIGNvdWxkIG5vdCBiZSB2YWxpZGF0ZWQnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNoaXBwaW5nU2VydmljZS5jcmVhdGVMYWJlbChsYWJlbFJlcXVlc3QpKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgIEJhZFJlcXVlc3RFcnJvclxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1RyYWNrIFNoaXBtZW50cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHRyYWNrIFVQUyBzaGlwbWVudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRyYWNraW5nTnVtYmVyID0gJzFaOTk5QUExMDEyMzQ1Njc4NCc7XG5cbiAgICAgIG1vY2tlZEF4aW9zLmdldC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdHJhY2tpbmdOdW1iZXIsXG4gICAgICAgICAgY2FycmllcjogJ1VQUycsXG4gICAgICAgICAgc3RhdHVzOiAnaW5fdHJhbnNpdCcsXG4gICAgICAgICAgZXN0aW1hdGVkRGVsaXZlcnk6ICcyMDI0LTAxLTIwJyxcbiAgICAgICAgICBldmVudHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiAnMjAyNC0wMS0xNVQwODowMDowMFonLFxuICAgICAgICAgICAgICBsb2NhdGlvbjogJ05ldyBZb3JrLCBOWScsXG4gICAgICAgICAgICAgIHN0YXR1czogJ3BpY2tlZF91cCcsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUGFja2FnZSBwaWNrZWQgdXAnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiAnMjAyNC0wMS0xNlQxNDozMDowMFonLFxuICAgICAgICAgICAgICBsb2NhdGlvbjogJ0NoaWNhZ28sIElMJyxcbiAgICAgICAgICAgICAgc3RhdHVzOiAnaW5fdHJhbnNpdCcsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnSW4gdHJhbnNpdCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgdHJhY2tpbmcgPSBhd2FpdCBzaGlwcGluZ1NlcnZpY2UudHJhY2tTaGlwbWVudCh0cmFja2luZ051bWJlcik7XG5cbiAgICAgIGV4cGVjdCh0cmFja2luZy50cmFja2luZ051bWJlcikudG9CZSh0cmFja2luZ051bWJlcik7XG4gICAgICBleHBlY3QodHJhY2tpbmcuc3RhdHVzKS50b0JlKCdpbl90cmFuc2l0Jyk7XG4gICAgICBleHBlY3QodHJhY2tpbmcuZXZlbnRzLmxlbmd0aCkudG9CZSgyKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdHJhY2sgRmVkRXggc2hpcG1lbnQgd2l0aCBkZXRhaWxlZCBldmVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0cmFja2luZ051bWJlciA9ICc3NzMxMjM0NTY3ODknO1xuXG4gICAgICBtb2NrZWRBeGlvcy5nZXQubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHRyYWNraW5nTnVtYmVyLFxuICAgICAgICAgIGNhcnJpZXI6ICdGZWRFeCcsXG4gICAgICAgICAgc3RhdHVzOiAnZGVsaXZlcmVkJyxcbiAgICAgICAgICBkZWxpdmVyZWRBdDogJzIwMjQtMDEtMThUMTY6NDU6MDBaJyxcbiAgICAgICAgICBzaWduZWRCeTogJ0ouIERPRScsXG4gICAgICAgICAgZXZlbnRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogJzIwMjQtMDEtMTVUMTA6MDA6MDBaJyxcbiAgICAgICAgICAgICAgc3RhdHVzOiAncGlja2VkX3VwJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogJzIwMjQtMDEtMThUMTY6NDU6MDBaJyxcbiAgICAgICAgICAgICAgc3RhdHVzOiAnZGVsaXZlcmVkJyxcbiAgICAgICAgICAgICAgc2lnbmVkQnk6ICdKLiBET0UnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHRyYWNraW5nID0gYXdhaXQgc2hpcHBpbmdTZXJ2aWNlLnRyYWNrU2hpcG1lbnQodHJhY2tpbmdOdW1iZXIpO1xuXG4gICAgICBleHBlY3QodHJhY2tpbmcuc3RhdHVzKS50b0JlKCdkZWxpdmVyZWQnKTtcbiAgICAgIGV4cGVjdCh0cmFja2luZy5zaWduZWRCeSkudG9CZSgnSi4gRE9FJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbnZhbGlkIHRyYWNraW5nIG51bWJlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tlZEF4aW9zLmdldC5tb2NrUmVqZWN0ZWRWYWx1ZSh7XG4gICAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgICAgc3RhdHVzOiA0MDQsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZXJyb3I6ICd0cmFja2luZ19ub3RfZm91bmQnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBzaGlwcGluZ1NlcnZpY2UudHJhY2tTaGlwbWVudCgnSU5WQUxJRDEyMycpXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhOb3RGb3VuZEVycm9yKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ludGVybmF0aW9uYWwgU2hpcHBpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgY3VzdG9tcyBkdXRpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzaGlwbWVudCA9IHtcbiAgICAgICAgb3JpZ2luOiB7IGNvdW50cnk6ICdVUycsIHppcDogJzEwMDAxJyB9LFxuICAgICAgICBkZXN0aW5hdGlvbjogeyBjb3VudHJ5OiAnR0InLCB6aXA6ICdTVzFBIDFBQScgfSxcbiAgICAgICAgcGFja2FnZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB3ZWlnaHQ6IDEwLFxuICAgICAgICAgICAgZGVjbGFyZWRWYWx1ZTogNTAwLjAwLFxuICAgICAgICAgICAgY29udGVudHM6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRWxlY3Ryb25pY3MnLFxuICAgICAgICAgICAgICAgIHF1YW50aXR5OiAyLFxuICAgICAgICAgICAgICAgIHZhbHVlOiAyNTAuMDAsXG4gICAgICAgICAgICAgICAgaHNDb2RlOiAnODQ3MS4zMCcsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuXG4gICAgICBtb2NrZWRBeGlvcy5wb3N0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBkdXRpZXM6IDQ1LjAwLFxuICAgICAgICAgIHRheGVzOiAxMDAuMDAsXG4gICAgICAgICAgdG90YWxDdXN0b21zOiAxNDUuMDAsXG4gICAgICAgICAgY3VycmVuY3k6ICdHQlAnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGN1c3RvbXMgPSBhd2FpdCBzaGlwcGluZ1NlcnZpY2UuY2FsY3VsYXRlQ3VzdG9tcyhzaGlwbWVudCk7XG5cbiAgICAgIGV4cGVjdChjdXN0b21zLnRvdGFsQ3VzdG9tcykudG9CZSgxNDUuMDApO1xuICAgICAgZXhwZWN0KGN1c3RvbXMuY3VycmVuY3kpLnRvQmUoJ0dCUCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgaW50ZXJuYXRpb25hbCBzaGlwcGluZyBsYWJlbCB3aXRoIGN1c3RvbXMgZm9ybXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBsYWJlbFJlcXVlc3QgPSB7XG4gICAgICAgIGNhcnJpZXI6ICdESEwnLFxuICAgICAgICBzZXJ2aWNlOiAnREhMIEV4cHJlc3MnLFxuICAgICAgICBzaGlwbWVudDoge1xuICAgICAgICAgIG9yaWdpbjogeyBjb3VudHJ5OiAnVVMnIH0sXG4gICAgICAgICAgZGVzdGluYXRpb246IHsgY291bnRyeTogJ0RFJyB9LFxuICAgICAgICAgIHBhY2thZ2VzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHdlaWdodDogNSxcbiAgICAgICAgICAgICAgZGVjbGFyZWRWYWx1ZTogMzAwLjAwLFxuICAgICAgICAgICAgICBjb250ZW50czogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQm9va3MnLFxuICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IDMsXG4gICAgICAgICAgICAgICAgICB2YWx1ZTogMTAwLjAwLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBtb2NrZWRBeGlvcy5wb3N0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIHRyYWNraW5nTnVtYmVyOiAnREhMMTIzNDU2Nzg5JyxcbiAgICAgICAgICBsYWJlbFVybDogJ2h0dHBzOi8vbGFiZWxzLmRobC5jb20vbGFiZWwucGRmJyxcbiAgICAgICAgICBjdXN0b21zRm9ybVVybDogJ2h0dHBzOi8vbGFiZWxzLmRobC5jb20vY3VzdG9tcy5wZGYnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGxhYmVsID0gYXdhaXQgc2hpcHBpbmdTZXJ2aWNlLmNyZWF0ZUxhYmVsKGxhYmVsUmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChsYWJlbC5jdXN0b21zRm9ybVVybCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgcHJvaGliaXRlZCBpdGVtcyBmb3IgaW50ZXJuYXRpb25hbCBzaGlwcGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNoaXBtZW50ID0ge1xuICAgICAgICBvcmlnaW46IHsgY291bnRyeTogJ1VTJyB9LFxuICAgICAgICBkZXN0aW5hdGlvbjogeyBjb3VudHJ5OiAnQVUnIH0sXG4gICAgICAgIHBhY2thZ2VzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgY29udGVudHM6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQmF0dGVyaWVzJywgLy8gUmVzdHJpY3RlZCBpdGVtXG4gICAgICAgICAgICAgICAgcXVhbnRpdHk6IDEwLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfTtcblxuICAgICAgbW9ja2VkQXhpb3MucG9zdC5tb2NrUmVqZWN0ZWRWYWx1ZSh7XG4gICAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZXJyb3I6ICdwcm9oaWJpdGVkX2l0ZW0nLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0JhdHRlcmllcyBhcmUgcmVzdHJpY3RlZCBmb3Igc2hpcHBpbmcgdG8gQXVzdHJhbGlhJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgc2hpcHBpbmdTZXJ2aWNlLnZhbGlkYXRlSW50ZXJuYXRpb25hbFNoaXBtZW50KHNoaXBtZW50KVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coQmFkUmVxdWVzdEVycm9yKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BpY2t1cCBTY2hlZHVsaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc2NoZWR1bGUgcGFja2FnZSBwaWNrdXAnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwaWNrdXBSZXF1ZXN0ID0ge1xuICAgICAgICBjYXJyaWVyOiAnVVBTJyxcbiAgICAgICAgZGF0ZTogJzIwMjQtMDEtMjAnLFxuICAgICAgICB0aW1lV2luZG93OiB7XG4gICAgICAgICAgc3RhcnQ6ICcwOTowMCcsXG4gICAgICAgICAgZW5kOiAnMTc6MDAnLFxuICAgICAgICB9LFxuICAgICAgICBsb2NhdGlvbjoge1xuICAgICAgICAgIG5hbWU6ICdXYXJlaG91c2UgQScsXG4gICAgICAgICAgYWRkcmVzczogJzEyMyBNYWluIFN0JyxcbiAgICAgICAgICBjaXR5OiAnTmV3IFlvcmsnLFxuICAgICAgICAgIHN0YXRlOiAnTlknLFxuICAgICAgICAgIHppcDogJzEwMDAxJyxcbiAgICAgICAgfSxcbiAgICAgICAgcGFja2FnZXM6IDMsXG4gICAgICAgIHRvdGFsV2VpZ2h0OiAyNSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tlZEF4aW9zLnBvc3QubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgY29uZmlybWF0aW9uTnVtYmVyOiAnUEtQMTIzNDU2JyxcbiAgICAgICAgICBzY2hlZHVsZWREYXRlOiAnMjAyNC0wMS0yMCcsXG4gICAgICAgICAgZXN0aW1hdGVkVGltZTogJzEwOjAwLTEyOjAwJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBwaWNrdXAgPSBhd2FpdCBzaGlwcGluZ1NlcnZpY2Uuc2NoZWR1bGVQaWNrdXAocGlja3VwUmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChwaWNrdXAuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChwaWNrdXAuY29uZmlybWF0aW9uTnVtYmVyKS50b0JlKCdQS1AxMjM0NTYnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FuY2VsIHNjaGVkdWxlZCBwaWNrdXAnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrZWRBeGlvcy5kZWxldGUubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogJ1BpY2t1cCBjYW5jZWxsZWQnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNoaXBwaW5nU2VydmljZS5jYW5jZWxQaWNrdXAoJ1BLUDEyMzQ1NicpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBZGRyZXNzIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBhbmQgc3RhbmRhcmRpemUgYWRkcmVzcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFkZHJlc3MgPSB7XG4gICAgICAgIGFkZHJlc3M6ICcxMjMgbWFpbiBzdCcsXG4gICAgICAgIGNpdHk6ICduZXcgeW9yaycsXG4gICAgICAgIHN0YXRlOiAnbnknLFxuICAgICAgICB6aXA6ICcxMDAwMScsXG4gICAgICAgIGNvdW50cnk6ICdVUycsXG4gICAgICB9O1xuXG4gICAgICBtb2NrZWRBeGlvcy5wb3N0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB2YWxpZDogdHJ1ZSxcbiAgICAgICAgICBzdGFuZGFyZGl6ZWQ6IHtcbiAgICAgICAgICAgIGFkZHJlc3M6ICcxMjMgTWFpbiBTdCcsXG4gICAgICAgICAgICBjaXR5OiAnTmV3IFlvcmsnLFxuICAgICAgICAgICAgc3RhdGU6ICdOWScsXG4gICAgICAgICAgICB6aXA6ICcxMDAwMS0wMDAxJyxcbiAgICAgICAgICAgIGNvdW50cnk6ICdVUycsXG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXNpZGVudGlhbDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgdmFsaWRhdGVkID0gYXdhaXQgc2hpcHBpbmdTZXJ2aWNlLnZhbGlkYXRlQWRkcmVzcyhhZGRyZXNzKTtcblxuICAgICAgZXhwZWN0KHZhbGlkYXRlZC52YWxpZCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0ZWQuc3RhbmRhcmRpemVkLmFkZHJlc3MpLnRvQmUoJzEyMyBNYWluIFN0Jyk7XG4gICAgICBleHBlY3QodmFsaWRhdGVkLnJlc2lkZW50aWFsKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc3VnZ2VzdCBjb3JyZWN0aW9ucyBmb3IgaW52YWxpZCBhZGRyZXNzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYWRkcmVzcyA9IHtcbiAgICAgICAgYWRkcmVzczogJzEyMyBNYWluIFN0cmVldCcsXG4gICAgICAgIGNpdHk6ICdOb3doZXJlJyxcbiAgICAgICAgc3RhdGU6ICdYWCcsXG4gICAgICAgIHppcDogJzAwMDAwJyxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tlZEF4aW9zLnBvc3QubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBhZGRyZXNzOiAnMTIzIE1haW4gU3QnLFxuICAgICAgICAgICAgICBjaXR5OiAnU3ByaW5nZmllbGQnLFxuICAgICAgICAgICAgICBzdGF0ZTogJ0lMJyxcbiAgICAgICAgICAgICAgemlwOiAnNjI3MDEnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHZhbGlkYXRlZCA9IGF3YWl0IHNoaXBwaW5nU2VydmljZS52YWxpZGF0ZUFkZHJlc3MoYWRkcmVzcyk7XG5cbiAgICAgIGV4cGVjdCh2YWxpZGF0ZWQudmFsaWQpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRlZC5zdWdnZXN0aW9ucy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NoaXBwaW5nIEluc3VyYW5jZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBpbnN1cmFuY2UgY29zdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRlY2xhcmVkVmFsdWUgPSAxMDAwLjAwO1xuXG4gICAgICBjb25zdCBpbnN1cmFuY2VDb3N0ID0gYXdhaXQgc2hpcHBpbmdTZXJ2aWNlLmNhbGN1bGF0ZUluc3VyYW5jZShcbiAgICAgICAgJ1VQUycsXG4gICAgICAgIGRlY2xhcmVkVmFsdWVcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChpbnN1cmFuY2VDb3N0KS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QoaW5zdXJhbmNlQ29zdCkudG9CZShkZWNsYXJlZFZhbHVlICogMC4wMSk7IC8vIDElIG9mIHZhbHVlXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBsYWJlbCB3aXRoIGluc3VyYW5jZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGxhYmVsUmVxdWVzdCA9IHtcbiAgICAgICAgY2FycmllcjogJ0ZlZEV4JyxcbiAgICAgICAgc2VydmljZTogJ0ZlZEV4IEdyb3VuZCcsXG4gICAgICAgIHNoaXBtZW50OiB7XG4gICAgICAgICAgb3JpZ2luOiB7IHppcDogJzEwMDAxJywgY291bnRyeTogJ1VTJyB9LFxuICAgICAgICAgIGRlc3RpbmF0aW9uOiB7IHppcDogJzkwMDAxJywgY291bnRyeTogJ1VTJyB9LFxuICAgICAgICAgIHBhY2thZ2VzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHdlaWdodDogNSxcbiAgICAgICAgICAgICAgZGVjbGFyZWRWYWx1ZTogNTAwLjAwLFxuICAgICAgICAgICAgICBpbnN1cmFuY2U6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBtb2NrZWRBeGlvcy5wb3N0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIHRyYWNraW5nTnVtYmVyOiAnRkRYNzg5NDU2MTIzJyxcbiAgICAgICAgICBpbnN1cmFuY2VDb3N0OiA1LjAwLFxuICAgICAgICAgIHRvdGFsQ29zdDogMTcuNTAsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgbGFiZWwgPSBhd2FpdCBzaGlwcGluZ1NlcnZpY2UuY3JlYXRlTGFiZWwobGFiZWxSZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KGxhYmVsLmluc3VyYW5jZUNvc3QpLnRvQmUoNS4wMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZXR1cm4gTGFiZWxzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY3JlYXRlIHJldHVybiBzaGlwcGluZyBsYWJlbCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJldHVyblJlcXVlc3QgPSB7XG4gICAgICAgIGNhcnJpZXI6ICdVUFMnLFxuICAgICAgICBvcmlnaW5hbFRyYWNraW5nOiAnMVo5OTlBQTEwMTIzNDU2Nzg0JyxcbiAgICAgICAgcmV0dXJuQWRkcmVzczoge1xuICAgICAgICAgIG5hbWU6ICdSZXR1cm5zIERlcGFydG1lbnQnLFxuICAgICAgICAgIGFkZHJlc3M6ICcxMjMgV2FyZWhvdXNlIFJkJyxcbiAgICAgICAgICBjaXR5OiAnTmV3IFlvcmsnLFxuICAgICAgICAgIHN0YXRlOiAnTlknLFxuICAgICAgICAgIHppcDogJzEwMDAxJyxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tlZEF4aW9zLnBvc3QubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgdHJhY2tpbmdOdW1iZXI6ICcxWjk5OUFBMTA5ODc2NTQzMjEnLFxuICAgICAgICAgIGxhYmVsVXJsOiAnaHR0cHM6Ly9sYWJlbHMudXBzLmNvbS9yZXR1cm4vbGFiZWwucGRmJyxcbiAgICAgICAgICBxckNvZGU6ICdodHRwczovL2xhYmVscy51cHMuY29tL3JldHVybi9xci5wbmcnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJldHVybkxhYmVsID0gYXdhaXQgc2hpcHBpbmdTZXJ2aWNlLmNyZWF0ZVJldHVybkxhYmVsKHJldHVyblJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmV0dXJuTGFiZWwuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXR1cm5MYWJlbC50cmFja2luZ051bWJlcikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXR1cm5MYWJlbC5xckNvZGUpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBwcmVwYWlkIHJldHVybiBsYWJlbCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJldHVyblJlcXVlc3QgPSB7XG4gICAgICAgIGNhcnJpZXI6ICdGZWRFeCcsXG4gICAgICAgIHNlcnZpY2U6ICdGZWRFeCBHcm91bmQnLFxuICAgICAgICBwcmVwYWlkOiB0cnVlLFxuICAgICAgICByZXR1cm5BZGRyZXNzOiB7XG4gICAgICAgICAgemlwOiAnMTAwMDEnLFxuICAgICAgICAgIGNvdW50cnk6ICdVUycsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBtb2NrZWRBeGlvcy5wb3N0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIHRyYWNraW5nTnVtYmVyOiAnRkRYOTg3NjU0MzIxJyxcbiAgICAgICAgICBwcmVwYWlkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGxhYmVsID0gYXdhaXQgc2hpcHBpbmdTZXJ2aWNlLmNyZWF0ZVJldHVybkxhYmVsKHJldHVyblJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QobGFiZWwucHJlcGFpZCkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0JhdGNoIE9wZXJhdGlvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgbXVsdGlwbGUgbGFiZWxzIGluIGJhdGNoJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYmF0Y2hSZXF1ZXN0ID0ge1xuICAgICAgICBjYXJyaWVyOiAnVVBTJyxcbiAgICAgICAgc2hpcG1lbnRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGVzdGluYXRpb246IHsgemlwOiAnOTAwMDEnLCBjb3VudHJ5OiAnVVMnIH0sXG4gICAgICAgICAgICBwYWNrYWdlczogW3sgd2VpZ2h0OiAyIH1dLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGVzdGluYXRpb246IHsgemlwOiAnNjA2MDEnLCBjb3VudHJ5OiAnVVMnIH0sXG4gICAgICAgICAgICBwYWNrYWdlczogW3sgd2VpZ2h0OiAzIH1dLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGVzdGluYXRpb246IHsgemlwOiAnNzUyMDEnLCBjb3VudHJ5OiAnVVMnIH0sXG4gICAgICAgICAgICBwYWNrYWdlczogW3sgd2VpZ2h0OiAxIH1dLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuXG4gICAgICBtb2NrZWRBeGlvcy5wb3N0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGxhYmVsczogW1xuICAgICAgICAgICAgeyB0cmFja2luZ051bWJlcjogJzFaMDAxJywgbGFiZWxVcmw6ICd1cmwxJyB9LFxuICAgICAgICAgICAgeyB0cmFja2luZ051bWJlcjogJzFaMDAyJywgbGFiZWxVcmw6ICd1cmwyJyB9LFxuICAgICAgICAgICAgeyB0cmFja2luZ051bWJlcjogJzFaMDAzJywgbGFiZWxVcmw6ICd1cmwzJyB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgYmF0Y2ggPSBhd2FpdCBzaGlwcGluZ1NlcnZpY2UuY3JlYXRlQmF0Y2hMYWJlbHMoYmF0Y2hSZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KGJhdGNoLmxhYmVscy5sZW5ndGgpLnRvQmUoMyk7XG4gICAgICBleHBlY3QoYmF0Y2guc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHBhcnRpYWwgYmF0Y2ggZmFpbHVyZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrZWRBeGlvcy5wb3N0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBsYWJlbHM6IFtcbiAgICAgICAgICAgIHsgdHJhY2tpbmdOdW1iZXI6ICcxWjAwMScsIHN1Y2Nlc3M6IHRydWUgfSxcbiAgICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnSW52YWxpZCBhZGRyZXNzJyB9LFxuICAgICAgICAgICAgeyB0cmFja2luZ051bWJlcjogJzFaMDAzJywgc3VjY2VzczogdHJ1ZSB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgYmF0Y2ggPSBhd2FpdCBzaGlwcGluZ1NlcnZpY2UuY3JlYXRlQmF0Y2hMYWJlbHMoe1xuICAgICAgICBjYXJyaWVyOiAnVVBTJyxcbiAgICAgICAgc2hpcG1lbnRzOiBbe30sIHt9LCB7fV0sXG4gICAgICB9IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHN1Y2Nlc3NDb3VudCA9IGJhdGNoLmxhYmVscy5maWx0ZXIoKGw6IGFueSkgPT4gbC5zdWNjZXNzKS5sZW5ndGg7XG4gICAgICBleHBlY3Qoc3VjY2Vzc0NvdW50KS50b0JlKDIpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9