{"file":"C:\\Adaptive_Testing\\tests\\integration\\external\\shipping-provider.integration.test.ts","mappings":"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","names":[],"sources":["C:\\Adaptive_Testing\\tests\\integration\\external\\shipping-provider.integration.test.ts"],"sourcesContent":["/**\n * Integration Tests: Shipping Provider API\n *\n * Testing integration with shipping carriers (UPS, FedEx, USPS, DHL)\n */\n\nimport axios from 'axios';\nimport { ShippingProviderService } from '../../../src/services/order-processing/services/shipping-provider.service';\nimport { BadRequestError, NotFoundError } from '../../../src/libs/errors';\n\njest.mock('axios');\nconst mockedAxios = axios as jest.Mocked<typeof axios>;\n\ndescribe('Shipping Provider Integration Tests', () => {\n  let shippingService: ShippingProviderService;\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n    shippingService = new ShippingProviderService({\n      upsApiKey: 'ups-test-key',\n      fedexApiKey: 'fedex-test-key',\n      uspsApiKey: 'usps-test-key',\n      dhlApiKey: 'dhl-test-key',\n    });\n  });\n\n  describe('Calculate Shipping Rates', () => {\n    it('should get shipping rates from UPS', async () => {\n      const shipment = {\n        origin: {\n          address: '123 Main St',\n          city: 'New York',\n          state: 'NY',\n          zip: '10001',\n          country: 'US',\n        },\n        destination: {\n          address: '456 Oak Ave',\n          city: 'Los Angeles',\n          state: 'CA',\n          zip: '90001',\n          country: 'US',\n        },\n        packages: [\n          {\n            weight: 5,\n            length: 10,\n            width: 8,\n            height: 6,\n            units: 'lb',\n          },\n        ],\n      };\n\n      mockedAxios.post.mockResolvedValue({\n        status: 200,\n        data: {\n          rates: [\n            {\n              service: 'UPS Ground',\n              cost: 12.50,\n              estimatedDays: 5,\n            },\n            {\n              service: 'UPS 2nd Day Air',\n              cost: 25.00,\n              estimatedDays: 2,\n            },\n            {\n              service: 'UPS Next Day Air',\n              cost: 45.00,\n              estimatedDays: 1,\n            },\n          ],\n        },\n      });\n\n      const rates = await shippingService.getRates('UPS', shipment);\n\n      expect(rates.length).toBe(3);\n      expect(rates[0].service).toBe('UPS Ground');\n      expect(rates[0].cost).toBe(12.50);\n    });\n\n    it('should get shipping rates from multiple carriers', async () => {\n      const shipment = {\n        origin: {\n          zip: '10001',\n          country: 'US',\n        },\n        destination: {\n          zip: '90001',\n          country: 'US',\n        },\n        packages: [\n          {\n            weight: 2,\n            length: 12,\n            width: 10,\n            height: 4,\n          },\n        ],\n      };\n\n      mockedAxios.post\n        .mockResolvedValueOnce({\n          status: 200,\n          data: { rates: [{ service: 'UPS Ground', cost: 8.50 }] },\n        })\n        .mockResolvedValueOnce({\n          status: 200,\n          data: { rates: [{ service: 'FedEx Ground', cost: 7.99 }] },\n        })\n        .mockResolvedValueOnce({\n          status: 200,\n          data: { rates: [{ service: 'USPS Priority', cost: 9.25 }] },\n        });\n\n      const allRates = await shippingService.compareRates(shipment);\n\n      expect(allRates.UPS.length).toBeGreaterThan(0);\n      expect(allRates.FedEx.length).toBeGreaterThan(0);\n      expect(allRates.USPS.length).toBeGreaterThan(0);\n    });\n\n    it('should find cheapest shipping option', async () => {\n      const shipment = {\n        origin: { zip: '10001', country: 'US' },\n        destination: { zip: '90001', country: 'US' },\n        packages: [{ weight: 3 }],\n      };\n\n      mockedAxios.post\n        .mockResolvedValueOnce({\n          status: 200,\n          data: { rates: [{ service: 'UPS Ground', cost: 10.00 }] },\n        })\n        .mockResolvedValueOnce({\n          status: 200,\n          data: { rates: [{ service: 'FedEx Ground', cost: 8.50 }] },\n        })\n        .mockResolvedValueOnce({\n          status: 200,\n          data: { rates: [{ service: 'USPS Priority', cost: 12.00 }] },\n        });\n\n      const cheapest = await shippingService.getCheapestRate(shipment);\n\n      expect(cheapest.carrier).toBe('FedEx');\n      expect(cheapest.cost).toBe(8.50);\n    });\n  });\n\n  describe('Create Shipping Labels', () => {\n    it('should create shipping label with UPS', async () => {\n      const labelRequest = {\n        carrier: 'UPS',\n        service: 'UPS Ground',\n        shipment: {\n          origin: {\n            name: 'Warehouse A',\n            address: '123 Main St',\n            city: 'New York',\n            state: 'NY',\n            zip: '10001',\n            country: 'US',\n          },\n          destination: {\n            name: 'John Doe',\n            address: '456 Oak Ave',\n            city: 'Los Angeles',\n            state: 'CA',\n            zip: '90001',\n            country: 'US',\n          },\n          packages: [\n            {\n              weight: 5,\n              length: 10,\n              width: 8,\n              height: 6,\n            },\n          ],\n        },\n      };\n\n      mockedAxios.post.mockResolvedValue({\n        status: 200,\n        data: {\n          success: true,\n          trackingNumber: '1Z999AA10123456784',\n          labelUrl: 'https://labels.ups.com/label/1Z999AA10123456784.pdf',\n          cost: 12.50,\n          carrier: 'UPS',\n        },\n      });\n\n      const label = await shippingService.createLabel(labelRequest);\n\n      expect(label.success).toBe(true);\n      expect(label.trackingNumber).toBe('1Z999AA10123456784');\n      expect(label.labelUrl).toBeDefined();\n    });\n\n    it('should create label with customer reference', async () => {\n      const labelRequest = {\n        carrier: 'FedEx',\n        service: 'FedEx Ground',\n        shipment: {\n          origin: { zip: '10001', country: 'US' },\n          destination: { zip: '90001', country: 'US' },\n          packages: [{ weight: 3 }],\n        },\n        reference: 'ORDER-12345',\n      };\n\n      mockedAxios.post.mockResolvedValue({\n        status: 200,\n        data: {\n          success: true,\n          trackingNumber: '773123456789',\n          labelUrl: 'https://labels.fedex.com/label/773123456789.pdf',\n          reference: 'ORDER-12345',\n        },\n      });\n\n      const label = await shippingService.createLabel(labelRequest);\n\n      expect(label.reference).toBe('ORDER-12345');\n    });\n\n    it('should handle address validation errors', async () => {\n      const labelRequest = {\n        carrier: 'UPS',\n        service: 'UPS Ground',\n        shipment: {\n          origin: { zip: '10001', country: 'US' },\n          destination: { address: 'Invalid Address', zip: '00000', country: 'US' },\n          packages: [{ weight: 2 }],\n        },\n      };\n\n      mockedAxios.post.mockRejectedValue({\n        response: {\n          status: 400,\n          data: {\n            error: 'invalid_address',\n            message: 'Destination address could not be validated',\n          },\n        },\n      });\n\n      await expect(shippingService.createLabel(labelRequest)).rejects.toThrow(\n        BadRequestError\n      );\n    });\n  });\n\n  describe('Track Shipments', () => {\n    it('should track UPS shipment', async () => {\n      const trackingNumber = '1Z999AA10123456784';\n\n      mockedAxios.get.mockResolvedValue({\n        status: 200,\n        data: {\n          trackingNumber,\n          carrier: 'UPS',\n          status: 'in_transit',\n          estimatedDelivery: '2024-01-20',\n          events: [\n            {\n              timestamp: '2024-01-15T08:00:00Z',\n              location: 'New York, NY',\n              status: 'picked_up',\n              description: 'Package picked up',\n            },\n            {\n              timestamp: '2024-01-16T14:30:00Z',\n              location: 'Chicago, IL',\n              status: 'in_transit',\n              description: 'In transit',\n            },\n          ],\n        },\n      });\n\n      const tracking = await shippingService.trackShipment(trackingNumber);\n\n      expect(tracking.trackingNumber).toBe(trackingNumber);\n      expect(tracking.status).toBe('in_transit');\n      expect(tracking.events.length).toBe(2);\n    });\n\n    it('should track FedEx shipment with detailed events', async () => {\n      const trackingNumber = '773123456789';\n\n      mockedAxios.get.mockResolvedValue({\n        status: 200,\n        data: {\n          trackingNumber,\n          carrier: 'FedEx',\n          status: 'delivered',\n          deliveredAt: '2024-01-18T16:45:00Z',\n          signedBy: 'J. DOE',\n          events: [\n            {\n              timestamp: '2024-01-15T10:00:00Z',\n              status: 'picked_up',\n            },\n            {\n              timestamp: '2024-01-18T16:45:00Z',\n              status: 'delivered',\n              signedBy: 'J. DOE',\n            },\n          ],\n        },\n      });\n\n      const tracking = await shippingService.trackShipment(trackingNumber);\n\n      expect(tracking.status).toBe('delivered');\n      expect(tracking.signedBy).toBe('J. DOE');\n    });\n\n    it('should handle invalid tracking number', async () => {\n      mockedAxios.get.mockRejectedValue({\n        response: {\n          status: 404,\n          data: {\n            error: 'tracking_not_found',\n          },\n        },\n      });\n\n      await expect(\n        shippingService.trackShipment('INVALID123')\n      ).rejects.toThrow(NotFoundError);\n    });\n  });\n\n  describe('International Shipping', () => {\n    it('should calculate customs duties', async () => {\n      const shipment = {\n        origin: { country: 'US', zip: '10001' },\n        destination: { country: 'GB', zip: 'SW1A 1AA' },\n        packages: [\n          {\n            weight: 10,\n            declaredValue: 500.00,\n            contents: [\n              {\n                description: 'Electronics',\n                quantity: 2,\n                value: 250.00,\n                hsCode: '8471.30',\n              },\n            ],\n          },\n        ],\n      };\n\n      mockedAxios.post.mockResolvedValue({\n        status: 200,\n        data: {\n          duties: 45.00,\n          taxes: 100.00,\n          totalCustoms: 145.00,\n          currency: 'GBP',\n        },\n      });\n\n      const customs = await shippingService.calculateCustoms(shipment);\n\n      expect(customs.totalCustoms).toBe(145.00);\n      expect(customs.currency).toBe('GBP');\n    });\n\n    it('should create international shipping label with customs forms', async () => {\n      const labelRequest = {\n        carrier: 'DHL',\n        service: 'DHL Express',\n        shipment: {\n          origin: { country: 'US' },\n          destination: { country: 'DE' },\n          packages: [\n            {\n              weight: 5,\n              declaredValue: 300.00,\n              contents: [\n                {\n                  description: 'Books',\n                  quantity: 3,\n                  value: 100.00,\n                },\n              ],\n            },\n          ],\n        },\n      };\n\n      mockedAxios.post.mockResolvedValue({\n        status: 200,\n        data: {\n          success: true,\n          trackingNumber: 'DHL123456789',\n          labelUrl: 'https://labels.dhl.com/label.pdf',\n          customsFormUrl: 'https://labels.dhl.com/customs.pdf',\n        },\n      });\n\n      const label = await shippingService.createLabel(labelRequest);\n\n      expect(label.customsFormUrl).toBeDefined();\n    });\n\n    it('should validate prohibited items for international shipping', async () => {\n      const shipment = {\n        origin: { country: 'US' },\n        destination: { country: 'AU' },\n        packages: [\n          {\n            contents: [\n              {\n                description: 'Batteries', // Restricted item\n                quantity: 10,\n              },\n            ],\n          },\n        ],\n      };\n\n      mockedAxios.post.mockRejectedValue({\n        response: {\n          status: 400,\n          data: {\n            error: 'prohibited_item',\n            message: 'Batteries are restricted for shipping to Australia',\n          },\n        },\n      });\n\n      await expect(\n        shippingService.validateInternationalShipment(shipment)\n      ).rejects.toThrow(BadRequestError);\n    });\n  });\n\n  describe('Pickup Scheduling', () => {\n    it('should schedule package pickup', async () => {\n      const pickupRequest = {\n        carrier: 'UPS',\n        date: '2024-01-20',\n        timeWindow: {\n          start: '09:00',\n          end: '17:00',\n        },\n        location: {\n          name: 'Warehouse A',\n          address: '123 Main St',\n          city: 'New York',\n          state: 'NY',\n          zip: '10001',\n        },\n        packages: 3,\n        totalWeight: 25,\n      };\n\n      mockedAxios.post.mockResolvedValue({\n        status: 200,\n        data: {\n          success: true,\n          confirmationNumber: 'PKP123456',\n          scheduledDate: '2024-01-20',\n          estimatedTime: '10:00-12:00',\n        },\n      });\n\n      const pickup = await shippingService.schedulePickup(pickupRequest);\n\n      expect(pickup.success).toBe(true);\n      expect(pickup.confirmationNumber).toBe('PKP123456');\n    });\n\n    it('should cancel scheduled pickup', async () => {\n      mockedAxios.delete.mockResolvedValue({\n        status: 200,\n        data: {\n          success: true,\n          message: 'Pickup cancelled',\n        },\n      });\n\n      const result = await shippingService.cancelPickup('PKP123456');\n\n      expect(result.success).toBe(true);\n    });\n  });\n\n  describe('Address Validation', () => {\n    it('should validate and standardize address', async () => {\n      const address = {\n        address: '123 main st',\n        city: 'new york',\n        state: 'ny',\n        zip: '10001',\n        country: 'US',\n      };\n\n      mockedAxios.post.mockResolvedValue({\n        status: 200,\n        data: {\n          valid: true,\n          standardized: {\n            address: '123 Main St',\n            city: 'New York',\n            state: 'NY',\n            zip: '10001-0001',\n            country: 'US',\n          },\n          residential: false,\n        },\n      });\n\n      const validated = await shippingService.validateAddress(address);\n\n      expect(validated.valid).toBe(true);\n      expect(validated.standardized.address).toBe('123 Main St');\n      expect(validated.residential).toBe(false);\n    });\n\n    it('should suggest corrections for invalid address', async () => {\n      const address = {\n        address: '123 Main Street',\n        city: 'Nowhere',\n        state: 'XX',\n        zip: '00000',\n      };\n\n      mockedAxios.post.mockResolvedValue({\n        status: 200,\n        data: {\n          valid: false,\n          suggestions: [\n            {\n              address: '123 Main St',\n              city: 'Springfield',\n              state: 'IL',\n              zip: '62701',\n            },\n          ],\n        },\n      });\n\n      const validated = await shippingService.validateAddress(address);\n\n      expect(validated.valid).toBe(false);\n      expect(validated.suggestions.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Shipping Insurance', () => {\n    it('should calculate insurance cost', async () => {\n      const declaredValue = 1000.00;\n\n      const insuranceCost = await shippingService.calculateInsurance(\n        'UPS',\n        declaredValue\n      );\n\n      expect(insuranceCost).toBeGreaterThan(0);\n      expect(insuranceCost).toBe(declaredValue * 0.01); // 1% of value\n    });\n\n    it('should create label with insurance', async () => {\n      const labelRequest = {\n        carrier: 'FedEx',\n        service: 'FedEx Ground',\n        shipment: {\n          origin: { zip: '10001', country: 'US' },\n          destination: { zip: '90001', country: 'US' },\n          packages: [\n            {\n              weight: 5,\n              declaredValue: 500.00,\n              insurance: true,\n            },\n          ],\n        },\n      };\n\n      mockedAxios.post.mockResolvedValue({\n        status: 200,\n        data: {\n          success: true,\n          trackingNumber: 'FDX789456123',\n          insuranceCost: 5.00,\n          totalCost: 17.50,\n        },\n      });\n\n      const label = await shippingService.createLabel(labelRequest);\n\n      expect(label.insuranceCost).toBe(5.00);\n    });\n  });\n\n  describe('Return Labels', () => {\n    it('should create return shipping label', async () => {\n      const returnRequest = {\n        carrier: 'UPS',\n        originalTracking: '1Z999AA10123456784',\n        returnAddress: {\n          name: 'Returns Department',\n          address: '123 Warehouse Rd',\n          city: 'New York',\n          state: 'NY',\n          zip: '10001',\n        },\n      };\n\n      mockedAxios.post.mockResolvedValue({\n        status: 200,\n        data: {\n          success: true,\n          trackingNumber: '1Z999AA10987654321',\n          labelUrl: 'https://labels.ups.com/return/label.pdf',\n          qrCode: 'https://labels.ups.com/return/qr.png',\n        },\n      });\n\n      const returnLabel = await shippingService.createReturnLabel(returnRequest);\n\n      expect(returnLabel.success).toBe(true);\n      expect(returnLabel.trackingNumber).toBeDefined();\n      expect(returnLabel.qrCode).toBeDefined();\n    });\n\n    it('should create prepaid return label', async () => {\n      const returnRequest = {\n        carrier: 'FedEx',\n        service: 'FedEx Ground',\n        prepaid: true,\n        returnAddress: {\n          zip: '10001',\n          country: 'US',\n        },\n      };\n\n      mockedAxios.post.mockResolvedValue({\n        status: 200,\n        data: {\n          success: true,\n          trackingNumber: 'FDX987654321',\n          prepaid: true,\n        },\n      });\n\n      const label = await shippingService.createReturnLabel(returnRequest);\n\n      expect(label.prepaid).toBe(true);\n    });\n  });\n\n  describe('Batch Operations', () => {\n    it('should create multiple labels in batch', async () => {\n      const batchRequest = {\n        carrier: 'UPS',\n        shipments: [\n          {\n            destination: { zip: '90001', country: 'US' },\n            packages: [{ weight: 2 }],\n          },\n          {\n            destination: { zip: '60601', country: 'US' },\n            packages: [{ weight: 3 }],\n          },\n          {\n            destination: { zip: '75201', country: 'US' },\n            packages: [{ weight: 1 }],\n          },\n        ],\n      };\n\n      mockedAxios.post.mockResolvedValue({\n        status: 200,\n        data: {\n          success: true,\n          labels: [\n            { trackingNumber: '1Z001', labelUrl: 'url1' },\n            { trackingNumber: '1Z002', labelUrl: 'url2' },\n            { trackingNumber: '1Z003', labelUrl: 'url3' },\n          ],\n        },\n      });\n\n      const batch = await shippingService.createBatchLabels(batchRequest);\n\n      expect(batch.labels.length).toBe(3);\n      expect(batch.success).toBe(true);\n    });\n\n    it('should handle partial batch failures', async () => {\n      mockedAxios.post.mockResolvedValue({\n        status: 200,\n        data: {\n          success: false,\n          labels: [\n            { trackingNumber: '1Z001', success: true },\n            { success: false, error: 'Invalid address' },\n            { trackingNumber: '1Z003', success: true },\n          ],\n        },\n      });\n\n      const batch = await shippingService.createBatchLabels({\n        carrier: 'UPS',\n        shipments: [{}, {}, {}],\n      } as any);\n\n      const successCount = batch.labels.filter((l: any) => l.success).length;\n      expect(successCount).toBe(2);\n    });\n  });\n});\n"],"version":3}