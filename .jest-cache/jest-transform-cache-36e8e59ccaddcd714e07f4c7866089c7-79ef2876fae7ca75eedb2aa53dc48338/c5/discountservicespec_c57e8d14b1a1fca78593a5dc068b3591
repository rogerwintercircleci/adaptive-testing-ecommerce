b93f8f36f5fca7b073a5093a5a5e2499
"use strict";
/**
 * TDD: Discount/Coupon Service Tests
 *
 * Testing comprehensive discount and coupon functionality
 */
Object.defineProperty(exports, "__esModule", { value: true });
const discount_service_1 = require("./discount.service");
const errors_1 = require("@libs/errors");
describe('DiscountService', () => {
    let discountService;
    let mockDiscountRepository;
    beforeEach(() => {
        mockDiscountRepository = {
            create: jest.fn(),
            findById: jest.fn(),
            findByCode: jest.fn(),
            update: jest.fn(),
            delete: jest.fn(),
            findActive: jest.fn(),
            incrementUsageCount: jest.fn(),
            findByUserId: jest.fn(),
        };
        discountService = new discount_service_1.DiscountService(mockDiscountRepository);
    });
    describe('createDiscount', () => {
        it('should create a percentage discount code', async () => {
            const discountDto = {
                code: 'SAVE20',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                description: '20% off',
                expiresAt: new Date('2025-12-31'),
            };
            const mockDiscount = {
                id: '1',
                ...discountDto,
                usageCount: 0,
                isActive: true,
                createdAt: new Date(),
            };
            mockDiscountRepository.create.mockResolvedValue(mockDiscount);
            const result = await discountService.createDiscount(discountDto);
            expect(result).toEqual(mockDiscount);
            expect(mockDiscountRepository.create).toHaveBeenCalledWith(expect.objectContaining({
                code: 'SAVE20',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
            }));
        });
        it('should create a fixed amount discount code', async () => {
            const discountDto = {
                code: 'SAVE10',
                type: discount_service_1.DiscountType.FIXED_AMOUNT,
                value: 10,
                description: '$10 off',
            };
            const mockDiscount = { id: '1', ...discountDto, usageCount: 0, isActive: true };
            mockDiscountRepository.create.mockResolvedValue(mockDiscount);
            const result = await discountService.createDiscount(discountDto);
            expect(result.type).toBe(discount_service_1.DiscountType.FIXED_AMOUNT);
            expect(result.value).toBe(10);
        });
        it('should create a free shipping discount', async () => {
            const discountDto = {
                code: 'FREESHIP',
                type: discount_service_1.DiscountType.FREE_SHIPPING,
                value: 0,
                description: 'Free shipping',
            };
            const mockDiscount = { id: '1', ...discountDto, usageCount: 0, isActive: true };
            mockDiscountRepository.create.mockResolvedValue(mockDiscount);
            const result = await discountService.createDiscount(discountDto);
            expect(result.type).toBe(discount_service_1.DiscountType.FREE_SHIPPING);
        });
        it('should reject percentage discount over 100%', async () => {
            const discountDto = {
                code: 'INVALID',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 150,
                description: 'Invalid discount',
            };
            await expect(discountService.createDiscount(discountDto)).rejects.toThrow(errors_1.BadRequestError);
            await expect(discountService.createDiscount(discountDto)).rejects.toThrow('Percentage discount cannot exceed 100%');
        });
        it('should reject negative discount values', async () => {
            const discountDto = {
                code: 'INVALID',
                type: discount_service_1.DiscountType.FIXED_AMOUNT,
                value: -10,
                description: 'Invalid discount',
            };
            await expect(discountService.createDiscount(discountDto)).rejects.toThrow(errors_1.BadRequestError);
        });
        it('should create discount with minimum purchase requirement', async () => {
            const discountDto = {
                code: 'MIN50',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 15,
                description: '15% off orders over $50',
                minPurchaseAmount: 50,
            };
            const mockDiscount = { id: '1', ...discountDto, usageCount: 0, isActive: true };
            mockDiscountRepository.create.mockResolvedValue(mockDiscount);
            const result = await discountService.createDiscount(discountDto);
            expect(result.minPurchaseAmount).toBe(50);
        });
        it('should create discount with maximum discount cap', async () => {
            const discountDto = {
                code: 'SAVE20MAX10',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                description: '20% off (max $10)',
                maxDiscountAmount: 10,
            };
            const mockDiscount = { id: '1', ...discountDto, usageCount: 0, isActive: true };
            mockDiscountRepository.create.mockResolvedValue(mockDiscount);
            const result = await discountService.createDiscount(discountDto);
            expect(result.maxDiscountAmount).toBe(10);
        });
        it('should create discount with usage limit', async () => {
            const discountDto = {
                code: 'LIMITED100',
                type: discount_service_1.DiscountType.FIXED_AMOUNT,
                value: 5,
                description: 'Limited to 100 uses',
                maxUsageCount: 100,
            };
            const mockDiscount = { id: '1', ...discountDto, usageCount: 0, isActive: true };
            mockDiscountRepository.create.mockResolvedValue(mockDiscount);
            const result = await discountService.createDiscount(discountDto);
            expect(result.maxUsageCount).toBe(100);
        });
        it('should create discount with per-user limit', async () => {
            const discountDto = {
                code: 'ONCE',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 10,
                description: 'One time use per customer',
                maxUsagePerUser: 1,
            };
            const mockDiscount = { id: '1', ...discountDto, usageCount: 0, isActive: true };
            mockDiscountRepository.create.mockResolvedValue(mockDiscount);
            const result = await discountService.createDiscount(discountDto);
            expect(result.maxUsagePerUser).toBe(1);
        });
        it('should normalize discount code to uppercase', async () => {
            const discountDto = {
                code: 'save20',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                description: '20% off',
            };
            const mockDiscount = { id: '1', ...discountDto, code: 'SAVE20', usageCount: 0, isActive: true };
            mockDiscountRepository.create.mockResolvedValue(mockDiscount);
            const result = await discountService.createDiscount(discountDto);
            expect(result.code).toBe('SAVE20');
        });
    });
    describe('validateDiscount', () => {
        it('should validate an active discount code', async () => {
            const mockDiscount = {
                id: '1',
                code: 'VALID',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                isActive: true,
                usageCount: 5,
                expiresAt: new Date('2025-12-31'),
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const result = await discountService.validateDiscount('VALID');
            expect(result.isValid).toBe(true);
            expect(result.discount).toEqual(mockDiscount);
        });
        it('should reject non-existent discount code', async () => {
            mockDiscountRepository.findByCode.mockResolvedValue(null);
            const result = await discountService.validateDiscount('INVALID');
            expect(result.isValid).toBe(false);
            expect(result.reason).toBe('Discount code not found');
        });
        it('should reject inactive discount code', async () => {
            const mockDiscount = {
                id: '1',
                code: 'INACTIVE',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                isActive: false,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const result = await discountService.validateDiscount('INACTIVE');
            expect(result.isValid).toBe(false);
            expect(result.reason).toBe('Discount code is not active');
        });
        it('should reject expired discount code', async () => {
            const mockDiscount = {
                id: '1',
                code: 'EXPIRED',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                isActive: true,
                expiresAt: new Date('2020-01-01'),
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const result = await discountService.validateDiscount('EXPIRED');
            expect(result.isValid).toBe(false);
            expect(result.reason).toBe('Discount code has expired');
        });
        it('should reject discount that has not started yet', async () => {
            const mockDiscount = {
                id: '1',
                code: 'FUTURE',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                isActive: true,
                startsAt: new Date('2030-01-01'),
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const result = await discountService.validateDiscount('FUTURE');
            expect(result.isValid).toBe(false);
            expect(result.reason).toBe('Discount code is not yet active');
        });
        it('should reject discount that reached max usage limit', async () => {
            const mockDiscount = {
                id: '1',
                code: 'MAXED',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                isActive: true,
                usageCount: 100,
                maxUsageCount: 100,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const result = await discountService.validateDiscount('MAXED');
            expect(result.isValid).toBe(false);
            expect(result.reason).toBe('Discount code has reached maximum usage limit');
        });
    });
    describe('applyDiscount', () => {
        it('should apply percentage discount to order', async () => {
            const mockDiscount = {
                id: '1',
                code: 'SAVE20',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                isActive: true,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const applyDto = {
                code: 'SAVE20',
                orderSubtotal: 100,
                userId: 'user123',
            };
            const result = await discountService.applyDiscount(applyDto);
            expect(result.discountAmount).toBe(20);
            expect(result.finalAmount).toBe(80);
        });
        it('should apply fixed amount discount to order', async () => {
            const mockDiscount = {
                id: '1',
                code: 'SAVE10',
                type: discount_service_1.DiscountType.FIXED_AMOUNT,
                value: 10,
                isActive: true,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const applyDto = {
                code: 'SAVE10',
                orderSubtotal: 50,
                userId: 'user123',
            };
            const result = await discountService.applyDiscount(applyDto);
            expect(result.discountAmount).toBe(10);
            expect(result.finalAmount).toBe(40);
        });
        it('should apply free shipping discount', async () => {
            const mockDiscount = {
                id: '1',
                code: 'FREESHIP',
                type: discount_service_1.DiscountType.FREE_SHIPPING,
                value: 0,
                isActive: true,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const applyDto = {
                code: 'FREESHIP',
                orderSubtotal: 100,
                shippingCost: 10,
                userId: 'user123',
            };
            const result = await discountService.applyDiscount(applyDto);
            expect(result.freeShipping).toBe(true);
            expect(result.shippingDiscount).toBe(10);
        });
        it('should cap percentage discount at maximum amount', async () => {
            const mockDiscount = {
                id: '1',
                code: 'SAVE20MAX10',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                maxDiscountAmount: 10,
                isActive: true,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const applyDto = {
                code: 'SAVE20MAX10',
                orderSubtotal: 100, // 20% would be $20, but capped at $10
                userId: 'user123',
            };
            const result = await discountService.applyDiscount(applyDto);
            expect(result.discountAmount).toBe(10);
            expect(result.finalAmount).toBe(90);
        });
        it('should reject discount if order does not meet minimum purchase', async () => {
            const mockDiscount = {
                id: '1',
                code: 'MIN50',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 15,
                minPurchaseAmount: 50,
                isActive: true,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const applyDto = {
                code: 'MIN50',
                orderSubtotal: 30,
                userId: 'user123',
            };
            await expect(discountService.applyDiscount(applyDto)).rejects.toThrow(errors_1.BadRequestError);
            await expect(discountService.applyDiscount(applyDto)).rejects.toThrow('minimum purchase amount');
        });
        it('should not allow discount to exceed order subtotal', async () => {
            const mockDiscount = {
                id: '1',
                code: 'SAVE50',
                type: discount_service_1.DiscountType.FIXED_AMOUNT,
                value: 50,
                isActive: true,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const applyDto = {
                code: 'SAVE50',
                orderSubtotal: 30,
                userId: 'user123',
            };
            const result = await discountService.applyDiscount(applyDto);
            expect(result.discountAmount).toBe(30); // Capped at subtotal
            expect(result.finalAmount).toBe(0);
        });
        it('should increment usage count when discount is applied', async () => {
            const mockDiscount = {
                id: '1',
                code: 'SAVE20',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                isActive: true,
                usageCount: 5,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            mockDiscountRepository.incrementUsageCount.mockResolvedValue(undefined);
            const applyDto = {
                code: 'SAVE20',
                orderSubtotal: 100,
                userId: 'user123',
            };
            await discountService.applyDiscount(applyDto);
            expect(mockDiscountRepository.incrementUsageCount).toHaveBeenCalledWith('1', 'user123');
        });
        it('should reject discount if user has exceeded per-user limit', async () => {
            const mockDiscount = {
                id: '1',
                code: 'ONCE',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 10,
                maxUsagePerUser: 1,
                isActive: true,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            mockDiscountRepository.findByUserId.mockResolvedValue([
                { discountId: '1', userId: 'user123', usedAt: new Date() },
            ]);
            const applyDto = {
                code: 'ONCE',
                orderSubtotal: 100,
                userId: 'user123',
            };
            await expect(discountService.applyDiscount(applyDto)).rejects.toThrow(errors_1.BadRequestError);
            await expect(discountService.applyDiscount(applyDto)).rejects.toThrow('already used this discount');
        });
    });
    describe('getActiveDiscounts', () => {
        it('should return all active discounts', async () => {
            const mockDiscounts = [
                { id: '1', code: 'SAVE20', isActive: true, type: discount_service_1.DiscountType.PERCENTAGE, value: 20 },
                { id: '2', code: 'SAVE10', isActive: true, type: discount_service_1.DiscountType.FIXED_AMOUNT, value: 10 },
            ];
            mockDiscountRepository.findActive.mockResolvedValue(mockDiscounts);
            const result = await discountService.getActiveDiscounts();
            expect(result).toHaveLength(2);
            expect(result[0].code).toBe('SAVE20');
        });
    });
    describe('deactivateDiscount', () => {
        it('should deactivate a discount code', async () => {
            const mockDiscount = {
                id: '1',
                code: 'SAVE20',
                isActive: true,
            };
            mockDiscountRepository.findById.mockResolvedValue(mockDiscount);
            mockDiscountRepository.update.mockResolvedValue({ ...mockDiscount, isActive: false });
            const result = await discountService.deactivateDiscount('1');
            expect(result.isActive).toBe(false);
            expect(mockDiscountRepository.update).toHaveBeenCalledWith('1', { isActive: false });
        });
    });
    describe('getDiscountUsageStats', () => {
        it('should return usage statistics for a discount', async () => {
            const mockDiscount = {
                id: '1',
                code: 'SAVE20',
                usageCount: 150,
                maxUsageCount: 200,
            };
            mockDiscountRepository.findById.mockResolvedValue(mockDiscount);
            const result = await discountService.getDiscountUsageStats('1');
            expect(result.totalUsage).toBe(150);
            expect(result.remainingUsage).toBe(50);
            expect(result.usagePercentage).toBe(75);
        });
    });
    describe('calculateSavings', () => {
        it('should calculate total savings from discount', async () => {
            const mockDiscount = {
                id: '1',
                code: 'SAVE20',
                type: discount_service_1.DiscountType.PERCENTAGE,
                value: 20,
                isActive: true,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const savings = await discountService.calculateSavings('SAVE20', 100);
            expect(savings).toBe(20);
        });
        it('should calculate savings for fixed amount discount', async () => {
            const mockDiscount = {
                id: '1',
                code: 'SAVE15',
                type: discount_service_1.DiscountType.FIXED_AMOUNT,
                value: 15,
                isActive: true,
            };
            mockDiscountRepository.findByCode.mockResolvedValue(mockDiscount);
            const savings = await discountService.calculateSavings('SAVE15', 100);
            expect(savings).toBe(15);
        });
    });
    describe('deleteDiscount', () => {
        it('should delete a discount code', async () => {
            mockDiscountRepository.delete.mockResolvedValue(undefined);
            await discountService.deleteDiscount('1');
            expect(mockDiscountRepository.delete).toHaveBeenCalledWith('1');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXEFkYXB0aXZlX1Rlc3RpbmdcXHNyY1xcc2VydmljZXNcXHByb21vdGlvbnNcXHNlcnZpY2VzXFxkaXNjb3VudC5zZXJ2aWNlLnNwZWMudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7O0dBSUc7O0FBRUgseURBQXdHO0FBRXhHLHlDQUErQztBQUUvQyxRQUFRLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFO0lBQy9CLElBQUksZUFBZ0MsQ0FBQztJQUNyQyxJQUFJLHNCQUF1RCxDQUFDO0lBRTVELFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxzQkFBc0IsR0FBRztZQUN2QixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNqQixRQUFRLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNuQixVQUFVLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNyQixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNqQixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNqQixVQUFVLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNyQixtQkFBbUIsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQzlCLFlBQVksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1NBQ2pCLENBQUM7UUFFVCxlQUFlLEdBQUcsSUFBSSxrQ0FBZSxDQUFDLHNCQUFzQixDQUFDLENBQUM7SUFDaEUsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO1FBQzlCLEVBQUUsQ0FBQywwQ0FBMEMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUN4RCxNQUFNLFdBQVcsR0FBc0I7Z0JBQ3JDLElBQUksRUFBRSxRQUFRO2dCQUNkLElBQUksRUFBRSwrQkFBWSxDQUFDLFVBQVU7Z0JBQzdCLEtBQUssRUFBRSxFQUFFO2dCQUNULFdBQVcsRUFBRSxTQUFTO2dCQUN0QixTQUFTLEVBQUUsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDO2FBQ2xDLENBQUM7WUFFRixN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QixDQUFDLE1BQU0sQ0FBQyxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2xFLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcQWRhcHRpdmVfVGVzdGluZ1xcc3JjXFxzZXJ2aWNlc1xccHJvbW90aW9uc1xcc2VydmljZXNcXGRpc2NvdW50LnNlcnZpY2Uuc3BlYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRERDogRGlzY291bnQvQ291cG9uIFNlcnZpY2UgVGVzdHNcbiAqXG4gKiBUZXN0aW5nIGNvbXByZWhlbnNpdmUgZGlzY291bnQgYW5kIGNvdXBvbiBmdW5jdGlvbmFsaXR5XG4gKi9cblxuaW1wb3J0IHsgRGlzY291bnRTZXJ2aWNlLCBDcmVhdGVEaXNjb3VudER0bywgRGlzY291bnRUeXBlLCBBcHBseURpc2NvdW50RHRvIH0gZnJvbSAnLi9kaXNjb3VudC5zZXJ2aWNlJztcbmltcG9ydCB7IERpc2NvdW50UmVwb3NpdG9yeSB9IGZyb20gJy4uL3JlcG9zaXRvcmllcy9kaXNjb3VudC5yZXBvc2l0b3J5JztcbmltcG9ydCB7IEJhZFJlcXVlc3RFcnJvciB9IGZyb20gJ0BsaWJzL2Vycm9ycyc7XG5cbmRlc2NyaWJlKCdEaXNjb3VudFNlcnZpY2UnLCAoKSA9PiB7XG4gIGxldCBkaXNjb3VudFNlcnZpY2U6IERpc2NvdW50U2VydmljZTtcbiAgbGV0IG1vY2tEaXNjb3VudFJlcG9zaXRvcnk6IGplc3QuTW9ja2VkPERpc2NvdW50UmVwb3NpdG9yeT47XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgbW9ja0Rpc2NvdW50UmVwb3NpdG9yeSA9IHtcbiAgICAgIGNyZWF0ZTogamVzdC5mbigpLFxuICAgICAgZmluZEJ5SWQ6IGplc3QuZm4oKSxcbiAgICAgIGZpbmRCeUNvZGU6IGplc3QuZm4oKSxcbiAgICAgIHVwZGF0ZTogamVzdC5mbigpLFxuICAgICAgZGVsZXRlOiBqZXN0LmZuKCksXG4gICAgICBmaW5kQWN0aXZlOiBqZXN0LmZuKCksXG4gICAgICBpbmNyZW1lbnRVc2FnZUNvdW50OiBqZXN0LmZuKCksXG4gICAgICBmaW5kQnlVc2VySWQ6IGplc3QuZm4oKSxcbiAgICB9IGFzIGFueTtcblxuICAgIGRpc2NvdW50U2VydmljZSA9IG5ldyBEaXNjb3VudFNlcnZpY2UobW9ja0Rpc2NvdW50UmVwb3NpdG9yeSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjcmVhdGVEaXNjb3VudCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBhIHBlcmNlbnRhZ2UgZGlzY291bnQgY29kZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRpc2NvdW50RHRvOiBDcmVhdGVEaXNjb3VudER0byA9IHtcbiAgICAgICAgY29kZTogJ1NBVkUyMCcsXG4gICAgICAgIHR5cGU6IERpc2NvdW50VHlwZS5QRVJDRU5UQUdFLFxuICAgICAgICB2YWx1ZTogMjAsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnMjAlIG9mZicsXG4gICAgICAgIGV4cGlyZXNBdDogbmV3IERhdGUoJzIwMjUtMTItMzEnKSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tEaXNjb3VudCA9IHtcbiAgICAgICAgaWQ6ICcxJyxcbiAgICAgICAgLi4uZGlzY291bnREdG8sXG4gICAgICAgIHVzYWdlQ291bnQ6IDAsXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB9O1xuXG4gICAgICBtb2NrRGlzY291bnRSZXBvc2l0b3J5LmNyZWF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnQgYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGlzY291bnRTZXJ2aWNlLmNyZWF0ZURpc2NvdW50KGRpc2NvdW50RHRvKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrRGlzY291bnQpO1xuICAgICAgZXhwZWN0KG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGNvZGU6ICdTQVZFMjAnLFxuICAgICAgICAgIHR5cGU6IERpc2NvdW50VHlwZS5QRVJDRU5UQUdFLFxuICAgICAgICAgIHZhbHVlOiAyMCxcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBhIGZpeGVkIGFtb3VudCBkaXNjb3VudCBjb2RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGlzY291bnREdG86IENyZWF0ZURpc2NvdW50RHRvID0ge1xuICAgICAgICBjb2RlOiAnU0FWRTEwJyxcbiAgICAgICAgdHlwZTogRGlzY291bnRUeXBlLkZJWEVEX0FNT1VOVCxcbiAgICAgICAgdmFsdWU6IDEwLFxuICAgICAgICBkZXNjcmlwdGlvbjogJyQxMCBvZmYnLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0geyBpZDogJzEnLCAuLi5kaXNjb3VudER0bywgdXNhZ2VDb3VudDogMCwgaXNBY3RpdmU6IHRydWUgfTtcbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tEaXNjb3VudCBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkaXNjb3VudFNlcnZpY2UuY3JlYXRlRGlzY291bnQoZGlzY291bnREdG8pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnR5cGUpLnRvQmUoRGlzY291bnRUeXBlLkZJWEVEX0FNT1VOVCk7XG4gICAgICBleHBlY3QocmVzdWx0LnZhbHVlKS50b0JlKDEwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY3JlYXRlIGEgZnJlZSBzaGlwcGluZyBkaXNjb3VudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRpc2NvdW50RHRvOiBDcmVhdGVEaXNjb3VudER0byA9IHtcbiAgICAgICAgY29kZTogJ0ZSRUVTSElQJyxcbiAgICAgICAgdHlwZTogRGlzY291bnRUeXBlLkZSRUVfU0hJUFBJTkcsXG4gICAgICAgIHZhbHVlOiAwLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0ZyZWUgc2hpcHBpbmcnLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0geyBpZDogJzEnLCAuLi5kaXNjb3VudER0bywgdXNhZ2VDb3VudDogMCwgaXNBY3RpdmU6IHRydWUgfTtcbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tEaXNjb3VudCBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkaXNjb3VudFNlcnZpY2UuY3JlYXRlRGlzY291bnQoZGlzY291bnREdG8pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnR5cGUpLnRvQmUoRGlzY291bnRUeXBlLkZSRUVfU0hJUFBJTkcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgcGVyY2VudGFnZSBkaXNjb3VudCBvdmVyIDEwMCUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBkaXNjb3VudER0bzogQ3JlYXRlRGlzY291bnREdG8gPSB7XG4gICAgICAgIGNvZGU6ICdJTlZBTElEJyxcbiAgICAgICAgdHlwZTogRGlzY291bnRUeXBlLlBFUkNFTlRBR0UsXG4gICAgICAgIHZhbHVlOiAxNTAsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnSW52YWxpZCBkaXNjb3VudCcsXG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBleHBlY3QoZGlzY291bnRTZXJ2aWNlLmNyZWF0ZURpc2NvdW50KGRpc2NvdW50RHRvKSkucmVqZWN0cy50b1Rocm93KEJhZFJlcXVlc3RFcnJvcik7XG4gICAgICBhd2FpdCBleHBlY3QoZGlzY291bnRTZXJ2aWNlLmNyZWF0ZURpc2NvdW50KGRpc2NvdW50RHRvKSkucmVqZWN0cy50b1Rocm93KCdQZXJjZW50YWdlIGRpc2NvdW50IGNhbm5vdCBleGNlZWQgMTAwJScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgbmVnYXRpdmUgZGlzY291bnQgdmFsdWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGlzY291bnREdG86IENyZWF0ZURpc2NvdW50RHRvID0ge1xuICAgICAgICBjb2RlOiAnSU5WQUxJRCcsXG4gICAgICAgIHR5cGU6IERpc2NvdW50VHlwZS5GSVhFRF9BTU9VTlQsXG4gICAgICAgIHZhbHVlOiAtMTAsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnSW52YWxpZCBkaXNjb3VudCcsXG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBleHBlY3QoZGlzY291bnRTZXJ2aWNlLmNyZWF0ZURpc2NvdW50KGRpc2NvdW50RHRvKSkucmVqZWN0cy50b1Rocm93KEJhZFJlcXVlc3RFcnJvcik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBkaXNjb3VudCB3aXRoIG1pbmltdW0gcHVyY2hhc2UgcmVxdWlyZW1lbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBkaXNjb3VudER0bzogQ3JlYXRlRGlzY291bnREdG8gPSB7XG4gICAgICAgIGNvZGU6ICdNSU41MCcsXG4gICAgICAgIHR5cGU6IERpc2NvdW50VHlwZS5QRVJDRU5UQUdFLFxuICAgICAgICB2YWx1ZTogMTUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnMTUlIG9mZiBvcmRlcnMgb3ZlciAkNTAnLFxuICAgICAgICBtaW5QdXJjaGFzZUFtb3VudDogNTAsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBtb2NrRGlzY291bnQgPSB7IGlkOiAnMScsIC4uLmRpc2NvdW50RHRvLCB1c2FnZUNvdW50OiAwLCBpc0FjdGl2ZTogdHJ1ZSB9O1xuICAgICAgbW9ja0Rpc2NvdW50UmVwb3NpdG9yeS5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0Rpc2NvdW50IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRpc2NvdW50U2VydmljZS5jcmVhdGVEaXNjb3VudChkaXNjb3VudER0byk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQubWluUHVyY2hhc2VBbW91bnQpLnRvQmUoNTApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgZGlzY291bnQgd2l0aCBtYXhpbXVtIGRpc2NvdW50IGNhcCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRpc2NvdW50RHRvOiBDcmVhdGVEaXNjb3VudER0byA9IHtcbiAgICAgICAgY29kZTogJ1NBVkUyME1BWDEwJyxcbiAgICAgICAgdHlwZTogRGlzY291bnRUeXBlLlBFUkNFTlRBR0UsXG4gICAgICAgIHZhbHVlOiAyMCxcbiAgICAgICAgZGVzY3JpcHRpb246ICcyMCUgb2ZmIChtYXggJDEwKScsXG4gICAgICAgIG1heERpc2NvdW50QW1vdW50OiAxMCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tEaXNjb3VudCA9IHsgaWQ6ICcxJywgLi4uZGlzY291bnREdG8sIHVzYWdlQ291bnQ6IDAsIGlzQWN0aXZlOiB0cnVlIH07XG4gICAgICBtb2NrRGlzY291bnRSZXBvc2l0b3J5LmNyZWF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnQgYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGlzY291bnRTZXJ2aWNlLmNyZWF0ZURpc2NvdW50KGRpc2NvdW50RHRvKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5tYXhEaXNjb3VudEFtb3VudCkudG9CZSgxMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBkaXNjb3VudCB3aXRoIHVzYWdlIGxpbWl0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGlzY291bnREdG86IENyZWF0ZURpc2NvdW50RHRvID0ge1xuICAgICAgICBjb2RlOiAnTElNSVRFRDEwMCcsXG4gICAgICAgIHR5cGU6IERpc2NvdW50VHlwZS5GSVhFRF9BTU9VTlQsXG4gICAgICAgIHZhbHVlOiA1LFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0xpbWl0ZWQgdG8gMTAwIHVzZXMnLFxuICAgICAgICBtYXhVc2FnZUNvdW50OiAxMDAsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBtb2NrRGlzY291bnQgPSB7IGlkOiAnMScsIC4uLmRpc2NvdW50RHRvLCB1c2FnZUNvdW50OiAwLCBpc0FjdGl2ZTogdHJ1ZSB9O1xuICAgICAgbW9ja0Rpc2NvdW50UmVwb3NpdG9yeS5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0Rpc2NvdW50IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRpc2NvdW50U2VydmljZS5jcmVhdGVEaXNjb3VudChkaXNjb3VudER0byk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQubWF4VXNhZ2VDb3VudCkudG9CZSgxMDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgZGlzY291bnQgd2l0aCBwZXItdXNlciBsaW1pdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRpc2NvdW50RHRvOiBDcmVhdGVEaXNjb3VudER0byA9IHtcbiAgICAgICAgY29kZTogJ09OQ0UnLFxuICAgICAgICB0eXBlOiBEaXNjb3VudFR5cGUuUEVSQ0VOVEFHRSxcbiAgICAgICAgdmFsdWU6IDEwLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ09uZSB0aW1lIHVzZSBwZXIgY3VzdG9tZXInLFxuICAgICAgICBtYXhVc2FnZVBlclVzZXI6IDEsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBtb2NrRGlzY291bnQgPSB7IGlkOiAnMScsIC4uLmRpc2NvdW50RHRvLCB1c2FnZUNvdW50OiAwLCBpc0FjdGl2ZTogdHJ1ZSB9O1xuICAgICAgbW9ja0Rpc2NvdW50UmVwb3NpdG9yeS5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0Rpc2NvdW50IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRpc2NvdW50U2VydmljZS5jcmVhdGVEaXNjb3VudChkaXNjb3VudER0byk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQubWF4VXNhZ2VQZXJVc2VyKS50b0JlKDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3JtYWxpemUgZGlzY291bnQgY29kZSB0byB1cHBlcmNhc2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBkaXNjb3VudER0bzogQ3JlYXRlRGlzY291bnREdG8gPSB7XG4gICAgICAgIGNvZGU6ICdzYXZlMjAnLFxuICAgICAgICB0eXBlOiBEaXNjb3VudFR5cGUuUEVSQ0VOVEFHRSxcbiAgICAgICAgdmFsdWU6IDIwLFxuICAgICAgICBkZXNjcmlwdGlvbjogJzIwJSBvZmYnLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0geyBpZDogJzEnLCAuLi5kaXNjb3VudER0bywgY29kZTogJ1NBVkUyMCcsIHVzYWdlQ291bnQ6IDAsIGlzQWN0aXZlOiB0cnVlIH07XG4gICAgICBtb2NrRGlzY291bnRSZXBvc2l0b3J5LmNyZWF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnQgYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGlzY291bnRTZXJ2aWNlLmNyZWF0ZURpc2NvdW50KGRpc2NvdW50RHRvKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jb2RlKS50b0JlKCdTQVZFMjAnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3ZhbGlkYXRlRGlzY291bnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBhbiBhY3RpdmUgZGlzY291bnQgY29kZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tEaXNjb3VudCA9IHtcbiAgICAgICAgaWQ6ICcxJyxcbiAgICAgICAgY29kZTogJ1ZBTElEJyxcbiAgICAgICAgdHlwZTogRGlzY291bnRUeXBlLlBFUkNFTlRBR0UsXG4gICAgICAgIHZhbHVlOiAyMCxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgIHVzYWdlQ291bnQ6IDUsXG4gICAgICAgIGV4cGlyZXNBdDogbmV3IERhdGUoJzIwMjUtMTItMzEnKSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuZmluZEJ5Q29kZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnQgYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGlzY291bnRTZXJ2aWNlLnZhbGlkYXRlRGlzY291bnQoJ1ZBTElEJyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZGlzY291bnQpLnRvRXF1YWwobW9ja0Rpc2NvdW50KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IG5vbi1leGlzdGVudCBkaXNjb3VudCBjb2RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0Rpc2NvdW50UmVwb3NpdG9yeS5maW5kQnlDb2RlLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkaXNjb3VudFNlcnZpY2UudmFsaWRhdGVEaXNjb3VudCgnSU5WQUxJRCcpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5yZWFzb24pLnRvQmUoJ0Rpc2NvdW50IGNvZGUgbm90IGZvdW5kJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlamVjdCBpbmFjdGl2ZSBkaXNjb3VudCBjb2RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0ge1xuICAgICAgICBpZDogJzEnLFxuICAgICAgICBjb2RlOiAnSU5BQ1RJVkUnLFxuICAgICAgICB0eXBlOiBEaXNjb3VudFR5cGUuUEVSQ0VOVEFHRSxcbiAgICAgICAgdmFsdWU6IDIwLFxuICAgICAgICBpc0FjdGl2ZTogZmFsc2UsXG4gICAgICB9O1xuXG4gICAgICBtb2NrRGlzY291bnRSZXBvc2l0b3J5LmZpbmRCeUNvZGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0Rpc2NvdW50IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRpc2NvdW50U2VydmljZS52YWxpZGF0ZURpc2NvdW50KCdJTkFDVElWRScpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5yZWFzb24pLnRvQmUoJ0Rpc2NvdW50IGNvZGUgaXMgbm90IGFjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgZXhwaXJlZCBkaXNjb3VudCBjb2RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0ge1xuICAgICAgICBpZDogJzEnLFxuICAgICAgICBjb2RlOiAnRVhQSVJFRCcsXG4gICAgICAgIHR5cGU6IERpc2NvdW50VHlwZS5QRVJDRU5UQUdFLFxuICAgICAgICB2YWx1ZTogMjAsXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICBleHBpcmVzQXQ6IG5ldyBEYXRlKCcyMDIwLTAxLTAxJyksXG4gICAgICB9O1xuXG4gICAgICBtb2NrRGlzY291bnRSZXBvc2l0b3J5LmZpbmRCeUNvZGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0Rpc2NvdW50IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRpc2NvdW50U2VydmljZS52YWxpZGF0ZURpc2NvdW50KCdFWFBJUkVEJyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LnJlYXNvbikudG9CZSgnRGlzY291bnQgY29kZSBoYXMgZXhwaXJlZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgZGlzY291bnQgdGhhdCBoYXMgbm90IHN0YXJ0ZWQgeWV0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0ge1xuICAgICAgICBpZDogJzEnLFxuICAgICAgICBjb2RlOiAnRlVUVVJFJyxcbiAgICAgICAgdHlwZTogRGlzY291bnRUeXBlLlBFUkNFTlRBR0UsXG4gICAgICAgIHZhbHVlOiAyMCxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgIHN0YXJ0c0F0OiBuZXcgRGF0ZSgnMjAzMC0wMS0wMScpLFxuICAgICAgfTtcblxuICAgICAgbW9ja0Rpc2NvdW50UmVwb3NpdG9yeS5maW5kQnlDb2RlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tEaXNjb3VudCBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkaXNjb3VudFNlcnZpY2UudmFsaWRhdGVEaXNjb3VudCgnRlVUVVJFJyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LnJlYXNvbikudG9CZSgnRGlzY291bnQgY29kZSBpcyBub3QgeWV0IGFjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgZGlzY291bnQgdGhhdCByZWFjaGVkIG1heCB1c2FnZSBsaW1pdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tEaXNjb3VudCA9IHtcbiAgICAgICAgaWQ6ICcxJyxcbiAgICAgICAgY29kZTogJ01BWEVEJyxcbiAgICAgICAgdHlwZTogRGlzY291bnRUeXBlLlBFUkNFTlRBR0UsXG4gICAgICAgIHZhbHVlOiAyMCxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgIHVzYWdlQ291bnQ6IDEwMCxcbiAgICAgICAgbWF4VXNhZ2VDb3VudDogMTAwLFxuICAgICAgfTtcblxuICAgICAgbW9ja0Rpc2NvdW50UmVwb3NpdG9yeS5maW5kQnlDb2RlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tEaXNjb3VudCBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkaXNjb3VudFNlcnZpY2UudmFsaWRhdGVEaXNjb3VudCgnTUFYRUQnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1ZhbGlkKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQucmVhc29uKS50b0JlKCdEaXNjb3VudCBjb2RlIGhhcyByZWFjaGVkIG1heGltdW0gdXNhZ2UgbGltaXQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FwcGx5RGlzY291bnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhcHBseSBwZXJjZW50YWdlIGRpc2NvdW50IHRvIG9yZGVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0ge1xuICAgICAgICBpZDogJzEnLFxuICAgICAgICBjb2RlOiAnU0FWRTIwJyxcbiAgICAgICAgdHlwZTogRGlzY291bnRUeXBlLlBFUkNFTlRBR0UsXG4gICAgICAgIHZhbHVlOiAyMCxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICB9O1xuXG4gICAgICBtb2NrRGlzY291bnRSZXBvc2l0b3J5LmZpbmRCeUNvZGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0Rpc2NvdW50IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IGFwcGx5RHRvOiBBcHBseURpc2NvdW50RHRvID0ge1xuICAgICAgICBjb2RlOiAnU0FWRTIwJyxcbiAgICAgICAgb3JkZXJTdWJ0b3RhbDogMTAwLFxuICAgICAgICB1c2VySWQ6ICd1c2VyMTIzJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRpc2NvdW50U2VydmljZS5hcHBseURpc2NvdW50KGFwcGx5RHRvKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5kaXNjb3VudEFtb3VudCkudG9CZSgyMCk7XG4gICAgICBleHBlY3QocmVzdWx0LmZpbmFsQW1vdW50KS50b0JlKDgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYXBwbHkgZml4ZWQgYW1vdW50IGRpc2NvdW50IHRvIG9yZGVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0ge1xuICAgICAgICBpZDogJzEnLFxuICAgICAgICBjb2RlOiAnU0FWRTEwJyxcbiAgICAgICAgdHlwZTogRGlzY291bnRUeXBlLkZJWEVEX0FNT1VOVCxcbiAgICAgICAgdmFsdWU6IDEwLFxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuZmluZEJ5Q29kZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnQgYXMgYW55KTtcblxuICAgICAgY29uc3QgYXBwbHlEdG86IEFwcGx5RGlzY291bnREdG8gPSB7XG4gICAgICAgIGNvZGU6ICdTQVZFMTAnLFxuICAgICAgICBvcmRlclN1YnRvdGFsOiA1MCxcbiAgICAgICAgdXNlcklkOiAndXNlcjEyMycsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkaXNjb3VudFNlcnZpY2UuYXBwbHlEaXNjb3VudChhcHBseUR0byk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuZGlzY291bnRBbW91bnQpLnRvQmUoMTApO1xuICAgICAgZXhwZWN0KHJlc3VsdC5maW5hbEFtb3VudCkudG9CZSg0MCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFwcGx5IGZyZWUgc2hpcHBpbmcgZGlzY291bnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRGlzY291bnQgPSB7XG4gICAgICAgIGlkOiAnMScsXG4gICAgICAgIGNvZGU6ICdGUkVFU0hJUCcsXG4gICAgICAgIHR5cGU6IERpc2NvdW50VHlwZS5GUkVFX1NISVBQSU5HLFxuICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICB9O1xuXG4gICAgICBtb2NrRGlzY291bnRSZXBvc2l0b3J5LmZpbmRCeUNvZGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0Rpc2NvdW50IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IGFwcGx5RHRvOiBBcHBseURpc2NvdW50RHRvID0ge1xuICAgICAgICBjb2RlOiAnRlJFRVNISVAnLFxuICAgICAgICBvcmRlclN1YnRvdGFsOiAxMDAsXG4gICAgICAgIHNoaXBwaW5nQ29zdDogMTAsXG4gICAgICAgIHVzZXJJZDogJ3VzZXIxMjMnLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGlzY291bnRTZXJ2aWNlLmFwcGx5RGlzY291bnQoYXBwbHlEdG8pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmZyZWVTaGlwcGluZykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc2hpcHBpbmdEaXNjb3VudCkudG9CZSgxMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNhcCBwZXJjZW50YWdlIGRpc2NvdW50IGF0IG1heGltdW0gYW1vdW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0ge1xuICAgICAgICBpZDogJzEnLFxuICAgICAgICBjb2RlOiAnU0FWRTIwTUFYMTAnLFxuICAgICAgICB0eXBlOiBEaXNjb3VudFR5cGUuUEVSQ0VOVEFHRSxcbiAgICAgICAgdmFsdWU6IDIwLFxuICAgICAgICBtYXhEaXNjb3VudEFtb3VudDogMTAsXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgfTtcblxuICAgICAgbW9ja0Rpc2NvdW50UmVwb3NpdG9yeS5maW5kQnlDb2RlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tEaXNjb3VudCBhcyBhbnkpO1xuXG4gICAgICBjb25zdCBhcHBseUR0bzogQXBwbHlEaXNjb3VudER0byA9IHtcbiAgICAgICAgY29kZTogJ1NBVkUyME1BWDEwJyxcbiAgICAgICAgb3JkZXJTdWJ0b3RhbDogMTAwLCAvLyAyMCUgd291bGQgYmUgJDIwLCBidXQgY2FwcGVkIGF0ICQxMFxuICAgICAgICB1c2VySWQ6ICd1c2VyMTIzJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRpc2NvdW50U2VydmljZS5hcHBseURpc2NvdW50KGFwcGx5RHRvKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5kaXNjb3VudEFtb3VudCkudG9CZSgxMCk7XG4gICAgICBleHBlY3QocmVzdWx0LmZpbmFsQW1vdW50KS50b0JlKDkwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGRpc2NvdW50IGlmIG9yZGVyIGRvZXMgbm90IG1lZXQgbWluaW11bSBwdXJjaGFzZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tEaXNjb3VudCA9IHtcbiAgICAgICAgaWQ6ICcxJyxcbiAgICAgICAgY29kZTogJ01JTjUwJyxcbiAgICAgICAgdHlwZTogRGlzY291bnRUeXBlLlBFUkNFTlRBR0UsXG4gICAgICAgIHZhbHVlOiAxNSxcbiAgICAgICAgbWluUHVyY2hhc2VBbW91bnQ6IDUwLFxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuZmluZEJ5Q29kZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnQgYXMgYW55KTtcblxuICAgICAgY29uc3QgYXBwbHlEdG86IEFwcGx5RGlzY291bnREdG8gPSB7XG4gICAgICAgIGNvZGU6ICdNSU41MCcsXG4gICAgICAgIG9yZGVyU3VidG90YWw6IDMwLFxuICAgICAgICB1c2VySWQ6ICd1c2VyMTIzJyxcbiAgICAgIH07XG5cbiAgICAgIGF3YWl0IGV4cGVjdChkaXNjb3VudFNlcnZpY2UuYXBwbHlEaXNjb3VudChhcHBseUR0bykpLnJlamVjdHMudG9UaHJvdyhCYWRSZXF1ZXN0RXJyb3IpO1xuICAgICAgYXdhaXQgZXhwZWN0KGRpc2NvdW50U2VydmljZS5hcHBseURpc2NvdW50KGFwcGx5RHRvKSkucmVqZWN0cy50b1Rocm93KCdtaW5pbXVtIHB1cmNoYXNlIGFtb3VudCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgYWxsb3cgZGlzY291bnQgdG8gZXhjZWVkIG9yZGVyIHN1YnRvdGFsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0ge1xuICAgICAgICBpZDogJzEnLFxuICAgICAgICBjb2RlOiAnU0FWRTUwJyxcbiAgICAgICAgdHlwZTogRGlzY291bnRUeXBlLkZJWEVEX0FNT1VOVCxcbiAgICAgICAgdmFsdWU6IDUwLFxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuZmluZEJ5Q29kZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnQgYXMgYW55KTtcblxuICAgICAgY29uc3QgYXBwbHlEdG86IEFwcGx5RGlzY291bnREdG8gPSB7XG4gICAgICAgIGNvZGU6ICdTQVZFNTAnLFxuICAgICAgICBvcmRlclN1YnRvdGFsOiAzMCxcbiAgICAgICAgdXNlcklkOiAndXNlcjEyMycsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkaXNjb3VudFNlcnZpY2UuYXBwbHlEaXNjb3VudChhcHBseUR0byk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuZGlzY291bnRBbW91bnQpLnRvQmUoMzApOyAvLyBDYXBwZWQgYXQgc3VidG90YWxcbiAgICAgIGV4cGVjdChyZXN1bHQuZmluYWxBbW91bnQpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGluY3JlbWVudCB1c2FnZSBjb3VudCB3aGVuIGRpc2NvdW50IGlzIGFwcGxpZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRGlzY291bnQgPSB7XG4gICAgICAgIGlkOiAnMScsXG4gICAgICAgIGNvZGU6ICdTQVZFMjAnLFxuICAgICAgICB0eXBlOiBEaXNjb3VudFR5cGUuUEVSQ0VOVEFHRSxcbiAgICAgICAgdmFsdWU6IDIwLFxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgdXNhZ2VDb3VudDogNSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuZmluZEJ5Q29kZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnQgYXMgYW55KTtcbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuaW5jcmVtZW50VXNhZ2VDb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuXG4gICAgICBjb25zdCBhcHBseUR0bzogQXBwbHlEaXNjb3VudER0byA9IHtcbiAgICAgICAgY29kZTogJ1NBVkUyMCcsXG4gICAgICAgIG9yZGVyU3VidG90YWw6IDEwMCxcbiAgICAgICAgdXNlcklkOiAndXNlcjEyMycsXG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBkaXNjb3VudFNlcnZpY2UuYXBwbHlEaXNjb3VudChhcHBseUR0byk7XG5cbiAgICAgIGV4cGVjdChtb2NrRGlzY291bnRSZXBvc2l0b3J5LmluY3JlbWVudFVzYWdlQ291bnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcxJywgJ3VzZXIxMjMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGRpc2NvdW50IGlmIHVzZXIgaGFzIGV4Y2VlZGVkIHBlci11c2VyIGxpbWl0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0ge1xuICAgICAgICBpZDogJzEnLFxuICAgICAgICBjb2RlOiAnT05DRScsXG4gICAgICAgIHR5cGU6IERpc2NvdW50VHlwZS5QRVJDRU5UQUdFLFxuICAgICAgICB2YWx1ZTogMTAsXG4gICAgICAgIG1heFVzYWdlUGVyVXNlcjogMSxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICB9O1xuXG4gICAgICBtb2NrRGlzY291bnRSZXBvc2l0b3J5LmZpbmRCeUNvZGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0Rpc2NvdW50IGFzIGFueSk7XG4gICAgICBtb2NrRGlzY291bnRSZXBvc2l0b3J5LmZpbmRCeVVzZXJJZC5tb2NrUmVzb2x2ZWRWYWx1ZShbXG4gICAgICAgIHsgZGlzY291bnRJZDogJzEnLCB1c2VySWQ6ICd1c2VyMTIzJywgdXNlZEF0OiBuZXcgRGF0ZSgpIH0sXG4gICAgICBdIGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IGFwcGx5RHRvOiBBcHBseURpc2NvdW50RHRvID0ge1xuICAgICAgICBjb2RlOiAnT05DRScsXG4gICAgICAgIG9yZGVyU3VidG90YWw6IDEwMCxcbiAgICAgICAgdXNlcklkOiAndXNlcjEyMycsXG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBleHBlY3QoZGlzY291bnRTZXJ2aWNlLmFwcGx5RGlzY291bnQoYXBwbHlEdG8pKS5yZWplY3RzLnRvVGhyb3coQmFkUmVxdWVzdEVycm9yKTtcbiAgICAgIGF3YWl0IGV4cGVjdChkaXNjb3VudFNlcnZpY2UuYXBwbHlEaXNjb3VudChhcHBseUR0bykpLnJlamVjdHMudG9UaHJvdygnYWxyZWFkeSB1c2VkIHRoaXMgZGlzY291bnQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldEFjdGl2ZURpc2NvdW50cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBhbGwgYWN0aXZlIGRpc2NvdW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tEaXNjb3VudHMgPSBbXG4gICAgICAgIHsgaWQ6ICcxJywgY29kZTogJ1NBVkUyMCcsIGlzQWN0aXZlOiB0cnVlLCB0eXBlOiBEaXNjb3VudFR5cGUuUEVSQ0VOVEFHRSwgdmFsdWU6IDIwIH0sXG4gICAgICAgIHsgaWQ6ICcyJywgY29kZTogJ1NBVkUxMCcsIGlzQWN0aXZlOiB0cnVlLCB0eXBlOiBEaXNjb3VudFR5cGUuRklYRURfQU1PVU5ULCB2YWx1ZTogMTAgfSxcbiAgICAgIF07XG5cbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuZmluZEFjdGl2ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnRzIGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRpc2NvdW50U2VydmljZS5nZXRBY3RpdmVEaXNjb3VudHMoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXS5jb2RlKS50b0JlKCdTQVZFMjAnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2RlYWN0aXZhdGVEaXNjb3VudCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRlYWN0aXZhdGUgYSBkaXNjb3VudCBjb2RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Rpc2NvdW50ID0ge1xuICAgICAgICBpZDogJzEnLFxuICAgICAgICBjb2RlOiAnU0FWRTIwJyxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICB9O1xuXG4gICAgICBtb2NrRGlzY291bnRSZXBvc2l0b3J5LmZpbmRCeUlkLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tEaXNjb3VudCBhcyBhbnkpO1xuICAgICAgbW9ja0Rpc2NvdW50UmVwb3NpdG9yeS51cGRhdGUubW9ja1Jlc29sdmVkVmFsdWUoeyAuLi5tb2NrRGlzY291bnQsIGlzQWN0aXZlOiBmYWxzZSB9IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRpc2NvdW50U2VydmljZS5kZWFjdGl2YXRlRGlzY291bnQoJzEnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc0FjdGl2ZSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QobW9ja0Rpc2NvdW50UmVwb3NpdG9yeS51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcxJywgeyBpc0FjdGl2ZTogZmFsc2UgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXREaXNjb3VudFVzYWdlU3RhdHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdXNhZ2Ugc3RhdGlzdGljcyBmb3IgYSBkaXNjb3VudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tEaXNjb3VudCA9IHtcbiAgICAgICAgaWQ6ICcxJyxcbiAgICAgICAgY29kZTogJ1NBVkUyMCcsXG4gICAgICAgIHVzYWdlQ291bnQ6IDE1MCxcbiAgICAgICAgbWF4VXNhZ2VDb3VudDogMjAwLFxuICAgICAgfTtcblxuICAgICAgbW9ja0Rpc2NvdW50UmVwb3NpdG9yeS5maW5kQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnQgYXMgYW55KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGlzY291bnRTZXJ2aWNlLmdldERpc2NvdW50VXNhZ2VTdGF0cygnMScpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnRvdGFsVXNhZ2UpLnRvQmUoMTUwKTtcbiAgICAgIGV4cGVjdChyZXN1bHQucmVtYWluaW5nVXNhZ2UpLnRvQmUoNTApO1xuICAgICAgZXhwZWN0KHJlc3VsdC51c2FnZVBlcmNlbnRhZ2UpLnRvQmUoNzUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY2FsY3VsYXRlU2F2aW5ncycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSB0b3RhbCBzYXZpbmdzIGZyb20gZGlzY291bnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRGlzY291bnQgPSB7XG4gICAgICAgIGlkOiAnMScsXG4gICAgICAgIGNvZGU6ICdTQVZFMjAnLFxuICAgICAgICB0eXBlOiBEaXNjb3VudFR5cGUuUEVSQ0VOVEFHRSxcbiAgICAgICAgdmFsdWU6IDIwLFxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuZmluZEJ5Q29kZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRGlzY291bnQgYXMgYW55KTtcblxuICAgICAgY29uc3Qgc2F2aW5ncyA9IGF3YWl0IGRpc2NvdW50U2VydmljZS5jYWxjdWxhdGVTYXZpbmdzKCdTQVZFMjAnLCAxMDApO1xuXG4gICAgICBleHBlY3Qoc2F2aW5ncykudG9CZSgyMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBzYXZpbmdzIGZvciBmaXhlZCBhbW91bnQgZGlzY291bnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRGlzY291bnQgPSB7XG4gICAgICAgIGlkOiAnMScsXG4gICAgICAgIGNvZGU6ICdTQVZFMTUnLFxuICAgICAgICB0eXBlOiBEaXNjb3VudFR5cGUuRklYRURfQU1PVU5ULFxuICAgICAgICB2YWx1ZTogMTUsXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgfTtcblxuICAgICAgbW9ja0Rpc2NvdW50UmVwb3NpdG9yeS5maW5kQnlDb2RlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tEaXNjb3VudCBhcyBhbnkpO1xuXG4gICAgICBjb25zdCBzYXZpbmdzID0gYXdhaXQgZGlzY291bnRTZXJ2aWNlLmNhbGN1bGF0ZVNhdmluZ3MoJ1NBVkUxNScsIDEwMCk7XG5cbiAgICAgIGV4cGVjdChzYXZpbmdzKS50b0JlKDE1KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2RlbGV0ZURpc2NvdW50JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGVsZXRlIGEgZGlzY291bnQgY29kZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tEaXNjb3VudFJlcG9zaXRvcnkuZGVsZXRlLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG5cbiAgICAgIGF3YWl0IGRpc2NvdW50U2VydmljZS5kZWxldGVEaXNjb3VudCgnMScpO1xuXG4gICAgICBleHBlY3QobW9ja0Rpc2NvdW50UmVwb3NpdG9yeS5kZWxldGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcxJyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=