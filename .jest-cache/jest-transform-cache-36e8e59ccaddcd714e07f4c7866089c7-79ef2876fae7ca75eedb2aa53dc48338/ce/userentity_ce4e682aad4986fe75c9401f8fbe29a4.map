{"file":"C:\\Adaptive_Testing\\src\\services\\user-management\\entities\\user.entity.ts","mappings":"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","names":[],"sources":["C:\\Adaptive_Testing\\src\\services\\user-management\\entities\\user.entity.ts"],"sourcesContent":["import {\n  Entity,\n  PrimaryGeneratedColumn,\n  Column,\n  CreateDateColumn,\n  UpdateDateColumn,\n  DeleteDateColumn,\n  Index,\n} from 'typeorm';\n\nexport enum UserRole {\n  ADMIN = 'admin',\n  CUSTOMER = 'customer',\n  VENDOR = 'vendor',\n}\n\nexport enum UserStatus {\n  PENDING = 'pending',\n  ACTIVE = 'active',\n  SUSPENDED = 'suspended',\n  DELETED = 'deleted',\n}\n\n@Entity('users')\nexport class User {\n  @PrimaryGeneratedColumn('uuid')\n  id!: string;\n\n  @Column({ unique: true })\n  @Index()\n  email!: string;\n\n  @Column()\n  password!: string;\n\n  @Column()\n  firstName!: string;\n\n  @Column()\n  lastName!: string;\n\n  @Column({\n    type: 'enum',\n    enum: UserRole,\n    default: UserRole.CUSTOMER,\n  })\n  role!: UserRole;\n\n  @Column({\n    type: 'enum',\n    enum: UserStatus,\n    default: UserStatus.PENDING,\n  })\n  status!: UserStatus;\n\n  @Column({ nullable: true })\n  phoneNumber?: string;\n\n  @Column({ nullable: true })\n  @Index()\n  emailVerificationToken?: string;\n\n  @Column({ type: 'timestamp', nullable: true })\n  emailVerifiedAt?: Date;\n\n  @Column({ nullable: true })\n  passwordResetToken?: string;\n\n  @Column({ type: 'timestamp', nullable: true })\n  passwordResetExpires?: Date;\n\n  @Column({ type: 'timestamp', nullable: true })\n  lastLoginAt?: Date;\n\n  @Column({ default: 0 })\n  loginAttempts!: number;\n\n  @Column({ type: 'timestamp', nullable: true })\n  lockedUntil?: Date;\n\n  @CreateDateColumn()\n  createdAt!: Date;\n\n  @UpdateDateColumn()\n  updatedAt!: Date;\n\n  @DeleteDateColumn()\n  deletedAt?: Date;\n\n  /**\n   * Get full name\n   */\n  get fullName(): string {\n    return `${this.firstName} ${this.lastName}`;\n  }\n\n  /**\n   * Check if email is verified\n   */\n  isEmailVerified(): boolean {\n    return this.emailVerifiedAt !== null && this.emailVerifiedAt !== undefined;\n  }\n\n  /**\n   * Check if account is locked\n   */\n  isLocked(): boolean {\n    if (!this.lockedUntil) {\n      return false;\n    }\n    return this.lockedUntil > new Date();\n  }\n\n  /**\n   * Check if user is active\n   */\n  isActive(): boolean {\n    return this.status === UserStatus.ACTIVE && !this.isLocked();\n  }\n\n  /**\n   * Sanitize user data (remove sensitive fields)\n   */\n  toJSON(): Partial<User> {\n    const { password, emailVerificationToken, passwordResetToken, ...sanitized } = this;\n    return sanitized;\n  }\n}\n"],"version":3}